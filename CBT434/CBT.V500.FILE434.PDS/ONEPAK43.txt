//TSGMXZ1O  JOB (AD00),'#04D42 ZELDEN',
//             NOTIFY=&SYSUID,
//             CLASS=M,MSGCLASS=H,MSGLEVEL=(1,1)
//*
//*****************************************************************
//*  GLOBALLY CHANGE CURRES TO THE CURRENT SYSRES VOLUME
//*****************************************************************
//*
//* THE ONEPAK SYSTEM INCLUDES THE FOLLOWING PRODUCTS (IN ADDITION TO
//* MVS/ESA STUFF): DFP, DSF, VTAM, RACF, ISPF, ISPF/PDF, SDSF,
//*                TSO/E, COBOL LIBRARY, FDR, IAM, AND SYNCSORT
//*
//*
//*   THE FOLLOWING STEPS COPY CURRES TO SYS1PK AND ......
//*
//*  1.  DEFINE MASTER CATALOG
//*  2.  FDRCOPY RACF DSNS (MUST BE DONE FIRST - DSORG=PSU)
//*  3.  DEFINE PAGE DATA SETS, SMF DATASETS AND STGINDEX
//*  4.  FORMAT SMF DATASETS
//*  5.  FDRCOPY THE CURRENT MVS SYSTEM TO SYS1PK AND CATLG DSNS
//*  6.  PUT IPL TEXT ON VOLUME USING ICKDSF
//*  7.  ALLOCATE NEW LOGREC, BRODCAST, SPOOL AND DUMP DSN
//*  8.  RENAME NEW LOGREC, BRODCAST, SPOOL AND DUMP DSN
//*  9.  CATALOG NEW LOGREC, BRODCAST, SPOOL AND DUMP DSN
//* 10.  INITIALIZE LOGREC
//* 11.  UPDATE SYSCATLG MEMBER IN SYS1.NUCLEUS
//* 12.  COMPRESS SYS1.PARMLIB ON SYS1PK
//* 13.  UPDATE PROCLIBS, PARMLIB, AND VTAMLST MEMBERS ON SYS1PK
//* 14.  LIST THE SYS1PK MASTER CATALOG
//*
//* AFTER THE FIRST IPL:
//*  A) ISSUE  DD CLEAR,DSN=ALL  COMMAND FROM A SYSTEM CONSOLE.
//*  B) LOGON TO TSO AND ISSUE THE SYNC COMMAND TO FORMAT THE
//*     BRODCAST DATASET (BE SURE TO ALLOC FILE(SYSUADS) ).
//*
//*****************************************************************
//*----------------------------------------------------------------
//MCAT1     EXEC  PGM=IDCAMS,REGION=4096K
//SYSPRINT  DD    SYSOUT=*
//DISK      DD    DISP=SHR,UNIT=SYSDA,VOL=SER=SYS1PK
//SYSIN     DD    *
 EXP SYS1.MCAT.VSYS1PK DISCONNECT
 IF LASTCC=12 THEN SET MAXCC=0
 DEF MCAT(NAME(SYS1.MCAT.VSYS1PK) VOLUME(SYS1PK) -
     FILE(DISK) TRK(15 2) ICFCAT IMBED REPL -
     SHR(3 4) STRNO(2) BUFSP(6144)) -
     DATA(BUFND(3) FSPC(10 2) CISZ(1024)) -
     INDEX(BUFNI(3) CISZ(1024)) -
     CAT(CURRENT.MASTER.CATALOG)  /* CHANGE */
//*----------------------------------------------------------------
//COPY2    EXEC PGM=FDRCOPY,REGION=4096K
//STEPCAT   DD    DISP=SHR,DSN=SYS1.MCAT.VSYS1PK
//SYSPRINT DD  SYSOUT=*
//SYSPRIN1 DD  SYSOUT=*
//SYSPRIN2 DD  SYSOUT=*
//SYSUDUMP DD  SYSOUT=*
//DISK1    DD  UNIT=SYSDA,VOL=SER=SYSMCT,DISP=SHR
//TAPE1    DD  UNIT=SYSDA,VOL=SER=SYS1PK,DISP=SHR
//DISK2    DD  UNIT=SYSDA,VOL=SER=SYS021,DISP=SHR
//TAPE2    DD  UNIT=SYSDA,VOL=SER=SYS1PK,DISP=SHR
//SYSIN    DD  *
 COPY     TYPE=DSF,DSNENQ=NONE,ENQERR=NO
 SELECT   DSN=SYS1.RACF,VOL=SYSMCT
 SELECT   DSN=SYS1.RACF.BKUP1,VOL=SYS021
//*----------------------------------------------------------------
//*
//PAGE3     EXEC  PGM=IDCAMS,REGION=4096K
//STEPCAT   DD    DISP=SHR,DSN=SYS1.MCAT.VSYS1PK
//SYSPRINT  DD    SYSOUT=*
//DISK      DD    DISP=OLD,VOL=SER=SYS1PK,UNIT=SYSDA
//SYSIN     DD    *
 DEF PGSPC(NAME(PAGE.VSYS1PK.PLPA) VOL(SYS1PK) -
     FILE(DISK) CYLINDERS(50)) -
     CATALOG(SYS1.MCAT.VSYS1PK)
 DEF PGSPC(NAME(PAGE.VSYS1PK.COMMON) VOL(SYS1PK) -
     FILE(DISK) CYLINDERS(10)) -
     CATALOG(SYS1.MCAT.VSYS1PK)
 DEF PGSPC(NAME(PAGE.VSYS1PK.LOCAL) VOL(SYS1PK) -
     FILE(DISK) CYLINDERS(200)) -
     CATALOG(SYS1.MCAT.VSYS1PK)
 DEF CLUSTER (BUFFERSPACE(20480) CYL(2) FILE(DISK) -
     KEYS(12,8) NAME(SYS1.STGINDEX) -
     RECORDSIZE(2041,2041) REUSE VOLUME(SYS1PK)) -
     DATA(CONTROLINTERVALSIZE(2048)) -
     INDEX(CONTROLINTERVALSIZE(4096)) -
     CATALOG(SYS1.MCAT.VSYS1PK)
 DEF CLUSTER (CONTROLINTERVALSIZE(4096) CYLINDERS(5) -
     NAME(SYS1.MAN1) NONINDEXED RECORDSIZE(4086,32767)-
     REUSE SHAREOPTIONS(2) SPANNED SPEED VOLUME(SYS1PK)) -
     DATA (NAME(SYS1.MAN1.DATA)) -
     CATALOG(SYS1.MCAT.VSYS1PK)
 DEF CLUSTER (CONTROLINTERVALSIZE(4096) CYLINDERS(1) -
     NAME(SYS1.MAN2) NONINDEXED RECORDSIZE(4086,32767)-
     REUSE SHAREOPTIONS(2) SPANNED SPEED VOLUME(SYS1PK)) -
     DATA (NAME(SYS1.MAN2.DATA)) -
     CATALOG(SYS1.MCAT.VSYS1PK)
//*----------------------------------------------------------------
//SMFFMT4 EXEC  PGM=IFASMFDP
//STEPCAT   DD    DISP=SHR,DSN=SYS1.MCAT.VSYS1PK
//SYSPRINT DD  SYSOUT=*
//MAN1     DD  DSN=SYS1.MAN1,DISP=SHR
//MAN2     DD  DSN=SYS1.MAN2,DISP=SHR
//SYSIN    DD  *
   INDD(MAN1,OPTIONS(CLEAR))
   INDD(MAN2,OPTIONS(CLEAR))
/*
//*----------------------------------------------------------------
//*
//COPY5    EXEC PGM=FDRCOPY,REGION=4096K
//STEPCAT   DD    DISP=SHR,DSN=SYS1.MCAT.VSYS1PK
//SYSPRINT DD  SYSOUT=*
//SYSPRIN1 DD  SYSOUT=*
//SYSPRIN2 DD  SYSOUT=*
//SYSPRIN3 DD  SYSOUT=*
//SYSPRIN4 DD  SYSOUT=*
//SYSPRIN5 DD  SYSOUT=*
//SYSUDUMP DD  SYSOUT=*
//DISK1    DD  UNIT=SYSDA,VOL=SER=CURRES,DISP=SHR
//TAPE1    DD  UNIT=SYSDA,VOL=SER=SYS1PK,DISP=SHR
//DISK2    DD  UNIT=SYSDA,VOL=SER=SMPE01,DISP=SHR
//TAPE2    DD  UNIT=SYSDA,VOL=SER=SYS1PK,DISP=SHR
//DISK3    DD  UNIT=SYSDA,VOL=SER=SYSMCT,DISP=SHR
//TAPE3    DD  UNIT=SYSDA,VOL=SER=SYS1PK,DISP=SHR
//DISK4    DD  UNIT=SYSDA,VOL=SER=IMS13A,DISP=SHR
//TAPE4    DD  UNIT=SYSDA,VOL=SER=SYS1PK,DISP=SHR
//DISK5    DD  UNIT=SYSDA,VOL=SER=SYS011,DISP=SHR
//TAPE5    DD  UNIT=SYSDA,VOL=SER=SYS1PK,DISP=SHR
//SYSIN    DD  *
 COPY     TYPE=DSF,DSNENQ=NONE,ENQERR=NO
 SELECT   DSN=SYS1.CMDLIB,VOL=CURRES
 SELECT   DSN=SYS1.DAE,VOL=CURRES
 SELECT   DSN=SYS1.HELP,VOL=CURRES
 SELECT   DSN=SYS1.IMAGELIB,VOL=CURRES
 SELECT   DSN=SYS1.LINKLIB,VOL=CURRES
 SELECT   DSN=SYS1.MIGLIB,VOL=CURRES
 SELECT   DSN=SYS1.CSSLIB,VOL=CURRES
 SELECT   DSN=SYS1.LPALIB,VOL=CURRES
 SELECT   DSN=SYS1.MACLIB,VOL=CURRES
 SELECT   DSN=SYS1.MODGEN,VOL=CURRES
 SELECT   DSN=SYS1.NUCLEUS,VOL=CURRES
 SELECT   DSN=SYS1.PARMLIB,VOL=CURRES
 SELECT   DSN=SYS1.PROCLIB,VOL=CURRES
 SELECT   DSN=SYS1.SAMPLIB,VOL=CURRES
 SELECT   DSN=SYS1.SISTMAC1,VOL=CURRES
 SELECT   DSN=SYS1.SVCLIB,VOL=CURRES
 SELECT   DSN=SYS1.VSCLLIB,VOL=CURRES
 SELECT   DSN=SYS1.COB2LIB,VOL=CURRES
 SELECT   DSN=SYS1.PLILINK,VOL=CURRES
 SELECT   DSN=SYS1.SIBMLINK,VOL=CURRES
 SELECT   DSN=SYS1.VTAMLIB,VOL=CURRES
 SELECT   DSN=ISF.**,VOL=CURRES
 SELECT   DSN=ISP.**,VOL=CURRES
 SELECT   DSN=ISR.**,VOL=CURRES
 SELECT   DSN=ISF.HASPINDX,VOL=IMS13A
 SELECT   DSN=SYS2.LINKLIB,VOL=SMPE01
 SELECT   DSN=SYS1.IAM.LINKLIB,VOL=SYS011
 SELECT   DSN=SYS2.FDR.LINKLIB,VOL=SMPE01
 SELECT   DSN=SYS2.SYNC.LINKLIB,VOL=SMPE01
 SELECT   DSN=SYS2.SYNC.LPALIB,VOL=SMPE01
 SELECT   DSN=SYS3.PARMLIB,VOL=SMPE01,NEWN=SYS2.PARMLIB
 SELECT   DSN=SYS1.UADS,VOL=SYSMCT
 SELECT   DSN=SYS1.VTAMLST,VOL=SYSMCT
 SELECT   DSN=SYS2.PROCLIB,VOL=SYSMCT
 SELECT   DSN=SYS3.VTAMLIB,VOL=SYSMCT,NEWN=SYS2.VTAMLIB
/*
//*----------------------------------------------------------------
//IPLTEXT6 EXEC PGM=ICKDSF,REGION=4096K
//SYSPRINT DD  SYSOUT=*
//IPLTEXT  DD  DISP=SHR,VOL=SER=SYS1PK,UNIT=SYSDA,
//             DSN=SYS1.SAMPLIB(IPLRECS)
//         DD  DISP=SHR,VOL=SER=SYS1PK,UNIT=SYSDA,
//             DSN=SYS1.SAMPLIB(IEAIPL00)
//SYSIN    DD  *
   REFORMAT  DDNAME(IPLTEXT)                                     -
             IPLDD(IPLTEXT)                                      -
             NOVERIFY                                            -
             BOOTSTRAP   /* IPLRECS OF IPLTEXT DD WILL SUPPLY IT */
/*
//*----------------------------------------------------------------
//ALLOC7   EXEC  PGM=IEFBR14
//LOGREC   DD  DISP=(NEW,KEEP),DSN=SYS3.LOGREC,
//             VOL=SER=SYS1PK,UNIT=SYSDA,
//             SPACE=(CYL,1)
//BRODCAST DD  DISP=(NEW,KEEP),DSN=SYS3.BRODCAST,
//             VOL=SER=SYS1PK,UNIT=SYSDA,
//             SPACE=(CYL,2)
//HASPCKPT DD  DISP=(NEW,KEEP),DSN=SYS3.HASPCKPT,
//             VOL=SER=SYS1PK,UNIT=SYSDA,
//             SPACE=(CYL,5)
//HASPACE  DD  DISP=(NEW,KEEP),DSN=SYS3.HASPACE,
//             VOL=SER=SYS1PK,UNIT=SYSDA,
//             SPACE=(CYL,75)
//DUMP00   DD  DISP=(NEW,KEEP),DSN=SYS3.DUMP00,
//             VOL=SER=SYS1PK,UNIT=SYSDA,
//             SPACE=(CYL,1),
//*            DCB=(RECFM=F,LRECL=4104,BLKSIZE=4104)
//             DCB=(RECFM=F,LRECL=4160,BLKSIZE=4160)
//*---------------------------------------------------------------
//RENAME8  EXEC  PGM=IEHPROGM
//SYSPRINT DD  SYSOUT=*
//SYS1PK   DD  DISP=OLD,VOL=SER=SYS1PK,UNIT=SYSDA
//SYSIN    DD  *
 RENAME VOL=SYSDA=SYS1PK,DSNAME=SYS3.LOGREC,                           X
               NEWNAME=SYS1.LOGREC
 RENAME VOL=SYSDA=SYS1PK,DSNAME=SYS3.BRODCAST,                         X
               NEWNAME=SYS1.BRODCAST
 RENAME VOL=SYSDA=SYS1PK,DSNAME=SYS3.HASPCKPT,                         X
               NEWNAME=SYS1.HASPCKPT
 RENAME VOL=SYSDA=SYS1PK,DSNAME=SYS3.HASPACE,                          X
               NEWNAME=SYS1.HASPACE
 RENAME VOL=SYSDA=SYS1PK,DSNAME=SYS3.DUMP00,                           X
               NEWNAME=SYS1.DUMP00
//*-----------------------------------------------------------------
//CATLG9    EXEC  PGM=IDCAMS,REGION=4096K
//STEPCAT   DD    DISP=SHR,DSN=SYS1.MCAT.VSYS1PK
//SYSPRINT  DD    SYSOUT=*
//SYSIN     DD    *
 DEF NVSAM(NAME(SYS1.LOGREC)   VOL(SYS1PK) DEVT(3380))
 DEF NVSAM(NAME(SYS1.BRODCAST) VOL(SYS1PK) DEVT(3380))
 DEF NVSAM(NAME(SYS1.HASPACE)  VOL(SYS1PK) DEVT(3380))
 DEF NVSAM(NAME(SYS1.HASPCKPT) VOL(SYS1PK) DEVT(3380))
 DEF NVSAM(NAME(SYS1.DUMP00)   VOL(SYS1PK) DEVT(3380))
//*----------------------------------------------------------------
//LOGREC10  EXEC  PGM=IFCDIP00
//SERERDS   DD DISP=SHR,DSN=SYS1.LOGREC,
//             VOL=SER=SYS1PK,UNIT=SYSDA
//*-----------------------------------------------------------------
//CATPTR11 EXEC PGM=IEBDG,REGION=4096K
//*
//* DOC: THE PURPOSE OF THIS STEP IS TO REPLACE MEMBER 'SYSCATLG'
//*      IN DATA SET 'SYS1.NUCLEUS' TO FACILITATE THE USE OF AN
//*      EXISTING ICF MASTER CATALOG WITH A NEWLY CREATED
//*      IPL VOLUME.
//*
//*  *****  (YOU CAN SKIP THIS STEP IF USING LOADXX)
//*
//* NOTE: THE FORMAT OF SYSCATLG IN SYS1.NUCLEUS HAS CHANGED FOR
//*       MVS/DFP VERSION 3. THE NEW FORMAT OF SYSCATLG IS:
//*       VVVVVVTALLNNNNNN.....
//*       VVVVVV    = VOLSER
//*       T         = CATALOG TYPE
//*                   1 = ICF CATALOG
//*                   2 = ICF CATALOG WITH SYS% TO SYS1 CONVERSION
//*                       ACTIVE
//*       A         = NUMBER OF MLA ALIAS LEVELS (1-4)
//*                   DEFAULT IS 1
//*       LL        = CAS SERVICE TASK LOWER LIMIT
//*                   DEFAULT=X'3C', MINIMUM=X'18', MAXIMUM=X'C8'
//*       NNNNNN... = CATALOG NAME (UP TO 44 CHARACTERS)
//*
//*
//SYSPRINT DD  SYSOUT=*
//NUCLEUS  DD  DSN=SYS1.NUCLEUS(SYSCATLG),
//             UNIT=SYSDA,VOL=SER=SYS1PK,    <----VERIFY/CHANGE
//             DISP=OLD                    UNIT AND VOLSER OF IPL PACK
//SYSIN    DD  *
  DSD OUTPUT=(NUCLEUS)
  FD NAME=VOL,
     LENGTH=06,
     STARTLOC=01,
     FILL=X'40',
     PICTURE=6,'SYS1PK' <----- VERIFY/CHANGE VOLSER OF CATALOG
  FD NAME=CATTYPE,
     LENGTH=01,
     STARTLOC=07,
     FILL=X'F1'    <----- ICF CATALOG
  FD NAME=ALIAS,
     LENGTH=01,
     STARTLOC=08,
     FILL=X'F1'    <-----NUMBER OF MLA ALIAS LEVELS (DEFAULT=1)
  FD NAME=CASLL,
     LENGTH=02,
     STARTLOC=09,
     FILL=X'40',
     PICTURE=2,'3C' <----CAS SERVICE TASK LOWER LIMIT (DEFAULT=60)
  FD NAME=CAT,
     LENGTH=44,
     STARTLOC=11,
     FILL=X'40',
     PICTURE=44,'SYS1.MCAT.VSYS1PK                            '
  FD NAME=FIL,
     LENGTH=26,
     STARTLOC=55,
     FILL=X'40'
  CREATE QUANTITY=1,FILL=X'00',NAME=(VOL,CATTYPE,ALIAS,CASLL,CAT,FIL)
/*
//*
//* COMPRESS SYS1.PARMLIB ON SYS1PK
//*
//COMP12     EXEC PGM=IEBCOPY
//SYSPRINT DD  SYSOUT=*
//IN1      DD  DISP=SHR,DSN=SYS1.PARMLIB,
//             UNIT=SYSDA,VOL=SER=SYS1PK
//SYSUT3   DD  UNIT=SYSDA,SPACE=(CYL,(10,5))
//SYSUT4   DD  UNIT=SYSDA,SPACE=(CYL,(10,5))
//SYSIN    DD  *
  COPY INDD=IN1,OUTDD=IN1,LIST=NO
/*
//*
//* UPDATE PROCLIB, PARMLIB, AND VTAMLST MEMBERS
//*
//UPDATE13 EXEC PGM=IEBCOPY
//SYSPRINT DD  SYSOUT=*
//SYSUT3   DD  SPACE=(CYL,1),UNIT=SYSDA
//SYSUT4   DD  SPACE=(CYL,1),UNIT=SYSDA
//IN1      DD  DSN=SYS3.ONEPAK.CNTL,DISP=SHR
//OUT1     DD  DSN=SYS2.PROCLIB,DISP=SHR,
//             UNIT=SYSDA,VOL=SER=SYS1PK
//IN2      DD  DSN=SYS3.ONEPAK.CNTL,DISP=SHR
//OUT2     DD  DSN=SYS1.PROCLIB,DISP=SHR,
//             UNIT=SYSDA,VOL=SER=SYS1PK
//IN3      DD  DSN=SYS3.ONEPAK.CNTL,DISP=SHR
//OUT3     DD  DSN=SYS1.PARMLIB,DISP=SHR,
//             UNIT=SYSDA,VOL=SER=SYS1PK
//IN4      DD  DSN=SYS3.ONEPAK.CNTL,DISP=SHR
//OUT4     DD  DSN=SYS1.VTAMLST,DISP=SHR,
//             UNIT=SYSDA,VOL=SER=SYS1PK
//SYSIN    DD  *
  COPY   I=((IN1,R)),O=OUT1
  SELECT MEMBER=IKJACCNT
  SELECT MEMBER=TSOPROC
  SELECT MEMBER=SOFTPROC
  COPY   I=((IN2,R)),O=OUT2
  SELECT MEMBER=JES2
  SELECT MEMBER=NET
  SELECT MEMBER=TSO
  COPY   I=((IN3,R)),O=OUT3
  SELECT MEMBER=COMMND00
  SELECT MEMBER=CONSOL00
  SELECT MEMBER=IEAAPF00
  SELECT MEMBER=IEAFIX00
  SELECT MEMBER=IEALPA00
  SELECT MEMBER=IEASVC00
  SELECT MEMBER=IEASYS00
  SELECT MEMBER=IECIOS00
  SELECT MEMBER=IEFSSN00
  SELECT MEMBER=JES2PARM
  SELECT MEMBER=LNKLST00
  SELECT MEMBER=LOAD00
  SELECT MEMBER=LPALST00
  SELECT MEMBER=SMFPRM00
  SELECT MEMBER=MPFLST00
  SELECT MEMBER=TSOKEY00
  SELECT MEMBER=VATLST00
  COPY   I=((IN4,R)),O=OUT4
  SELECT MEMBER=APTSO
  SELECT MEMBER=ATCCON00
  SELECT MEMBER=ATCSTR00
  SELECT MEMBER=LCL3270A
/*
//*
//LIST14 EXEC  PGM=IDCAMS
//STEPCAT  DD  DSN=SYS1.MCAT.VSYS1PK,DISP=SHR
//SYSPRINT DD  SYSOUT=*
//SYSUDUMP DD  SYSOUT=*
//SYSIN    DD  *
     LISTC CATALOG(SYS1.MCAT.VSYS1PK) ALL
/*
