* % GOTO TIOTBSL;   /*
*
*  THIS IS A COPY OF THE PUBLIC DOMAIN MVT MACRO WHICH HAS
*  BEEN AMENDED TO MAKE THE 2 DSECTS EXPLICIT AND THEREFORE
*  EASIER TO USE.
*
         MACRO
         JRGTIOT
*
*    RELEASE 20, 3/04/71, LEVEL=1
*    RELEASE 21, 3/05/71, LEVEL=1
*
TIOT1    DSECT
TIOCNJOB DS    CL8  -       JOBNAME
TIOCSTEP DS    CL16 -       STEPNAME
***********************************************************************
**             **
*   DD ENTRY:             *
*              *
* A DD ENTRY INCLUDES A DEVICE ENTRY. BEFORE ALLOCATION, THERE  *
* MAY BE SEVERAL DEVICE ENTRIES IN EACH DD ENTRY.        *
**             **
***********************************************************************
TIOENTRY EQU   *
TIOENTRYD DSECT
TIOELNGH DS    FL1 -        LENGTH OF THIS ENTRY
TIOESTTA DS    B -        STATUS -A-
TIOSLTYP EQU   X'80' -        NONSTANDARD LABEL (NOTE 1)
TIOSPLTP EQU   X'40' -        SPLIT CYLINDER PRIMARY
TIOSPLTS EQU   X'20' -        SPLIT CYLINDER SECONDARY
TIOSJBLB EQU   X'10' -        JOBLIB INDICATOR
TIOSDADS EQU   X'08' -        DADSM ALLOCATION NECESSRY
TIOSLABL EQU   X'04' -        LABELED/UNLABELED (NOTE 1)
TIOSDSP1 EQU   X'02' -        DISPOSITION BIT 1
TIOSDSP2 EQU   X'01' -        DISPOSITION BIT 2
*
*   NOTE 1 - IF BOTH BITS TIOSLTYP AND TIOSLABL ARE ON, THE VOLUME
*      IS A TAPE AND HAS AN 'ANSI' LABEL.
*
TIOERLOC DS    0CL2 -        REL. LOC OF POOL
TIOEWTCT DS    CL1 -        COUNT OF NUMBER OF DEVICES
*        DURING ALLOCATION STILL ELIGIBLE TO DADSM ALLOCATE
*        THIS DATA SETS REQUEST
TIOELINK DS    CL1 -        DURING ALLOCATION OF ALL
*        BUT POOLS THIS WILL BE A LINK TO THE APPROPRIATE PRIME
*        SPLIT,UNIT AFFIM,VOL AFFIN OR SUBALLOCATE
  SPACE 1
* FOLLOWING BIT MASKS APPLY TO THE 'TIOELINK' FIELD
  SPACE 1
TIOSYOUT EQU   X'80' - SYSOUT DATA SET THAT CONTAINS DATA
TIOTOPEN EQU   X'40' - DATA SET IS OPEN
TIOTTERM EQU   X'20' - THIS IS A TERMINAL
TIOEDYNM EQU   X'10' - 'DYNAM' KEYWORD USED
TIOEQNAM EQU   X'08' - 'QNAME' KEYWORD USED
TIOESYIN EQU   X'04' -  SYSIN
TIOESYOT EQU   X'02' -  SYSOUT
TIOESSDS EQU   X'02' -        ENTRY FOR A SUBSYSTEM DATA SET*
*
TIOEDDNM DS    CL8 -        DDNAME
TIOEJFCB DS    CL3 -        JFCB DISK ADDR
TIOESTTC DS    B -        STATUS -C-
TIOSDKCR EQU   X'80' -        CORE/DISK ADDRESS
TIOSDEFR EQU   X'40' -        DEFERRED MOUNT
TIOSAFFP EQU   X'20' -        UNIT AFFINITY PRIMARY
TIOSAFFS EQU   X'10' -        UNIT AFFINITY SECONDARY
TIOSVOLP EQU   X'08' -        VOLUME AFFINITY PRIMARY
TIOSVOLS EQU   X'04' -        VOLUME AFFINITY SECONDARY
TIOSBALP EQU   X'02' -        SUBALLOCATE PRIMARY
TIOSBALS EQU   X'01' -        SUBALLOCATE SECONDARY
***********************************************************************
**             **
*   DEVICE ENTRIES:            *
*              *
*      1. DURING ALLOCATION:           *
*   ONE DEVICE ENTRY FOR EACH DEVICE REQUIRED, OR FOR    *
*   EACH PUBLIC DEVICE ELIGIBLE.         *
*              *
*      2. DURING PROBLEM PROGRAM:          *
*   ONE DEVICE ENTRY FOR EACH ALLOCATED DEVICE       *
*              *
***********************************************************************
TIOESTTB DS    B -        STATUS -B-
TIOSUSED EQU   X'80' -        DATA SET IS ON DEVICE
TIOSREQD EQU   X'40' -        DATA SET WILL USE DEVICE
TIOSPVIO EQU   X'20' -        DEVICE VIOLATES SEPARATION
TIOSVLSR EQU   X'10' -        VOLUME SERIAL PRESENT
TIOSSETU EQU   X'08' -        SETUP MESSAGE REQUIRED
TIOSMNTD EQU   X'04' -        MOUNTED
TIOSUNLD EQU   X'02' -        UNLOAD REQUIRED
TIOSVERF EQU   X'01' -        VERIFICATION REQUIRED
TIOEFSRT DS    AL3 -        SRT POINTER
*  TIOT POOL ENTRY
POOLSTAR EQU   *
  DS    CL1 -
TIOPNSLT DS    FL1 -        NR.OF SLOTS FOR POOL
  DS    CL1 -
TIOPNSRT DS    FL1 -        NR.OF DEVICES (FILLED
*           SLOTS)
TIOPPOOL DS    CL8 -        POOL NAME
TIOPSTTB DS    XL1 -        STATUS OF SLOT
TIOPSLOT DS    AL3 -        SRT ADDRESS OR EMPTY SLOT
TIOTFEND DS    CL4 -        FINAL END OF AN ENTRY
*           OR THE TIOT
  MEND
* */ %TIOTBSL:;
*
* /* RELEASE 20, 3/04/71, LEVEL=1         */
* /* RELEASE 21, 3/05/71, LEVEL=1         */
*
* DECLARE
* 1 TIOT1 BASED(TIOTPTR) BDY(WORD),
*     5 TIOCNJOB CHAR(8),  /*  JOB NAME       */
*     5 TIOCSTEP CHAR(16);  /*  STEP NAME       */
*/********************************************************************/
*/*             */
*/* DD ENTRY:            */
*/*             */
*/* A DD ENTRY INCLUDES A DEVICE ENTRY. BEFORE ALLOCATION, THERE */
*/* MAY BE SEVERAL DEVICE ENTRIES IN EACH DD ENTRY.       */
*/*             */
*/********************************************************************/
*%IF TIOENPTR=''  %THEN
*%TIOENPTR='ADDR(TIOT1)+24';
* DECLARE
*     1 TIOENTRY   BASED(TIOENPTR),
*    10 TIOELNGH PTR(8),  /* LENGTH OF THIS ENTRY      */
*    10 TIOESTTA BIT(8),  /* STATUS -A-       */
*      11 TIOSLTYP BIT(1), /* NONSTANDARD LABEL (NOTE 1)*/
*      11 TIOSPLTP BIT(1), /* SPLIT CYLINDER PRIMARY    */
*      11 TIOSPLTS BIT(1), /* SPLIT CYLINDER SECONDARY  */
*      11 TIOSJBLB BIT(1), /* JOBLIB INDICATOR      */
*      11 TIOSDADS BIT(1), /* DADSM ALLOCATION NECESSARY*/
*      11 TIOSLABL BIT(1), /* LABELED/UNLABELED (NOTE 1)*/
*      11 TIOSDSP1 BIT(1), /* DISPOSITION BIT 1      */
*      11 TIOSDSP2 BIT(1), /* DISPOSITION BIT 2      */
*/*   NOTE 1 - IF BOTH BITS TIOSLTYP AND TIOSLABL ARE ON, THE VOLUME */
*/*        IS A TAPE AND HAS AN 'ANSI' LABEL.       */
*    10 TIOERLOC CHAR(2),  /* REL. LOC OF POOL      */
*    15 TIOEWTCT CHAR(1), /* COUNT OF NUMBER OF DEVICES
*        DURING ALLOCATION STILL
*        ELIGIBLE TO DADSM ALLOCATE
*        THIS DATA SET REQUEST     */
*    15 TIOELINK CHAR(1), /* DURING ALLOCATION OF
*        ALL BUT POOLS THIS WILL BE
*        A LINK TO THE APPROPRIATE
*        PRIME SPLIT,UNIT AFFIN
*        VOL.,AFFIN OR SUBALLOCATE */
*/* FOLLOWING BIT MASKS APPLY TO 'TIOELINK' FIELD */
*       17 TIOSYOUT BIT(1), /* SYSOUT D.S.THAT HAS DATA */
*       17 TIOTOPEN BIT(1), /* DATA SET IS OPEN      */
*       17 TIOTTERM BIT(1), /* THIS IS A TERMINAL      */
*       17 TIOEDYNM BIT(1), /* 'DYNAM' KEYWORD USED     */
*       17 TIOEQNAM BIT(1), /* 'QNAME' KEYWORD USED     */
*       17 * BIT(3),  /* RESERVED */
*    10 TIOEDDNM CHAR(8),  /* DDNAME       */
*    10 TIOEJFCB CHAR(3),  /* JFCB DISK ADDR      */
*    10 TIOESTTC BIT(8),  /* STATUS -C-       */
*     11 TIOSDKCR BIT(1),  /* CORE/DISK ADDRESS      */
*     11 TIOSDEFR BIT(1),  /* DEFERRED MOUNT      */
*     11 TIOSAFFP BIT(1),  /* UNIT AFFINITY PRIMARY     */
*     11 TIOSAFFS BIT(1),  /* UNIT AFFINITY SECONDARY   */
*     11 TIOSVOLP BIT(1),  /* VOLUME AFFINITY PRIMARY   */
*     11 TIOSVOLS BIT(1),  /* VOLUME AFFINITY SECONDARY */
*     11 TIOSBALP BIT(1),  /* SUBALLOCATE PRIMARY      */
*     11 TIOSBALS BIT(1),  /* SUBALLOCATE SECONDARY     */
*/********************************************************************/
*/*             */
*/* DEVICE ENTRIES:           */
*/*             */
*/*    1. DURING ALLOCATION:          */
*/*   ONE DEVICE ENTRY FOR EACH DEVICE REQUIRED, OR FOR   */
*/*   EACH PUBLIC DEVICE ELIGIBLE.        */
*/*             */
*/*    2. DURING PROBLEM PROGRAM:         */
*/*   ONE DEVICE ENTRY FOR EACH ALLOCATED DEVICE      */
*/*             */
*/********************************************************************/
*    10 TIOESTTB BIT(8),  /* STATUS -B-       */
*     11 TIOSUSED BIT(1),  /* DATA SET IS ON DEVICE     */
*     11 TIOSREQD BIT(1),  /* DATA SET WILL USE DEVICE  */
*     11 TIOSPVIO BIT(1),  /* DEVICE VIOLATES SEPARATION*/
*     11 TIOSVLSR BIT(1),  /* VOLUME SERIAL PRESENT     */
*     11 TIOSSETU BIT(1),  /* SETUP MESSAGE REQUIRED    */
*     11 TIOSMNTD BIT(1),  /* MOUNTED       */
*     11 TIOSUNLD BIT(1),  /* UNLOAD REQUIRED      */
*     11 TIOSVERF BIT(1),  /* VERIFICATION REQUIRED     */
*    10 TIOEFSRT PTR(24), /* SRT POINTER       */
*/********************************************************************/
*/*             */
*/*        TIOT POOL ENTRY          */
*/*             */
*/********************************************************************/
*     5 POOLSTAR,
*    10 *    CHAR(1),
*    10 TIOPNSLT PTR(8),        /*  NR. OF SLOTS FOR POOL     */
*    10 *    CHAR(1),
*    10 TIOPNSRT PTR(8),        /*  NR. OF DEVICES (FILLED
*          SLOTS)       */
*    10 TIOPPOOL CHAR(8),  /* POOL NAME       */
*    10 TIOPSTTB CHAR(1),  /* STATUS OF SLOT      */
*    10 TIOPSLOT PTR(24),  /* SRT ADDRESS OF EMPTY SLOT */
*    10 TIOTFEND CHAR(4);  /* FINAL END OF AN ENTRY OR
*        THE TIOT       */
