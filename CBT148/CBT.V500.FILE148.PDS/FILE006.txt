./       ADD   NAME=JOBCARD
)SEL &SCUFREGN = &Z
)SET SCUFREGN = 2M
)ENDSEL
//&ZUSER.&JOBCHAR   JOB (&SCUPAPPL,D,C,&SCUPROOM,,,&SCUPWKNO),'&SCUPLNA?
M',CLASS=&SCUPJOBC,
//            MSGCLASS=&SCUPMSGC,NOTIFY=&ZUSER,REGION=&SCUFREGN
)SEL &SCUPLPI ¬= &Z  && &SCUPCHAR ¬= &Z
//PRINT   OUTPUT DEFAULT=YES,FCB=&SCUPLPI,CHARS=&SCUPCHAR
)ENDSEL
)SEL &SCUPAPPL = &Z | &SCUPROOM = &Z | &SCUPJOBC = &Z | &SCUPMSGC = &Z
//* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
//*                                                                   *
//*   WARNING  WARNING  WARNING  WARNING  WARNING  WARNING  WARNING   *
//*                                                                   *
//*  THIS JCL REQUIRES JOB CARD PARAMETERS WHICH MAY BE SPECIFIED IN  *
//*  THE COMMAND 'GENPARMS'.  AFTER SPECIFYING THESE PARMS (SUCH AS   *
//*  MSGCLASS, ROOM NUMBER, ETC.), THEY WILL BE STORED IN YOUR ISPF   *
//*  PROFILE FOR FUTURE REFERENCE.  YOU WILL NOT NEED TO EXECUTE      *
//*  'GENPARMS' AGAIN UNLESS YOU WISH TO CHANGE THE DEFAULTS YOU      *
//*  HAVE SET.                                                        *
//* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
)ENDSEL
./       ADD   NAME=PANALLOC
)IM JOBCARD
//JOBLIB    DD DSN=SYS2.PANVALET.LOADLIB,DISP=SHR
//STEP010  EXEC PGM=PAN#1
//SYSIN     DD *
)SEL &PANCNTL ¬= &Z
++CONTROL &PANCNTL
)ENDSEL
++ALLOCATE &PSPRSTNM,&PANTYPE,NOFORMAT
//PANDD1    DD DSN=&PDS1,DISP=SHR
//SYSPRINT  DD SYSOUT=*
./       ADD   NAME=PANCREAT
)IM JOBCARD
//JOBLIB    DD DSN=SYS2.PANVALET.LOADLIB,DISP=SHR
//STEP010  EXEC PGM=PAN#4
//SYSIN     DD *
++CLEAR RECORDS=14
//PANDD1    DD DSN=&PDS1,DISP=(,CATLG,DELETE),
//             UNIT=TEST,SPACE=(CYL,&PANSPACE),
//             DCB=(RECFM=F,BLKSIZE=5492,DSORG=DA)
//SYSPRINT  DD SYSOUT=*
./       ADD   NAME=PANPDS
)SEL &POPT = BATCH
)IM JOBCARD
//PAN      EXEC PGM=PAN#1
//STEPLIB   DD DSN=SYS2.PANVALET.LOADLIB,DISP=SHR
//PANPDS    DD DSN=&PDS1,
//             DISP=SHR
//PANDD1    DD DSN=&PDS2,DISP=SHR
//SYSPRINT  DD SYSOUT=*
//SYSPUNCH  DD DUMMY
//SYSIN     DD *
)ENDSEL

)SEL &SINGLE = Y
++OPTION INPUT,PANPDS,&PANSMEM
)SEL &PANCNTL ¬= &Z
++CONTROL &PANCNTL
)ENDSEL
++ADD &PANSMEM.&PANCPYL,&PANFORMT,NOFORMAT
)ENDSEL

)CM  'ALLMEMS = P' MEANS ONLY SOME OF THE MEMBERS ARE BEING COPIED,
)CM     BUT ALL MEMBERS TO BE COPIED ARE IN THE TABLE.

)SEL &ALLMEMS = Y | &ALLMEMS = P
)DOT MEMLIST
++OPTION INPUT,PANPDS,&PANTMEM
)SEL &PANCNTL ¬= &Z
++CONTROL &PANCNTL
)ENDSEL
++ADD &PANTMEM.&PANCPYL,&PANFORMT,NOFORMAT
)ENDDOT
)ENDSEL
./       ADD   NAME=PANSCAN
)IM JOBCARD
//JOBLIB    DD DSN=SYS2.PANVALET.LOADLIB,DISP=SHR
//STEP010  EXEC PGM=PAN#8
//SYSIN     DD *
)SEL &PANCNTL NE &Z
++CONTROL &PANCNTL
)ENDSEL
++SCAN *,'&PANSCAN'
//PANDD1    DD DSN=&PDS1,DISP=SHR
//SYSPRINT  DD SYSOUT=*
./       ADD   NAME=PANTOPAN
)TB 72

)SEL &PANREPL EQ YES
)SET REPLACE = R
)ENDSEL

)SEL &PANREPL EQ NO
)SET REPLACE = &Z
)ENDSEL


)SEL &POPT = BATCH
)IM JOBCARD
//JOBLIB    DD DSN=SYS2.PANVALET.LOADLIB,DISP=SHR
//STEP010  EXEC PGM=PAN#2
//SYSPRINT  DD SYSOUT=*
//SYSPUNCH  DD DUMMY
//SYSUDUMP  DD SYSOUT=D,HOLD=YES
//PANDD1    DD DSN=&PDS1,DISP=SHR
//PANDD2    DD DSN=&PDS2,DISP=SHR
//SYSIN     DD *
)ENDSEL

)SEL &PANCNTL NE &Z
++CONTROL &PANCNTL
)ENDSEL

)SEL &PANCNTLA NE &Z
++CONTROL &PANCNTLA !A
)ENDSEL

++OPTION OUTPUT

)SEL &PANSMEM NE &Z && &PANEMEM NE &Z
++TRANSFER &PANSMEM,&PANEMEM !&REPLACE
)ENDSEL

)SEL &PANSMEM NE &Z && &PANEMEM EQ &Z
++TRANSFER &PANSMEM !&REPLACE
)ENDSEL

)SEL &PANSMEM EQ &Z && &PANEMEM EQ &Z
)CM           ****     DO TABLE        ****
)CM           ****     DO TABLE        ****
)DOT PANUTIL

)SEL &TSELECT = S
++TRANSFER &PANMEM !&REPLACE
)SET PANACTN = '*GENERATED'
)ENDSEL

)ENDDOT
)CM           ****    END DO TABLE     ****
)CM           ****    END DO TABLE     ****
)ENDSEL
./       ADD   NAME=PANTOPDS
)TB 72

)SEL &POPT = BATCH
)IM JOBCARD
//JOBLIB    DD DSN=SYS2.PANVALET.LOADLIB,DISP=SHR
//STEP010  EXEC PGM=PAN#1
//SYSPRINT  DD SYSOUT=*
//SYSPUNCH  DD DUMMY
//SYSUDUMP  DD SYSOUT=D,HOLD=YES
//PANDD1    DD DSN=&PDS1,DISP=SHR
//PANTOPDS  DD DSN=&PDS2,DISP=SHR
//SYSIN     DD *
)ENDSEL

)SEL &PANCNTL NE &Z
++CONTROL &PANCNTL
)ENDSEL

++OPTION OUTPUT,PANTOPDS

)SEL &PANSMEM EQ '*'
++WRITE WORK,*
)ENDSEL

)SEL &PANSMEM EQ &Z && &PANKEY NE &Z
++WRITE WORK,PREFIX=&PANKEY
)ENDSEL

)SEL &PANSMEM NE &Z && &PANKEY EQ &Z
)SEL &PANSMEM NE PROD* && &PANSMEM NE TEST*
++WRITE WORK,&PANSMEM
)ENDSEL
)ENDSEL

)SEL &PANSMEM EQ &Z
)CM           ****     DO TABLE        ****
)CM           ****     DO TABLE        ****
)DOT PANUTIL

)SEL &TSELECT = S
++WRITE WORK,&PANMEM
)ENDSEL

)ENDDOT
)CM           ****    END DO TABLE     ****
)CM           ****    END DO TABLE     ****
)ENDSEL


)CM    *****    PROCESS ALL PRODUCTION OR TEST MEMBERS  ******
)CM    *****    PROCESS ALL PRODUCTION OR TEST MEMBERS  ******
)SEL &PANSMEM EQ PROD*
)CM           ****     DO TABLE        ****
)CM           ****     DO TABLE        ****
)DOT PANUTIL

)SEL &PANSTAT = PAE
++WRITE WORK,&PANMEM
)ENDSEL

)ENDDOT
)CM           ****    END DO TABLE     ****
)CM           ****    END DO TABLE     ****
)ENDSEL

)SEL &PANSMEM EQ TEST*
)CM           ****     DO TABLE        ****
)CM           ****     DO TABLE        ****
)DOT PANUTIL

)SEL &PANSTAT = TAE
++WRITE WORK,&PANMEM
)ENDSEL

)ENDDOT
)CM           ****    END DO TABLE     ****
)CM           ****    END DO TABLE     ****
)ENDSEL
