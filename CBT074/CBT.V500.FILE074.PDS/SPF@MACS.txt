1
 EACH SPF DIALOG MANAGER CONTAINS A BASIC SET OF CODE THAT IS COMMON
 TO ALL DIALOG MANAGERS. THESE FUNCTIONS HAVE BEEN CREATED IN A SERIES
 OF MACROS TO MAKE WRITING DIALOG MANAGERS EASIER. THE FUNCTIONS ARE -

 SPFALLOC   DYNAMIC ALLOCATION.
 SPFBRWSE   INVOKE BROWSE FOR A DATA SET.
 SPFCMDS    DEFINE VARIOUS CONSTANTS AND WORK AREAS USED BY THE SPF
            INTERFACE ROUTINE.
 SPFCRP     RETREIVES THE CURRENT ROW POINTER
 SPFDEQ     DEQ SPF RESOURCES
 SPFDS      TAKE A DSN FROM THE SCREEN AND EITHER REMOVE THE QUOTES
            OR ADD THE USER-PREFIX AND ISOLATE AN OPTIONAL MEMBER
            NAME. OPTIONALLY IT WILL VERIFY THE EXISTENCE OF THE
            DATA SET BY OBTAINING THE FORMAT 1 DSCB, AND FOR A PDS
            WITH A MEMBER SPECIFIED, A BLDL WILL BE PERFORMED.
 SPFEDIT    INVOKE EDIT FOR A DATA SET.
 SPFENQ     ENQ SPF RESOURCES
 SPFEXIT    STANDARD RETURN LINKAGE.
 SPFINIT    STD LINKAGE, VDEFINE AND VGET FOR ALL 'Z' VARIABLES.
 SPFJOBNM   UPDATE THE LAST CHARACTER OF THE JOBNAME ON A JOBCARD.
 SPFLOC     CAMLST LOCATE.
 SPFOBT     CAMLST OBTAIN.
 SPFRJUST   RIGHT JUSTIFY A FIELD.
 SPFROW     RETREIVE THE ZTDTOP VARIABLE
 SPFSARG    INVOKE TBSARG FOR DATA ON THE ZCMD LINE
 SPFSPLAY   DISPLAY A PANEL.
 SPFSUB     SUBMIT A BATCH JOB.
 SPFTAILR   FILE TAILOR WITH OPTIONAL SUBMIT AND JOBNAME UPDATE.
 SPFTBCR    TABLE CREATE.
 SPFTBDIS   TABLE DISPLAY.
 SPFTBL#    GENERATE AN 8 CHAR TABLE NAME.
 SPFTBLOC   LOCATE A KEY FIELD BASED ON ZCMD DATA.
 SPFTBLRS   RESET THE CURRENT ROW POINTER.
 SPFTCNT1   DISPLAY 'TABLE CREATE IN PROCESS'
 SPFTCNT2   DISPLAY 'TABLE CREATE IN PROCESS'
 SPFTEMP    BUILD A DATA SET NAME FROM ZTEMPF CHANGING THE LAST QUAL.
 SPFVCOPY   COPY VARIABLES.
 SPFVDEF    DEFINE VARIABLES TO SPF.
 SPFVDEL    DEELETE VARIABLES.
 SPFVGET    GET VARIABLES FROM THE SHARED OR PROFILE POOL.
 SPFVPUT    PUT VARIABLES TO THE SHARED OR PROFILE POOL.
 SPFVREPL   REPLACE VARIABLES.

 NOTE: SOME OF THE SPF MACROS USE REGISTERS R2 THROUGH R5, THESE
       REGISTERS ARE SAVED AND RESTORED BY THE MACROS, HOWEVER, THIS
       MEANS THEY CANNOT BE BASE REGISTERS. I SUGGEST THAT YOU START
       WITH R12 AS YOUR BASE REGISTER, AND THEN USE R11, R10, ETC. IF
       YOU NEED SEVERAL BASE REGS.

       SOME OF THE SPF MACROS ALSO USE THE TRT INSTRUCTION, WHICH
       CORRUPTS R2. THIS REGISTER IS NOT ALWAYS SAVED AND RESTORED,
       THEREFORE YOU SHOULD NOT DEPEND ON ITS CONTENTS UNLESS YOU SAVE
       AND RESTORE IT YOURSELF.

1
 -----------------------------------------------------------------------

                              SPFALLOC

 -----------------------------------------------------------------------

   SYNTAX -  ALLOCATION

   (LABEL)  SPFALLOC A,DD= ,DSN= , MBR= ,DISP= ,SPACE= , VOL= , UNIT= ,
                   RECFM= ,BLKSIZE= ,LRECL= ,SYSOUT= , COPIES= , FCB= ,
                   DEST= ,FREE= ,TERM= ,DUMMY= , RETDD= ,MODEL= ,
                   RLSE= ,

   ------

   SYNTAX -  UN-ALLOCATION

   (LABEL)  SPFALLOC U,DD= ,DSN=

   ------

   SYNTAX -  CONCATENATION

   (LABEL)  SPFALLOC C,CCDD=

   ------

   SYNTAX -  DE-CONCATENATION             (@MK)

   (LABEL)  SPFALLOC D,DD=


   THE FIRST PARAMETER IN THE MACRO IS A POSITIONAL PARAMETER INDICATING
   THE FUNCTION TO BE PERFORMED -
       A - ALLOCATION
       U - UN-ALLOCATION
       C - CONCATENATION
       D - DE-CONCATENATION (FUTURE)

   THE REST OF THE PARAMETERS ARE ALL KEYWORD PARAMETERS AND MAY APPEAR
   IN ANY ORDER. THESE PARAMETERS MAY BE LITERALS, ENCLOSED IN QUOTES,
   OR FIELD NAMES, NOT ENCLOSED IN QUOTES.

   NOTE: *** ALL FIELD NAMES MUST HAVE AN IMPLICIT LENGTH WHEN DEFINED.

   KEYWORD PARAMETERS -

   DD       - THE DDNAME
              LITERAL - 1 TO 8 CHARACTERS
              FIELD   - 1 TO 8 CHARACTERS

              DD='SYSUT1'
              DD=DDNAME             DDNAME   DC   CL7'SYSUT1'

1




   DSN      - THE DATA SET NAME
              LITERAL - 1 TO 44 CHARACTERS
              FIELD   - 1 TO 44 CHARACTERS
              REG     - 44 CHARACTERS

              DSN='USER-ID.Z.DATA'
              DSN=DSNAME             DSNAME   DC   CL24'USER-ID.Z.DATA'
              DSN=(R8)

   MBR      - THE MEMBER NAME
              LITERAL - 1 TO 8 CHARACTERS
              FIELD   - 1 TO 8 CHARACTERS
              REG     - 8 CHARACTERS

              MBR='ABC'
              MBR=MEMBER            MEMBER   DC   CL8'ABC'
              MBR=(R7)

   DISP     - THE DISPOSTION OF THE DATA SET
              LITERAL - 3 TO N CHARACTERS
              FIELD   - 3 TO N CHARACTERS

              DISP='(NEW,CATALG,UNCATLG)'
              DISP=DISP             DISP     DC   CL8'SHR'

              THE DISPOSITION FIELD FOLLOWS THE SAME SYNTAX AS JCL,
              IF MORE THAN 1 PARAMETER IS SEPCIFIED, THEY MUST BE
              ENCLOSED IN PARENS. NOTE: THE MACRO WILL NOT HANDLE THE
              OMITTED PARAMETER OF 'NEW', DISP='(,DELETE)', YOU
              MUST SPECIFY DISP='(NEW,DELETE)'

              WHEN DISP IS CODED ON THE SPFALLOC U (UNALLOCATE) IT
              INDICATES THE OVERRIDE DISPOSITION OF THE DATA SET AT
              UNALLOCATION TIME. IT FOLLOWS THE SAME RULES AS ABOVE
              EXCEPT THAT THE FIELD MAY NOT BE CODED IN PARENTHESES
              AND ONLY ONE OVERRIDE DISPOSITION PARAMETER IS ALLOWED.
              THE ALLOWABLE VALUES ARE: OLD, KEEP, CATLG OR UNCATLG.

   SPACE    - THE SPACE FIELD
              LITERAL - 7 TO N CHARACTERS
              FIELD   - 7 TO N CHARACTERS

              SPACE='(6160,(100,10,28),RLSE,CONTIG,ROUND)'
              SPACE=SPACE           SPACE    DC   CL7'(TRK,1)'

              THE SPACE FIELD FOLLOWS THE SAME SYNTAX AS JCL.
              THIS FIELD MAY HAVE OMITTED VALUES SUCH AS:
              SPACE='(6160,(100,,42),,,ROUND)'

   VOL      - THE VOLUME SERIAL NUMBER
              LITERAL - 1 TO 6 CHARACTERS
              FIELD   - 1 TO 6 CHARACTERS

              VOL='STG370'
              VOL=VOLSER            VOLSER   DC   CL6'MVS371'

              THE VOL FIELD ONLY ALLOWS FOR SPECIFICATION OF THE
              SERIAL NUMBER, NO OTHER JCL VOL PARAMETERS ARE VALID.

1




   UNIT     - THE UNIT FIELD
              LITERAL - 1 TO 8 CHARACTERS
              FIELD   - 1 TO 8 CHARACTERS

              UNIT='SYSTEMP'
              UNIT=UNIT             UNIT     DC   CL8'3375'

              ANY VALID UNIT NAME IS ACCEPTABLE.

   RECFM    - THE RECORD FORMAT FIELD OF THE DCB
              LITERAL - 1 TO 3 CHARACTERS
              FIELD   - 1 TO 3 CHARACTERS

              RECFM='FBA'
              RECFM=RECFM           RECFM    DC   CL3'VBS'

              ANY VALID RECORD FORMAT COMBINATION.

   BLKSIZE  - THE BLOCK SIZE FIELD OF THE DCB
              LITERAL - 1 TO 5 CHARACTERS
              FIELD   - HALFWORD

              BLKSIZE='6160'
              BLKSIZE=BLKSZ         BLKSZ    DC   H'6160'

   BUFNO    - THE NUMBER OF BUFFERS TO ASSIGN TO A FILE
              LITERAL - 1 TO 3 CHARACTERS
              FIELD   - 1 BYTE BINARY

              BUFNO='10'
              BUFNO=BUFNO         BUFNO    DC   FL1'10'

   LRECL    - THE LOGICAL RECORD LENGTH FIELD OF THE DCB
              LITERAL - 1 TO 5 CHARACTERS
              FIELD   - HALFWORD

              LRECL='80'
              LRECL=LRECL           LRECL    DC   H'80'

   SYSOUT   - THE SYSOUT FIELD
              LITERAL - 1 TO N CHARACTERS
              FIELD   - 1 TO N CHARACTERS

              SYSOUT='(A,INTRDR)'
              SYSOUT=SYSOUT         SYSOUT   DC   CL20'(F,,973)'

              THE SYSOUT FIELD FOLLOWS THE SAME SYNTAX AS JCL,
              IF MORE THAN 1 PARAMETER IS SPECIFIED, THEY MUST BE
              ENCLOSED IN PARENS. MISSING VALUES ARE PERMITTED.

   COPIES   - THE COPIES FIELD
              LITERAL - 1 TO 3 CHARACTERS
              FIELD   - 1 HEX BYTE

              COPIES='20'
              COPIES=COPYS          COPYS    DC   AL1(35)

              THE MAXIMUM NUMBER OF COPIES IS 255.

1




   FCB      - THE FCB IMAGE FIELD
              LITERAL - 1 TO 4 CHARACTERS
              FIELD   - 1 TO 4 CHARACTERS

              FCB='6'
              FCB=FCB               FCB      DC   CL4'AB'

   DEST     - THE DESTINATION FIELD
              LITERAL - 1 TO 8 CHARACTERS
              FIELD   - 1 TO 8 CHARACTERS

              DEST='R0'
              DEST=DEST             DEST     DC   CL8'R6'

   FREE     - THE FREE=CLOSE FIELD
              LITERAL - 5 CHARACTERS
              FIELD   - 5 CHARACTERS

              FREE='CLOSE'
              FREE=FREE             FREE     DC   CL8'CLOSE'

              A VALUE OF OTHER THAN 'CLOSE' WILL CAUSE THIS PARAMETER
              TO BE BYPASSED.

   TERM     - THE TERMINAL FIELD
              LITERAL - 2 CHARACTERS
              FIELD   - 2 CHARACTERS

              TERM='TS'
              TERM=TERM             TERM     DC   CL2'TS'

              A VALUE OF OTHER THAN 'TS' WILL CAUSE THIS PARAMETER
              TO BE BYPASSED.

   DUMMY    - THE DUMMY FIELD, ( DD DUMMY)
              LITERAL - 3 CHARACTERS
              FIELD   - 3 CHARACTERS

              DUMMY='YES'
              DUMMY=DUMMY           DUMMY    DC   CL3'YES'

              A VALUE OF OTHER THAN 'YES' WILL CAUSE THIS PARAMETER
              TO BE BYPASSED.

   RETDD    - THIS FIELD IS A NON-JCL FIELD REQUESTING THE SYSTEM TO
              GENERATE A DDNAME FOR THE ALLOCATION. THE DDNAME OBTAINED
              BY THE SYSTEM WILL BE PLACED IN THIS FIELD.

              FIELD   - 8 CHARACTERS

              RETDD=RETDD           RETDD    DC   CL8' '

1




   MODEL    - THIS FIELD REPRESENTS DCB=A.DATA.SET.NAME
              LITERAL - 1 TO 44 CHARACTERS
              FIELD   - 1 TO 44 CHARACTERS

              MODEL='USER-ID.Z.CNTL'
              MODEL=MODEL           MODEL    DC   CL22'USER-ID.Z.CNTL'

   RLSE     - THIS FIELD IS USED TO RELEASE UNUSED SPACE IN A DATA SET
              OPENED FOR OUTPUT. IF A NEW DATA SET IS BEING CREATED,
              RLSE MAY BE SPECIFIED IN THE 'SPACE' FIELD. THIS RLSE
              PARAMETER MAY BE USED DURING ALLOCATION OF AN EXISTING
              FILE.

              LITERAL - 3 CHARACTERS
              FIELD   - 3 CHARACTERS

              RLSE='YES'
              RLSE=RLSE             RLSE     DC   CL3'YES'

              A VALUE OF OTHER THAN 'YES' WILL CAUSE THIS PARAMETER
              TO BE BYPASSED.

   CCDD     - THIS FIELD IS FOR CONCATENATION OF DDNAMES ONLY. THE
              VALUE IS A LIST OF DDNAMES SEPARATED BY EITHER COMMAS
              OR BLANKS.

              LITERAL - 3 TO N CHARACTERS
              FIELD   - 3 TO N CHARACTERS

              CCDD='SYSUT1 DD2 DD3 DD4'
              CCDD=DDNAMES          DDNAMES  DC   CL80'(DD1 DD2 DD3)'

              THE DATA SETS (DDNAMES) MUST BE ALLOCATED BEFORE THEY CAN
              BE CONCATENATED.


 LITERALS AND FIELDS MAY BE MIXED IN THE 'SPFALLOC' MACRO.

 ANY CHARACTER DATA FIELD HAVING A VALUE OF BLANK, X'40', OR LESS WILL
 BE IGNORED. ANY HEX FIELD HAVING A VALUE OF X'00' WILL BE IGNORED.

 IMPORTANT: THIS MACRO USES REGISTERS R0 THROUGH R5, AND R14,R15.  R2
            THROUGH R5 ARE SAVED AND RESTORED, BUT THIS IMPLIES THAT R2
            THROUGH R5 CANNOT BE YOUR BASE REGISTERS.

 THE RETURN CODES FROM DYNAMIC ALLOCATION WILL BE PLACED IN THE
 FOLLOWING FIELDS:

 SPFDYN15  -  R15 VALUE - 4 BYTES - CHARACTER FORMAT
 SPFDYNER  -  S99ERROR  - 4 BYTES - CHARACTER FORMAT
 SPFDYNIN  -  S99INFO   - 4 BYTES - CHARACTER FORMAT

 THESE FIELDS ARE DEFINED BY THE 'SPFCMDS' MACRO.

1



 THIS MACRO WILL USE THE 2 MESSAGE VARIABLES, &LMSG AND &SMSG. AN
 APPROPRIATE MESSAGE WILL BE PLACED IN THESE VARIABLES IN THE EVENT OF
 AN ERROR. MESSAGE 'CMN000' DISPLAYS &LMSG AND &SMSG.

 OTHER ALLOCATION FUNCTIONS ARE BEING CONSIDERED FOR FUTURE
 ENHANCEMENTS. IF YOU HAVE AN IMMEDIATE NEED FOR 1 OF THESE FUNCTIONS,
 PLEASE LET ME KNOW AND I WILL PROVIDE THE CODE. (BOB BECKER)

1
 -----------------------------------------------------------------------

                              SPFBRWSE

 -----------------------------------------------------------------------

   SYNTAX -

   (LABEL)  SPFBRWSE DSNAME,MBR,VOL

   DSNAME   - THE NAME OF THE DATA SET TO BE BROWSED
              LITERAL - 1 TO 54 CHARACTERS, MAY INCLUDE A MEMBER
              FIELD   - 1 TO 54 CHARACTERS, MAY INCLUDE A MEMBER
              REG     - 54 CHARACTERS
              THE DATA SET NAME MUST BE FULLY QUALIFIED


   MEMBER   - OPTIONAL MEMBER NAME.
              LITERAL - 1 TO 8 CHARACTERS
              FIELD   - 1 TO 8 CHARACTERS
              REG     - 8 CHARACTERS

   VOL      - OPTIONAL VOLUME SERIAL NUMBER FOR NON-CATALOGED DATASETS.
              FIELD   - 1 TO 6 CHARACTERS

     IF THE DSNAME SPECIFIED IS A PDS AND MEMBER NAME IS NOT SPECIFIED,
     THE USER WILL RECEIVE A MEMBER SELECTION LIST.  IF THE VALUE OF THE
     MEMBER FIELD IS BLANKS OR LESS IT WILL BE IGNORED.


   EXAMPLES:

   (LABEL)  SPFBRWSE DSNAME

   (LABEL)  SPFBRWSE 'USER-ID.Z.CNTL',(R5)

   (LABEL)  SPFBRWSE 'USER-ID.Z.ASM',MBR,SPFVOL

   (LABEL)  SPFBRWSE (R3),'GENER'

1
 -----------------------------------------------------------------------

                              SPFCMDS

 -----------------------------------------------------------------------

   SYNTAX -

   (LABEL)  SPFCMDS  FILES=YES/NO  TABLES=YES/NO

   FILES    - OPTIONAL KEYWORD PARAMETER TO GENERATE THE DATA REQUIRED
              FOR FILE TAILORING

   TABLES   - OPTIONAL KEYWORD PARAMETER TO GENERATE THE DATA REQUIRED
              FOR TABLES

   THIS MACRO GENERATES CONSTANTS AND WORKAREAS USED BY OTHER SPF
   MACROS. SEE THE MACRO FOR OTHER SYMBOLICS.


1
 -----------------------------------------------------------------------

                              SPFDS

 -----------------------------------------------------------------------

   SYNTAX -

   (LABEL)  SPFDS  PROJECT,GROUP,TYPE,MEMBER,OTHERDSN,TARGETDSN,
                   TARGETMBR,NOVERIFY

   PROJECT  - POSITIONAL, IN STANDARD SPF PANELS THIS IS THE 'PROJECT'
              FIELD NAME.

   GROUP    - POSITIONAL, IN STANDARD SPF PANELS THIS IS THE 'GROUP'
              FIELD NAME.

   TYPE     - POSITIONAL, IN STANDARD SPF PANELS THIS IS THE 'TYPE'
              FIELD NAME.

   MEMBER   - POSITIONAL, IN STANDARD SPF PANELS THIS IS THE 'MEMBER'
              FIELD NAME.

   OTHERDSN - POSITIONAL, ANY FIELD CONTAINING A DATA SET NAME,
              QUALIFIED (QUOTES) OR UNQUALIFIED (NO QUOTES) AND
              OPTIONALLY A MEMBER NAME IN PARENS.
              REGISTER NOTATION IS VALID FOR THIS FIELD.

   TARGETDSN- POSITIONAL, THE NAME OF THE FIELD TO RECEIVE THE DATA SET
              NAME BUILT FROM THE INPUT FIELD OR FIELDS.
              REGISTER NOTATION IS VALID FOR THIS FIELD.

   TARGETMBR- POSITIONAL, THE NAME OF THE FIELD TO RECEIVE THE MEMBER
              NAME BUILT FROM THE INPUT FIELD.
              REGISTER NOTATION IS VALID FOR THIS FIELD.

   NOVERIFY - THIS KEYWORD INDICATES THAT THE DATA SET NAME AND OPTIONAL
              MEMBER SHOULD BE CREATED FROM THE INPUT FIELDS, BUT NO
              VERIFICATION OF THE EXISTENCE OF THE DATA SET AND MEMBER
              SHOULD BE PERFORMED.

   THIS MACRO HAS 4 UNIQUE FUNCTIONS -

   1  - CHECK THE FIRST POSITION OF 'OTHERDSN' FOR A '¬' OR A X'40'
        (BLANK) OR LESS. IF THIS CONDITION IS TRUE, THEN 'OTHERDSN'
        WILL NOT BE USED TO BUILD THE DSN.

        IF THE ABOVE CONDITIONS ARE NOT TRUE, THE 'OTHERDSN' FIELD
        WILL BE USED TO BUILD A DATA SET NAME.

        EXAMPLES:

        OTHER DSN                     TARGET DSN          TARGET MBR

        Z.DATA                        (ZPREFIX).Z.DATA    (BLANKS)
        Z.DATA(MBRAAA)                (ZPREFIX).Z.DATA    MBRAAA
        'SYS2.MACLIB'                 SYS2.MACLIB         (BLANKS)
        'SYSL.LINKLIB(PGMAA)'         SYSL.LINKLIB        PGMAAA

1




   2  -  IF 'OTHERDSN' IS NOT USED TO BUILD THE DATA SET NAME, THEN
         PROJECT GROUP TYPE AND MEMBER WILL BE USED.

   3  -  AFTER THE DATA SET NAME IS BUILT, THE FORMAT 1 DSCB WILL BE
         OBTAINED. THE FORMAT 1 WILL BE PLACED IN A WORKAREA PROVIDED
         BY THE 'SPFCMDS' MACRO. THIS WORKAREA INCLUDES THE IECSDSL1
         MACRO TO ALLOW REFERENCE TO THE FORMAT 1 DSCB BY THE ACTUAL
         FIELD NAMES.

   4  -  IF THE DATA SET IS A PDS, AND A MEMBER NAME IS SPECIFIED,
         A BLDL WILL BE ISSUED TO DETERMINE IF THE MEMBER EXISTS.

   IF THE KEYWORD PARAMETER, NOVERIFY, IS SPECIFIED, STEPS 3 AND 4
   ABOVE WILL BE BYPASSED.

   REGISTERS UPON RETURN FROM THE MACRO:

   R0   - 00 INDICATES THAT THE DATA SET NAME WAS BUILT FROM PROJECT
             GROUP AND TYPE FIELDS.
          04 INDICATES THAT THE DATA SET NAME WAS BUILT FROM THE OTHER
             DSN FIELD.

   R15  - 00 VALID DATA SET AND MEMBER.
          04 MEMBER DOES NOT EXIST.
          08 DATA SET HAS BEEN MIGRATED, FORMAT 1 DSCB AND BLDL COULD
             NOT BE PROVIDED BECAUSE IT WOULD CAUSE RECALL OF THE
             DATA SET.
          12 DATA SET NOT CATALOGED.
          16 DATA SET NOT ON VOLUME AS INDICATED BY THE CATALOG.
          20 BLDL COULD NOT BE ACCOMPLISHED BECAUSE THE DATA SET IS IN
             USE BY ANOTHER JOB.
          24 VOLUME IS NOT MOUNTED
          28 SOMETHING IS INVALID !!!

   THE ONLY REQUIRED PARAMETER IS THE 'TARGETDSN' PARAMETER. ALL OTHERS
   ARE OPTIONAL, ALTHOUGH YOU MUST SPECIFY ONE OF THE INPUTS.

   EXAMPLES:

   (LABEL)  SPFDS  PROJECT,GROUP,TYPE,MEMBER,OTHERDSN,TDSN,TMBR

   (LABEL)  SPFDS  PROJECT,GROUP,TYPE,MEMBER,(R3),(R4),(R5)

   (LABEL)  SPFDS  PROJECT,GROUP,TYPE,,,TDSN

   (LABEL)  SPFDS  ,,,,OTHERDSN,(R5),TMBR

   (LABEL)  SPFDS  ,,,,(R3),TDSN

   THE OUTPUT FIELDS ARE ALWAYS INITIALIZED TO BLANKS PRIOR TO
   GENERATING A NAME, THEREFORE, IF A NAME IS NOT BUILT FOR ANY
   REASON, THE OUTPUT FIELDS, DSN AND MBR, WILL BE BLANK.


   THE 'SPFDS' MACRO INVOKES OTHER MACROS: SPFDS1, SPFDS2 SPFDS4, SPFLOC
   AND SPFOBT. THE SPFLOC AND SPFOBT ARE DESCRIBED BELOW.
1
 -----------------------------------------------------------------------

                              SPFEDIT

 -----------------------------------------------------------------------

   SYNTAX -

   (LABEL)  SPFEDIT DSNAME,MBR,VOL

   DSNAME   - THE NAME OF THE DATA SET TO BE EDITED
              LITERAL - 1 TO 54 CHARACTERS, MAY INCLUDE A MEMBER
              FIELD   - 1 TO 54 CHARACTERS, MAY INCLUDE A MEMBER
              REG     - 54 CHARACTERS
              THE DATA SET NAME MUST BE FULLY QUALIFIED

   MEMBER   - OPTIONAL MEMBER NAME.
              LITERAL - 1 TO 8 CHARACTERS
              FIELD   - 1 TO 8 CHARACTERS
              REG     - 8 CHARACTERS

   VOL      - OPTIONAL VOLUME SERIAL NUMBER FOR NON-CATALOGED DATA SETS.
              FIELD   - 1 TO 6 CHARACTERS

     IF THE DSNAME SPECIFIED IS A PDS AND MEMBER NAME IS NOT SPECIFIED,
     THE USER WILL RECEIVE A MEMBER SELECTION LIST.  IF THE VALUE OF THE
     MEMBER FIELD IS BLANKS OR LESS IT WILL BE IGNORED.


   EXAMPLES:

   (LABEL)  SPFEDIT DSNAME

   (LABEL)  SPFEDIT 'USER-ID.Z.CNTL',(R3)

   (LABEL)  SPFEDIT DSNAME,MBR,VOL

   (LABEL)  SPFEDIT (R5),'GENER'


1
 -----------------------------------------------------------------------

                              SPFENQ / SPFDEQ

 -----------------------------------------------------------------------

   SYNTAX -

   (LABEL)  SPFENQ  SPFEDIT,SPFDSN,DSNAME,MBR
   (LABEL)  SPFDEQ  SPFEDIT,SPFDSN,DSNAME,MBR

   SPFEDIT  - CODED AS SHOWN - OPTIONAL
              THIS IS A KEYWORD PARAMETER THAT INDICATES AN ENQ FOR A
              MEMBER OF A PDS, OR AN ENTIRE SEQ DATA SET.

   SPFDSN   - CODED AS SHOWN - OPTIONAL
              THIS IS A KEYWORD PARAMETER THAT INDICATES AN ENQ FOR THE
              PDS ITSELF TO UPDATE THE DIRECTORY.

   DSNAME   - THE NAME OF THE DATA SET TO BE ENQUEUED
              FIELD   - 44 CHARACTERS

   MEMBER   - MEMBER NAME, REQUIRED FOR "SPFEDIT" FUNCTION, NOT USED
                  FOR "SPFDSN" FUNCTION
              FIELD   - 8 CHARACTERS


   EXAMPLES:

   (LABEL)  SPFENQ  SPFEDIT,SPFDSN,DSNAME,MBR
   (LABEL)  SPFDEQ  SPFEDIT,SPFDSN,DSNAME,MBR

   (LABEL)  SPFENQ  SPFEDIT,,DSNAME,MBR
   (LABEL)  SPFDEQ  SPFEDIT,,DSNAME,MBR

   (LABEL)  SPFENQ  ,SPFDSN,DSNAME
   (LABEL)  SPFDEQ  ,SPFDSN,DSNAME

1
   WHEN TO USE SPFENQ/SPFDEQ:

   THESE MACROS ARE INTENDED TO BE USED WHEN PROCESSING MEMBERS OF A
   PARTITIONED DATA SET. VARIOUS NATIVE SPF FUNCTIONS USE ENQ/DEQ
   TO PROTECT A MEMBER, AND THE ENTIRE PDS.

   THE MEMBER IS PROTECTED WHENEVER A FUNCTION HAS CONTROL WHICH MAY
   CHANGE THE MEMBER, SUCH AS EDIT.  THE ENQ ON THE MEMBER IS USUALLY
   LONG TERM, DURING WHICH THE USER IS INTER-ACTIVELY WORKING WITH THE
   DATA.

   USING THE LONG TERM MEMBER ENQ:

   RNAME: SPFEDIT
   QNAME: DSN.,....1....,....2....,....3....,...4....MEMBER..

          SPFENQ SPFEDIT,,DSNAME,MEMBER
          LTR    R15,R15      DID WE GET THE RESOURCE ?
          BNZ    NOTAVAIL     NO - SOMEBODY ELSE HAS IT

   THE "SPFEDIT" ENQ IS CONDITIONAL, (RET=USE), AND YOU MUST CHECK THE
   RETURN CODE IN R15. THE MACRO WILL NOT WAIT FOR THE RESOURCE IF IT
   IS IN USE.

   WHEN YOU ARE DONE WITH THE MEMBER, ISSUE THE "SPFDEQ" MACRO:

          SPFDEQ SPFEDIT,,DSNAME,MEMBER

1
   THE ENTIRE PDS IS PROTECTED WHENEVER A FUNCTION HAS CONTROL WHICH
   MAY UPDATE THE DIRECTORY OF THE PDS, SUCH AS SAVE, RENAME, DELETE.
   THE ENQ ON THE ENTIRE PDS IS ONLY FOR THE DURATION OF A SINGLE
   TRANSACTION.

   USING THE SHORT TERM PDS ENQ:

   RNAME: SPFEDIT
   QNAME: DSN.,....1....,....2....,....3....,...4....

          SPFENQ ,SPFDSN,DSNAME

   THE "SPFDSN" ENQ IS NOT CONDITIONAL, THE MACRO WILL WAIT FOR THE
   RESOURCE IF IT IS IN USE, SINCE THE DURATION OF THIS ENQ IS FOR
   A SINGLE TRANSACTION.

   WHEN THE TRANSACTION COMPLETES, ISSUE THE "SPFDEQ" MACRO:

          SPFDEQ ,SPFDSN,DSNAME

   YOU MAY WISH TO ISSUE BOTH ENQS FOR A FUNCTION, SINGLE TRANSACTION,
   WHICH MAY UPDATE BOTH A MEMBER AND THE DIRECTORY, SUCH AS A MOVE
   OR COPY FUNCTION.

          SPFENQ SPFEDIT,SPFDSN,DSNAME,MEMBER
          LTR    R15,R15      DID WE GET THE RESOURCE ?
          BNZ    NOTAVAIL     NO - SOMEBODY ELSE HAS IT

   THE CONDITIONAL ENQ (SPFEDIT), IS REQUESTED FIRST, AND ONLY UPON
   SUCCESSFUL COMPLETION WILL THE UNCONDITIONAL ENQ (SPFDSN) BE ISSUED.

   WHEN THE TRANSACTION COMPLETES, ISSUE THE "SPFDEQ" MACRO:

          SPFDEQ SPFEDIT,SPFDSN,DSNAME,MEMBER


   INVOKING FROM BATCH:

   YOU MAY INVOKE THESE MACROS FROM A BATCH PROGRAM, HOWEVER, YOU MUST
   REMEMBER TO INCLUDE THE "SPFCMDS" MACRO SINCE SEVERAL FIELDS OF THIS
   MACRO ARE REFERENCED BY "SPFENQ/SPFDEQ". YOU MAY LIMIT THE EXPANSION
   PF "SPFCMDS" TO THOSE FIELDS REQUIRED BY "SPFENQ/SPFDEQ" BY CODING"

               SPFCMDS   ENQDEQ=ONLY

   ALSO, DO NOT ISSUE ANY LONG TERM "SPFDSN" ENQS FROM BATCH, SINCE THIS
   MAY LOCK OUT SPF USERS.


1
 -----------------------------------------------------------------------

                              SPFEXIT

 -----------------------------------------------------------------------

   SYNTAX -

   (LABEL)  SPFEXIT

   THIS MACRO GENERATES STANDARD RETURN LINKAGE, INCLUDING L R13,4(R13)


1
 -----------------------------------------------------------------------

                              SPFINIT

 -----------------------------------------------------------------------

   SYNTAX -

   (LABEL)  SPFINIT BASE1,BASE2,...BASE5

   THIS MACRO WILL GENERATE STANDARD LINKAGE, UP TO 5 BASE REGISTERS
   MAY BE SPECIFIED. THE CSECT NAME WILL BE THE NAME SPECIFIED IN
   THE LABEL.

   THIS MACRO WILL GENERATE 'VDEFINES' AND 'VGETS' FOR THE FOLLOWING
   VARIABLES BASED ON THE OPTION INDICATED:

   (NO OPTION, ALWAYS DEFINED)
      SMSG      - A FIELD FOR THE SHORT MESSAGE - 24 BYTES
      LMSG      - A FIELD FOR THE LONG MESSAGE - 72 BYTES
                  SPF MESSAGE 'CMN000' USES THE SMSG AND LMSG VARIABLES
                  VGET NOT ISSUED FOR SMSG OR LMSG
      ZCMD      - COMMAND ===> FIELD - 60 BYTES

   USER=Y
      ZAPPLID   - 4 BYTES
      ZUSER     - 8 BYTES
      ZPREFIX   - 8 BYTES
      ZLOGON    - 8 BYTES
      ZTEMPF    - 44 BYTES

   TIME=Y
      ZDATE     - 8 BYTES
      ZJDATE    - 6 BYTES
      ZTIME     - 5 BYTES
      ZMONTH    - 2 BYTES
      ZDAY      - 2 BYTES
      ZYEAR     - 2 BYTES

   TERM=Y
      ZTERM     - 4 BYTES
      ZKEYS     - 2 BYTES
      ZPF01     - 48 BYTES
      ZPF02     - 48 BYTES
        .
        .
      ZPF23     - 48 BYTES
      ZPF24     - 48 BYTES

   TABLES=Y
      CRP       - 4 BYTES FIXED (FULLWORD)
      ZSCROLLA  - 4 BYTES CHAR
      ZSCROLLN  - 4 BYTES CHAR
      ZSCROLLD  - 4 BYTES CHAR

1

 -----------------------------------------------------------------------

                              SPFJOBNM

 -----------------------------------------------------------------------

   SYNTAX -

   (LABEL)  SPFJOBNM  JCLIMAGE

   JCLIMAGE  - THE NAME OF THE FIELD CONTAINING THE IMAGE OF THE JCL
               CARD WITH THE JOBNAME.

   THIS MACRO WILL COMPARE THE JOBNAME TO THE USER-ID (ZUSER) AND IF
   IT MATCHES, IT WILL ADD 1 TO THE JOBNAME SUFFIX, IF THERE IS A
   SUFFIX TO UPDATE.
1

 -----------------------------------------------------------------------

                              SPFLOC

 -----------------------------------------------------------------------
   SYNTAX -

   (LABEL)  SPFLOC DSN

   DSN     - FIELD CONTAINING THE DATA SET NAME, THE CATALOG INFORMATION
             WILL BE RETURNED IN THE AREA PROVIDED BY 'SPFDSCB' FIELD OF
             THE 'SPFCMDS' MACRO.

   THE 'SPFVOL' AND 'SPFDEVT' FIELDS OF THE 'SPFCMDS' MACRO WILL BE
   UPDATED BY THIS MACRO WITH THE VOLUME SERIAL NUMBER AND THE DEVICE
   TYPE RETURNED BY THE 'LOCATE'.


   RETURN CODES IN R15 -

     00 - LOCATE COMPLETED NORMALLY
     08 - DATA SET HAS BEEN MIGRATED
     12 - DATA SET NOT CATALOGED

   EXAMPLES -

   (LABEL)  SPFLOC DSNAME

   (LABEL)  SPFLOC (R9)
1

 -----------------------------------------------------------------------

                              SPFOBT

 -----------------------------------------------------------------------
   SYNTAX -

   (LABEL)  SPFOBT DSN,VOL

   DSN     - FIELD CONTAINING THE DATA SET NAME, THE CATALOG INFORMATION
             WILL BE RETURNED IN THE AREA PROVIDED BY 'SPFDSCB' FIELD OF
             THE 'SPFCMDS' MACRO. THIS FIELD IS DIRECTLY ADDRESSABLE BY
             THE STANDARD NAMES GENERATED BY THE 'IECSDSL1' MACRO, THE
             FORMAT 1 DSCB LAYOUT.

   VOL     - FIELD CONTAINING THE DATA SET NAME VOLUSE SERIAL NUMBER.
             NOTE: IF THE 'SPFLOC' MACRO WAS USED TO OBTAIN THE VOLUME
             SERIAL NUMBER, THEN THIS FIELD IS NOT REQUIRED SINCE IT
             WILL DEFAULT TO THE 'SPFVOL' FIELD WHICH WAS UPDATED BY
             THE 'SPFLOC' MACRO.

   RETURN CODES IN R15 -

     00 - LOCATE COMPLETED NORMALLY
     08 - DATA SET HAS BEEN MIGRATED
     16 - DATA SET NOT ON VOLUME
     24 - VOLUME NOT MOUNTED

   EXAMPLES -

   (LABEL)  SPFLOC DSNAME
            LTR    R15,R15
            BNZ    ERROR
            SPFOBT DSNAME

   (LABEL)  SPFOBT (R9),VOL

   (LABEL)  SPFOBT DSN,VOL
1

 -----------------------------------------------------------------------

                              SPFRJUST

 -----------------------------------------------------------------------
   SYNTAX -

   (LABEL)  SPFRJUST TOFIELD,FROMFIELD

   TO      - TARGET FIELD FOR RIGHT JUSTIFIED DATA.
             THIS FIELD LENGTH MUST BE EQUAL TO OR GREATER THAN THE
             'FROM' FIELD.

   FROM    - FIELD CONTAINING THE DATA TO BE RIGHT JUSTIFIED.

   THE TARGET FIELD WILL BE PADDED WITH BLANKS. THIS WILL ALLOW FOR
   BOTH RE-DISPLAY AND/OR PACKING SINCE PACKING BLANKS RESULTS IN
   ZEROS IF AT LEAST 1 DIGIT HAS BEEN JUSTIFIED.


   EXAMPLES -

   (LABEL)  SPFRJUST TO,FROM

1

 -----------------------------------------------------------------------

                              SPFSPLAY

 -----------------------------------------------------------------------

   SYNTAX -

   (LABEL)  SPFSPLAY PANEL,MESSAGE,CURSOR,LABEL1,LABEL2

   PANEL   - MEMBER NAME OF THE PANEL TO BE DISPLAYED
             LITERAL - 1 TO 8 CHARACTERS IN QUOTES
             FIELD   - NAME OF FIELD CONTAINING PANEL NAME - MUST BE
                       AN 8 CHARACTER FIELD.
                       THE SPFCMDS MACRO GENERATES A FIELD NAMED 'PANEL'
                       THAT MAY BE USED.

   MESSAGE - MESSAGE ID TO BE DISPLAYED
             LITERAL - 1 TO 8 CHARACTERS IN QUOTES
             FIELD   - NAME OF FIELD CONTAINING MSG ID - MUST BE
                       AN 8 CHARACTER FIELD.
                       THE SPFCMDS MACRO GENERATES A FIELD NAMED 'MSG'
                       THAT MAY BE USED.

   CURSOR  - NAME OF THE FIELD FOR CURSOR POSITIONING
             LITERAL - 1 TO 8 CHARACTERS IN QUOTES
             FIELD   - NAME OF FIELD CONTAINING CURSOR FIELD NAME
                       MUST BE AN 8 CHARACTER FIELD.
                       THE SPFCMDS MACRO GENERATES A FIELD NAMED
                       'CURSOR' THAT MAY BE USED.

   LABEL1  - LABEL ON INSTRUCTION TO GAIN CONTROL IF USER HITS ENTER
             (R15 = 00)

   LABEL2  - LABEL ON INSTRUCTION TO GAIN CONTROL IF USER HITS END
             (R15 ¬= 00)

    IN THE ABSENCE OF EITHER PARM 4 OR 5, OR BOTH, THE NEXT INSTRUCTION
    AFTER THE MACRO WILL BE EXECUTED.

    EXAMPLES -

    DISPLAY A PANEL WITH MESSAGE, POSTION THE CURSOR AND PROVIDE LABELS
    FOR BRANCHING BASED ON THE VALUE OF R15

    (LABEL)   SPFSPLAY 'CMNBB00','CMN000','CMNBBPR',PROCESS,CLEANUP

    --------

    DISPLAY A PANEL AND POSTION THE CURSOR, BRANCH TO CLEANUP IF USER
    HITS THE END KEY

    (LABEL)   SPFSPLAY 'CMNBB00',,CURSOR,,CLEANUP

    --------

    DISPLAY A MESSAGE OVER THE CURRENT PANEL AND BRANCH TO CLEANUP IF
    THE USER HITS THE END KEY

    (LABEL)   SPFSPLAY ,'CMN000',,CLEANUP
1

 -----------------------------------------------------------------------

                              SPFSUB

 -----------------------------------------------------------------------

   SYNTAX -

   (LABEL)  SPFSUB  DSN,MBR

   DSN      - THE NAME OF THE DATA SET CONTAINING THE JCL TO BE
              SUBMITTED.
              LITERAL - 1 TO 44 CHARACTERS
              FIELD   - 1 TO 44 CHARACTERS
              THE DATA SET NAME MUST BE FULLY QUALIFIED

   MBR      - THE NAME OF THE MEMBER TO BE SUBMITTED, REQUIRED IF THE
              ABOVE DATA SET IS A PDS.
              LITERAL - 1 TO 8 CHARACTERS
              FIELD   - 1 TO 8 CHARACTERS

   THIS MACRO HAS BEEN CHANGED TO INVOKE THE TSO SUBMIT COMMAND TO ALLOW
   THE INVOKATION OF THE INSTALLATIONS SUBMIT EXIT.  THIS MACRO NO
   LONGER RETURNS THE JOB NUMBER, BUT THE USER WILL RECEIVE THE
   SUBMITTED MESSAGE FROM THE TSO SUBMIT COMMAND.
1

 -----------------------------------------------------------------------

                              SPFTAILR

 -----------------------------------------------------------------------

   SYNTAX -

   (LABEL)  SPFTAILR PROC,SUBMIT,JOBCARD=

   PROC     - THE NAME OF THE MEMBER IN ISPSLIB CONTAINING THE JCL
              LITERAL - 1 TO 8 CHARACTERS
              FIELD   - 1 TO 8 CHARACTERS

   SUBMIT   - THIS KEYWORD INDICATES THAT THE JOB SHOULD BE SUBMITTED
              (SPFSUB MACRO IS GENERATED)

   JOBCARD  - THE NAME OF THE JOBCARD FIELD. SPECIFYING THIS PARM WILL
              INVOKE THE 'SPFJOBNM' MACRO TO INCREMENT THE JOB NAME
              SUFFIX, IF APPLICABLE.
1

 -----------------------------------------------------------------------

                              SPFTBCR

 -----------------------------------------------------------------------

   SYNTAX -

   (LABEL)  SPFTBCR TABLENAME,(KEYFIELDS),(OTHERFLDS),WRITE,REPLACE

   TABLENAME - NAME OF THE FIELD CONTAINING THE NAME OF TABLE.

   KEYFIELDS - NAMES OF THE KEY VARIABLE FIELDS, THIS PARAMETER IS NOT
               REQUIRED IF YOUR TABLE DOES NOT HAVE KEYS.

   OTHERFLDS - NAME OF THE FIELD CONTAINING THE NAMES OF THE VARIABLE
               FIELDS IN THE TABLE. ANY FIELDS SPECIFIED AS KEYFIELDS
               MUST ALSO BE SPECIFIED HERE.

   WRITE     - OPTIONAL, DEFAULT IS NOWRITE, SEE SPF MANUAL

   REPLACE   - OPTIONAL, SEE SPF MANUAL


   EXAMPLE:

   (LABEL)  SPFTBCR TABLE,(CMNTB01,CMNTB02,CMNTB03),(CMNTB01,CMNTB02,  +
                   (CMNTB03,CMNTB04,CMNTB05,CMNTB06),WRITE,REPLACE

1

 -----------------------------------------------------------------------

                              SPFTEMP

 -----------------------------------------------------------------------

   SYNTAX -

   (LABEL)  SPFTEMP BASEDSN,TARGETDSN,QUALIFIER

   BASEDSN   - NAME OF THE FIELD CONTAINING THE DSN FROM WHICH TO BUILD
               THE TARGET DATA SET NAME. IF THIS POSTIONAL PARAMETER IS
               OMITTED, THE 'ZTEMPF' VALUE WILL BE USED AS THE BASE DSN.

   TARGETDSN - NAME OF THE FIELD IN WHICH THE NEW DATA SET NAME IS
               PLACED.

   QUALIFIER - THE LAST QUALIFIER TO REPLACE THE ONE ON THE BASE DSN.
               LITERAL - 1 TO 8 CHARACTERS
               FIELD   - 1 TO 8 CHARACTERS



   EXAMPLE:

   (LABEL)  SPFTEMP ,TEMPDSN,'TEMP1'

   THIS WOULD TAKE THE CURRENT VALUE OF 'ZTEMPF', SUCH AS
   USER-ID.SPFTEMP2.CNTL AND CREATE A DSN OF
   USER-ID.SPFTEMP2.TEMP1

   NOTE: ONLY THE NAME IS GENERATED, THERE IS NO ALLOCATION ASSOCIATED
         WITH THIS MACRO.
1

 -----------------------------------------------------------------------

                              SPFVCOPY/SPFVREPL

 -----------------------------------------------------------------------

   SYNTAX -

   (LABEL)  SPFVCOPY (NAME1,LL1,NAME2,LL2,NAME3,LL3, ...  NAMEN,LLN),  +
                  DC=

   NAMEX     - THE NAME OF THE VARIABLE TO BE COPIED.

   LLX       - THE LENGTH OF THE FIELD.

   DC        - DEFAULTS TO GENERATING A DEFINED CONSTANT FOR EACH
               NAME SPECIFIED, THIS CAN BE OVER-RIDDEN BY SPECIFYING
               DC=NO .

   THE MACRO GENERATES CODE TO COPY VARIABLES FROM ONE DIALOG MANAGER
   TO ANOTHER. ITS PURPOSE IS TO ALLOW VARIABLES TO BE PASSED TO
   SUB-ROUTINES.

   IT WILL OPTIONALLY 'NOT' GENERATE THE 'DC'S IF 'DC=NO' IS CODED.
   THE ONLY TIME YOU WOULD NOT WANT THE 'DC'S GENERATED IS IF THE
   FIELD IS GENERATED BY SOME OTHER MACRO OR PRE-DEFINED IN A SPECIFIC
   PLACE IN THE PROGRAM.

   EXAMPLES -

   (LABEL)   SPFVCOPY (ZTEMPF,44,CMNDSN,44,CMNMBR,8,ZUSER,8)

   ----------

   SYNTAX -

   (LABEL)  SPFVREPL (NAME1,LL1,NAME2,LL2,NAME3,LL3, ...  NAMEN,LLN)

   NAMEX     - THE NAME OF THE VARIABLE TO BE REPLACED.

   LLX       - THE LENGTH OF THE FIELD.


   THE MACRO GENERATES CODE TO REPLACE VARIABLES FROM ONE DIALOG MANAGER
   TO ANOTHER. ITS PURPOSE IS TO ALLOW VARIABLES COPIED FROM THE MAIN
   DIALOG MANAGER TO BE PASSED BACK TO THE MAIN DIALOG MANAGER.

1

   EXAMPLES -

   (LABEL)   SPFVREPL (ZTEMPF,44,CMNDSN,44,CMNMBR,8,ZUSER,8)


   --------    SPFVCOPY/SPFVREPL LOGIC


   MAIN DIALOG MANAGER:

      SPFINIT                *** VDEFINES ZTEMPF AND ZUSER ***
      SPFVDEF  44,(CMNDSN)
      SPFVDEF  8,(CMNMBR)


      LINK   EP=SUBDM       PASS CONTROL TO SUB DIALOG MANAGER


   SUB DIALOG MANAGER:



     SPFVCOPY  (CMNDSN,44,CMNMBR,8,ZTEMPF,44,ZUSER,8)

        .
        .    *** CHANGES VALUES OF CMNMBR AND CMNDSN
        .


     SPFVREPL  (CMNDSN,44,CMNMBR,8)


     IT IS IMPERATIVE THAT THE 'SPFVREPL' USES THE VARIABLES IN THE
     SAME ORDER AS THE 'SPFVCOPY' ALTHOUGH THE 'SPFVREPL' DOES NOT
     HAVE TO USE ALL VARIABLES COPIED. THE VARIABLES PROCESSED BY
     'SPFVREPL' MUST BE CONTIGUOS.


     THE 'SPFVCOPY' IN THE EXAMPLE WILL GENERATE THE FOLLOWING
     ASSEMBLER DEFINED CONSTANTS, IN THE ORDER SHOWN:

     CMNDSN   DC  CL44' '
     CMNMBR   DC  CL8' '
     ZTEMPF   DC  CL44' '
     ZUSER    DC  CL8' '

     THE 'SPFVREPL' MACRO WILL TARGET THE FIRST VARIABLE NAMED AS THE
     BEGINNING ADDRESS OF THE LIST, THE REST OF THE VARIABLES SPECIFIED
     ARE ASSUMED TO FOLLOW AND REPLACMENT IS BASED ON THE BEGINNING
     ADDRESS AND LENGTHS OF EACH VARIABLE SPECIFIED.

1


     MULTIPLE 'SPFVREPL' MACROS MAY BE NECESSARY IN ORDER TO PRODUCE
     CORRECT RESULTS AS ILLUSTRATED IN THE FOLLOWING EXAMPLE:

   MAIN DIALOG MANAGER:

      SPFINIT                *** VDEFINES ZTEMPF AND ZUSER ***
      SPFVDEF  44,(CMNDSN,CMNOTH)
      SPFVDEF  8,(CMNMBR,CMNDDNM)
      SPFVDEF  3,(CMNOP1,CMNOP2,CMNOP3)


      LINK   EP=SUBDM       PASS CONTROL TO SUB DIALOG MANAGER


   SUB DIALOG MANAGER:



     SPFVCOPY  (CMNDSN,44,CMNMBR,8,ZTEMPF,44,ZUSER,8,CMNOP1,CMNOP2)

        .
        .    *** CHANGES VALUES OF CMNMBR, CMNDSN, CMNOP1, CMNOP2
        .


     SPFVREPL  (CMNDSN,44,CMNMBR,8)
     SPFVREPL  (CMNOP1,3,CMNOP2,3)


1

 -----------------------------------------------------------------------

                              SPFVDEF

 -----------------------------------------------------------------------

   SYNTAX -

   (LABEL)  SPFVDEF LL,(NAME1,NAME2,NAME3, ...  NAMEN),TYPE= ,DC=

   LL        - THE LENGTH OF EACH FIELD IN THE LIST.

   NAMEX     - THE NAME OF THE FIELD TO BE GENERATED.

   TYPE      - THE TYPE OF DATA IN THE FIELD, DEFAULT IS 'CHAR'
               SEE THE SPF MANUAL FOR MORE DETAIL ON 'TYPE'

   DC        - DEFAULTS TO GENERATING A DEFINED CONSTANT FOR EACH
               NAME SPECIFIED, THIS CAN BE OVER-RIDDEN BY SPECIFYING
               DC=NO .

   THE MACRO GENERATES CODE TO DEFINE VARIABLES TO SPF. IT WILL
   GENERATE 'DC' (DEFINE CONSTANT) INSTRUCTIONS FOR ALL THE VARIABLES
   REQUESTED. EACH NAME WILL HAVE THE LENGTH SPECIFIED IN THE 'LL'
   FIELD.

   IT WILL OPTIONALLY 'NOT' GENERATE THE 'DC'S IF 'DC=NO' IS CODED.
   THE ONLY TIME YOU WOULD NOT WANT THE 'DC'S GENERATED IS IF THE
   FIELD IS GENERATED BY SOME OTHER MACRO OR PRE-DEFINED IN A SPECIFIC
   PLACE IN THE PROGRAM.

   EXAMPLES -

   (LABEL)   SPFVDEF 44,(CMNBBDSN,DSNAME,SAVEDSN)
   (LABEL)   SPFVDEF 8,(CMNBBPRJ,CMNBBLIB,CMNBBTYP,ZPREFIX,ZUSER)
   (LABEL)   SPFVDEF 1,(CMNBBAA),DC=NO
1

 -----------------------------------------------------------------------

                              SPFVDEL

 -----------------------------------------------------------------------

   SYNTAX -

   (LABEL)  SPFVDEF (NAME1,NAME2,NAME3, ...  NAMEN)

   NAMEX     - THE NAME OF THE VARIABLE TO BE DELETED.


   THE MACRO GENERATES CODE TO DELETE VARIABLES. IT IS DESIGNED TO BE
   USED BY SUB-ROUTINES THAT ISSUE 'SPFVDEF' MACROS. SUB-ROUTINES MUST
   DELETE VARIABLES THEY DEFINE IN ORDER TO INSURE CORRECT PROCESSING
   ON MULTIPLE CALLS TO THE SUB-ROUTINE.


   EXAMPLES -

   (LABEL)   SPFVDEL (CMNBBDSN,DSNAME,SAVEDSN)
1

 -----------------------------------------------------------------------

                              SPFVGET/SPFVPUT

 -----------------------------------------------------------------------

   SYNTAX -

   (LABEL)  SPFVGET (NAME1,NAME2,NAME3, ...  NAMEN),POOL
   (LABEL)  SPFVPUT (NAME1,NAME2,NAME3, ...  NAMEN),POOL

   NAMEX     - THE NAME OF THE VARIABLE FIELD.

   POOL      - SHARED OR PROFILE

   THE VARIABLES MUST BE DEFINED TO SPF VIA THE 'VDEFINE' FUNCTION.
   THERE IS NO RESTRICTION ON ORDER OF THE NAMES OR THE SIZE OF THE
   FIELDS THEY REPRESENT.



1


 -----------------------------------------------------------------------

                    PROGRAMMING CONSIDERATIONS

 -----------------------------------------------------------------------


 SPFCMDS MACRO -

   THIS MACRO GENERATES ALL THE CONSTANTS FOR SPF SERVICES.
   IT ALSO CONTAINS SOME WORKAREAS USED BY OTHER SPF MACROS, THESE
   WORKAREAS MAY ALSO BE USED BY YOUR CODE.
   SPFDBWRD - A DOUBLE WORD
   SPFDSCB  - THE AREA FOR A FORMAT 1 DSCB
   SPFBLIST - THE AREA FOR A BLDL
   SPFBDCB  - THE DCB FOR A PDS - USED FOR BLDL
   SPFREGS  - 16 FULLWORD REGISTER SAVE AREA
   SPFTRT   - 256 BYTE AREA FOR TRANSLATE AND TEST (TRT)

 MESSAGES -

   2 VARIABLES ARE DEFINED BY THE 'SPFINIT' MACRO FOR DISPLAYING
   MESSAGES. THESE VARIABLES ARE &LMSG (LONG MESSAGE) AND &SMSG
   (SHORT MESSAGE). THESE VARIABLES ARE DISPLAYED BY MESSAGE 'CMN000'.

   TO DISPLAY A MESSAGE ON A PANEL, MOVE TEXT TO BOTH &SMGS AND &LMSG
   AND THEN DISPLAY MESSAGE 'CMN000'.

 TEMPORARY DATA SETS -

   TEMPORARY DATA SET NAMES SHOULD BE BUILT USING THE 'SPFTEMP' MACRO.

   1 - ATTEMPT TO ALLOCATE THE DATA SET AS IF IT EXISTS, SHR, OLD, MOD.
       SET THE BLKSIZE, LRECL, AND RECFM TO YOUR NEEDS.
   2 - IF IT DOES NOT EXIST, CREATE IT WITH A DISP=(NEW,CATLG,CATLG).
   3 - USE A LAST QUALIFIER OF THE FOLLOWING FORMAT:
       .TEMP1 THROUGH .TEMPX
       ALWAYS STARTING WITH TEMP1 AND PROCEEDING SEQUENTIALLY IF 2 OR
       MORE DATA SETS ARE REQUIRED CONCURRENTLY.
   4 - ALLOCATE IN BLOCKS, PRIMARY=10 AND SECONDARY=50
   5 - ALWAYS CODE THE 'RLSE' OPTION, FOR BOTH NEW AND EXISTING
       ALLOCATIONS.

 DDNAMES -

   IN ORDER TO AVOID A CONFLICT OF DDNAMES WHEN THE SAME DIALOG
   MANAGER IS INVOKED FROM BOTH SIDES OF SPLIT SCREEN, DO NOT HARD
   CODE DDNAMES IN YOUR DIALOG MANAGERS. DYNAMIC ALLOCATION WILL
   PROVIDE A DDNAME, IF REQUESTED. THIS IS THE "RETDD=" PARAMETER
   ON THE 'SPFALLOC' MACRO.

   MOST IBM UTILITIES AND COMPILERS PROVIDE THE ABILITY TO CHANGE THE
   STANDARD DDNAMES VIA A PARM PASSED TO THE PROGRAM.

1


 PANELS/MENUS

   TRY TO MAKE PANELS SIMILAR TO THE IBM SUPPLIED PANELS.

   USE PROJECT, GROUP, TYPE, MEMBER, AND OTHER DATA SET NAME WHERE
   APPLICABLE.

   ALWAYS LEAVE THE 3RD LINE BLANK, THIS IS WHERE THE LONG MESSAGE
   APPEARS.

   THE FIRST LINE, HEADING, SHOULD BE HIGH INTENSITY

   ALL PANELS SHOULD HAVE THE "COMMAND ===>" LINE IN HIGH INTENSITY.
1


 -----------------------------------------------------------------------
                   GLOBAL VARIABLES USED IN SPF MACROS
 -----------------------------------------------------------------------

 VARIABLE    TYPE    SET BY       VALUE

 SPF1        A       SPFALLOC  -  &SYSNDX - EACH TIME MACRO IS USED
 SPF2        A       ALCERR    -  &SYSNDX - ONLY SET ONCE
 SPF3        C       ALCERR    - 'X' - ONLY SET ONCE
 SPF4        C       SPFROW    - 'X' - ONLY SET ONCE



