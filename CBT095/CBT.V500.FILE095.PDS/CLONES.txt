ISREDIT MACRO (DA VOLUME) NOPROCESS
CONTROL NOMSG
 IF &DA = ? THEN DO
 ISPEXEC DISPLAY PANEL(CLONES)
 EXIT
 END
IF &DA = THEN DO
ISPEXEC VGET CLONEDSN PROFILE
ISPEXEC VGET CLONEVOL PROFILE
SET &VOLX = &CLONEVOL
IF &VOLX ¬= THEN DO
SET &AVOL = &STR(UNIT=SYSDA,VOL=SER=&VOLX)
SET &COMMA = &STR(,)
END
IF &CLONEDSN  NE THEN DO
SET &DA = &CLONEDSN
SET &CLONEDSN =
ISPEXEC VPUT CLONEDSN PROFILE
END
END
IF &VOLUME = THEN DO
SET &VOL =
GOTO SETIN
END
SET &VOL = &STR(VOLUME(&VOLUME))
SETIN: +
SET &IN = &DA
IF &IN = THEN DO
           SET ZEDSMSG = &STR(INVALID DSN )
       SET ZEDLMSG = &STR(DSIGEN WORKS WITH VALID DATASET NAMES)
           ISPEXEC SETMSG MSG(ISRZ001)
         EXIT CODE(12)
  END
LISTDSI &IN  &VOL
SET CODE = &LASTCC
SET REASON = &SYSREASON
IF &CODE = 16 AND &REASON = 5 THEN DO
           SET ZEDSMSG = &STR(DATASET NO FOUND)
       SET ZEDLMSG = &STR(&IN MUST BE A FULLY QUALIFIED DATA SET NAME)
           ISPEXEC SETMSG MSG(ISRZ001)
         EXIT CODE(12)
  END
SET  &SXS1 =   &STR(&SYSDSNAME)
SET  &SXS2 =   &STR(&SYSVOLUME)
SET  &SXS3 =   &STR(&SYSUNIT)
SET  &SXS4 =   &STR(&SYSDSORG)
SET  &SXS5 =   &STR(&SYSRECFM)
SET  &SXS6 =   &STR(&SYSLRECL)
SET  &SXS7 =   &STR(&SYSBLKSIZE)
SET  &SXS8 =   &STR(&SYSALLOC)
SET  &SXS9 =   &STR(&SYSUSED)
SET  &SXS10 =  &STR(&SYSPRIMARY)
SET  &SXS11 =  &STR(&SYSSECONDS)
SET  &SXS12 =  &STR(&SYSUNITS)
SET  &SXS13 =  &STR(&SYSEXTENTS)
SET  &SXS14 =  &STR(&SYSCREATE)
SET  &SXS15 =  &STR(&SYSREFDATE)
SET  &SXS16 =  &STR(&SYSEXDATE)
SET  &SXS17 =  &STR(&SYSUPDATED)
SET  &SXS18 =  &STR(&SYSTRKSCYL)
SET  &SXS19 =  &STR(&SYSBLKSTRK)
SET  &SXS20 =  &STR(&SYSADIRBLK)
SET  &SXS21 =  &STR(&SYSUDIRBLK)
SET  &SXS22 =  &STR(&SYSMEMBERS)
SET  &SXS23 =  &STR(&SYSMSGLVL1)
SET  &SXS24 =  &STR(&SYSMSGLVL2)
SET &DSNIN =  &STR(DSN=&SXS1)
IF &SXS12 = TRACK THEN SET &SXS12R = TRK
IF &SXS12 = CYLINDER THEN SET &SXS12R = CYL
IF &SXS12 = BLOCK THEN SET &SXS12R = &SYSDVAL(&SXS10)
SET &DORG  =  &STR(DSORG=&SXS4)
SET &SPAC  =  &STR(SPACE=(&SXS12R
SET &RCFM  =  &STR(RECFM=&SXS5
SET &LREC  =  &STR(LRECL=&SXS6
SET &BLKSZ =  &STR(BLKSIZE=&SXS7
SET &SLS10 = &SYSDVAL(&SXS10)
SET &SLS11 = &SYSDVAL(&SXS11)
SET &SLS20 = &SYSDVAL(&SXS20)
ISPEXEC VPUT (DORG SPAC RCFM LREC BLKSZ) PROFILE
ISPEXEC VGET (DORG SPAC RCFM LREC BLKSZ) PROFILE
SET &CMA = &STR(,)
SET &SP1 = &STR(&SPAC&CMA(&SLS10,&SLS11),RLSE)
SET &RGT = &STR())
SET &L5A = &STR(//          &SP1)&RGT&CMA
SET &L5A = &STR(&L5A&CMA)
SET &L5B = &STR(//          DCB=(&DORG,&RCFM,&LREC,&BLKSZ)
SET &L1 = &STR(//GENR      EXEC PGM=IEBGENER          )
SET &L3 = &STR(//SYSPRINT  DD SYSOUT=*                )
SET &L4 = &STR(//SYSUT1    DD DISP=SHR,DSN=&SXS1&COMMA)
SET &LX = &STR(//          &AVOL                      )
SET &L5 = &STR(//SYSUT2    DD DISP=(,CATLG),UNIT=SYSDA, )
SET &L5C = &STR(//          DSN= <== MODIFY)
SET &L6 = &STR(//SYSIN     DD   DUMMY                    )
ISPEXEC VPUT (L1  L3 L4 L5 L5A L5B L5C L6 LX ) PROFILE
     ISPEXEC VGET L1
       ISREDIT MASKLINE = "&L1"
       ISREDIT LINE_AFTER 0  = MASKLINE
  SET X = 1
     ISPEXEC VGET L3
       ISREDIT (LINEPTR) = LINENUM .ZL
       SET &LINEPTR = .ZLAST
       ISREDIT MASKLINE = "&L3"
       ISREDIT LINE_AFTER 1 = MASKLINE
  SET &X = &X + 1

     ISPEXEC VGET L4
       ISREDIT (LINEPTR) = LINENUM .ZL
       SET &LINEPTR = .ZLAST
       ISREDIT MASKLINE = "&L4"
       ISREDIT LINE_AFTER &X = MASKLINE
IF &VOLX ¬= THEN DO
  SET &X = &X + 1

     ISPEXEC VGET LX
       ISREDIT (LINEPTR) = LINENUM .ZL
       SET &LINEPTR = .ZLAST
       ISREDIT MASKLINE = "&LX"
       ISREDIT LINE_AFTER &X = MASKLINE
  END
  SET &X = &X + 1

     ISPEXEC VGET L5
       ISREDIT (LINEPTR) = LINENUM .ZL
       SET &LINEPTR = .ZLAST
       ISREDIT MASKLINE = "&L5"
       ISREDIT LINE_AFTER &X = MASKLINE
  SET &X = &X + 1

     ISPEXEC VGET L5C
       ISREDIT (LINEPTR) = LINENUM .ZL
       SET &LINEPTR = .ZLAST
       ISREDIT MASKLINE = "&L5C"
       ISREDIT LINE_AFTER &X = MASKLINE
  SET &X = &X + 1

     ISPEXEC VGET L5A
       ISREDIT (LINEPTR) = LINENUM .ZL
       SET &LINEPTR = .ZLAST
       ISREDIT MASKLINE = "&L5A"
       ISREDIT LINE_AFTER &X = MASKLINE
  SET &X = &X + 1

     ISPEXEC VGET L5B
       ISREDIT (LINEPTR) = LINENUM .ZL
       SET &LINEPTR = .ZLAST
       ISREDIT MASKLINE = "&L5B"
       ISREDIT LINE_AFTER &X = MASKLINE
  SET &X = &X + 1

     ISPEXEC VGET L6
       ISREDIT (LINEPTR) = LINENUM .ZL
       SET &LINEPTR = .ZLAST
       ISREDIT MASKLINE = "&L6"
       ISREDIT LINE_AFTER &X = MASKLINE


    ISREDIT JC
ISPEXEC VERASE (L1 L3 L4 L5 L5A L5B L5C L6 LX ) PROFILE
ERROROUT:+
       ISREDIT MASKLINE = ' '
EXIT    CODE(0)
      SET RC = 0
  EXIT CODE(&RC)
  END
