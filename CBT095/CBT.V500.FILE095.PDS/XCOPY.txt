ISREDIT MACRO (DATAII) NOPROCESS
         ISREDIT (DSNAME) = DATASET
SET &DATAID = &STR(&DATAII)
LISTDSI '&DSNAME'
IF &SYSDSORG NE PO THEN +
    DO
      SET &ZEDSMSG = &STR(TARGET NOT A PDS)
      SET &ZEDLMSG = &STR(XCOPY COMMAND ONLY WORKS WHEN USED +
                          WITHIN A DATSET WITH DSORG PO)
      ISPEXEC SETMSG MSG(ISRZ001)
      EXIT CODE(12)
    END
  IF  &SYSDSN(&DATAII) NE OK THEN +
    DO
      SET &ZEDSMSG = &STR(DATASET NOT FOUND)
      SET &ZEDLMSG = &STR(CHECK &DATAII FOR VALID DATASET AND MEMBER +
                          NAME (AND IF THEY EXIST)     )
      ISPEXEC SETMSG MSG(ISRZ001)
      EXIT CODE(12)
    END
SET &RIGHT = )
SET &LEFT = &STR((
SET CTR = 1
SET CTR2 = 0
LOOP: +
IF &CTR GE &LENGTH(&STR(&DATAII)) THEN GOTO FINISH
IF &SUBSTR(&CTR:&CTR,&STR(&DATAII)) = &STR(&LEFT) THEN GOTO END2
SET &CTR = &CTR +1
GOTO LOOP
END2: +
SET &DATAID = &SUBSTR(1:&CTR-1,&STR(&DATAII))
IF &SUBSTR(1:1,&DATAID) = &STR(') THEN SET &DATAID = &DATAID&STR(')
SET &CTR2 = &CTR +1
SET &CTRX = &CTR +1
LOOP2: +
IF &STR(&SUBSTR(&CTR2:&CTR2,&STR(&DATAII))) = &STR(&RIGHT) +
THEN GOTO MAKEMEM
IF &CTR GE &LENGTH(&STR(&DATAII) THEN GOTO FINISH
SET &CTR2 = &CTR2 +1
SET &CTR = &CTR +1
GOTO LOOP2
MAKEMEM: +
SET &CTR2 =  &CTR2 -1
SET &MEM =&SUBSTR(&CTRX:&CTR2,&STR(&DATAII))
FINISH: +
 ISREDIT (WORKDSN) = DATASET
 LISTDSI '&WORKDSN'
 SET &D = &STR('&WORKDSN')
  ISPEXEC  LMINIT DATAID(DD01)  DATASET(&DATAID)  ENQ(SHR)
 ISPEXEC  LMINIT DATAID(DD02)  DATASET(&D)  ENQ(SHR) VOLUME(&SYSVOLUME)
 IF &MEM Â¬= THEN DO
   ISPEXEC  LMCOPY FROMID(&DD01) TOMEM(@@@TEMP) TRUNC REPLACE +
     TODATAID(&DD02) FROMMEM(&MEM)
     IF &LASTCC =8 THEN DO
           SET ZEDSMSG = &STR(MEMBER NOT FOUND)
             SET ZEDLMSG = &STR(&DATAID(&MEM) NOT FOUND)
           ISPEXEC SETMSG MSG(ISRZ001)
           EXIT
          END
 END
 IF &MEM = THEN DO
    ISPEXEC  LMCOPY FROMID(&DD01) TOMEM(@@@TEMP) TRUNC REPLACE +
   TODATAID(&DD02)
END
  ISREDIT PROCESS DEST
  SET &RC = &LASTCC
  IF &RC > 8 THEN DO
  ISREDIT (FIRST) = LINENUM 0
 END
  ISREDIT COPY @@@TEMP AFTER .ZDEST
ISPEXEC LMCLOSE DATAID(&DD01)
ISPEXEC LMFREE DATAID(&DD01)
SET  PDSDSN = &WORKDSN
ISPEXEC  LMINIT DATAID(PDSID) DATASET('&PDSDSN') +
                ENQ(SHRW)                        +
                ORG(PDSORG)
 ISREDIT (WORKDSN) = DATASET
ISPEXEC LMOPEN DATAID(&PDSID) OPTION(OUTPUT)
ISPEXEC LMMDEL DATAID(&PDSID) MEMBER(@@@TEMP)
ISPEXEC LMCLOSE DATAID(&PDSID)
ISPEXEC LMFREE DATAID(&PDSID)

