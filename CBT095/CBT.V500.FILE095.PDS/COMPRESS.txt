ISREDIT MACRO (HELP)
      IF &HELP = ? THEN DO
      ISPEXEC DISPLAY PANEL(COMPRESS)
      EXIT
      END
 ISREDIT (WORKDSN) = DATASET
 LISTDSI '&WORKDSN'
 SET &DSORG = &SYSDSORG
 IF &DSORG NE PO THEN DO
           SET ZEDSMSG = &STR(DATASET MUST BE DSORG PO)
   SET ZEDLMSG = &STR('&WORKDSN' IS DSORG &DSORG ONLY DSORG PO +
                      CAN BE COMPRESSED)
           ISPEXEC SETMSG MSG(ISRZ001)
        EXIT
  END
SET  PDSDSN = &WORKDSN
IF &LIST = LIST THEN CONTROL LIST CONLIST SYMLIST

ISPEXEC  LMINIT DATAID(PDSID) DATASET('&PDSDSN') +
                ENQ(EXCLU)                       +
                ORG(PDSORG)
SET &INITCC = &LASTCC
IF &INITCC ¬= 0 THEN +
   DO
           SET ZEDSMSG = &STR(LMINIT FAILED CODE &INITCC)
   SET ZEDLMSG = &STR('&PDSDSN' IS NOT ALLOCATED OR PARTITIONED)
           ISPEXEC SETMSG MSG(ISRZ001)
      EXIT CODE(8)
   END

SET RET1 = &LASTCC
  ISPEXEC  LMCOMP DATAID(&PDSID)
  SET &COMPCC = &LASTCC
  IF &COMPCC = 0 THEN
    DO
           SET ZEDSMSG = &STR(COMPRESS COND CODE &COMPCC)
             SET ZEDLMSG = &STR('&PDSDSN' SUCESSFULLY COMPRESED)
           ISPEXEC SETMSG MSG(ISRZ001)
    END                   /*      DATA-ID.
  IF &COMPCC = 12 THEN  DO
           SET ZEDSMSG = &STR(COMPRESS COND CODE &COMPCC)
             SET ZEDLMSG = &STR('&PDSDSN' NOT A PDS )
           ISPEXEC SETMSG MSG(ISRZ001)
      END
  IF &COMPCC = 10 THEN  DO
           SET ZEDSMSG = &STR(COMPRESS COND CODE &COMPCC)
             SET ZEDLMSG = &STR('&PDSDSN' NOT A PDS )
           ISPEXEC SETMSG MSG(ISRZ001)
      END
  IF &COMPCC = 20 THEN  DO
           SET ZEDSMSG = &STR(COMPRESS COND CODE &COMPCC)
             SET ZEDLMSG = &STR(UNABLE TO COMPRESS '&PDSDSN')
           ISPEXEC SETMSG MSG(ISRZ001)
      END
IF &RET1 ¬= 0 THEN GOTO EXIT1
ISPEXEC LMCLOSE DATAID(&PDSID)
ISPEXEC LMFREE DATAID(&PDSID)
EXIT
EXIT1: +
IF &INITCC = 8 THEN +
   DO
         ISPEXEC LMCLOSE DATAID(&PDSID)
         ISPEXEC LMFREE DATAID(&PDSID)
      EXIT CODE(0)
   END
ISPEXEC LMCLOSE DATAID(&PDSID)
ISPEXEC LMFREE DATAID(&PDSID)
EXIT
ISPEXEC LMCLOSE DATAID(&PDSID)
ISPEXEC LMFREE DATAID(&PDSID)

