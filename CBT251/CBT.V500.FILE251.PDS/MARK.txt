 /********************* MARK     ISPF EDIT MACRO *********************/
 /* MARK IS AN EDIT MACRO THAT  WILL  'MARK' THE CURRENT MEMBER OF A */
 /* PDS FOR LATER  DELETION  BY  THE  DELMARK  MACRO.   WHEN MARK IS */
 /* EXECUTED IT MARKS THE MEMBER AND THEN TERMINATES THE EDIT OF THE */
 /* CURRENT MEMBER.   THE CURRENT  DATASET  NAME  IS  SAVED WITH THE */
 /* MARKED MEMBER NAMES TO  PREVENT  ACCIDENTIAL DELETION FROM A PDS */
 /* OTHER THAN THE PDS WHERE THE MACRO WAS EXECUTED.                 */
 /*                                                                  */
 /* FOR RAPID HOUSE CLEANING SET A PFKEY TO THE VALUE MARK.          */
 /*                                                                  */
 /* SYNTAX: MARK                                                     */
 /*                                                                  */
 /********************************************************************/

ISREDIT MACRO
ISPEXEC VGET DELDSN PROFILE
IF &DELDSN = THEN DO
ISREDIT (DELDSN) = DATASET
END
IF &DELDSN ¬= THEN DO
ISREDIT (THISPDS) = DATASET
IF &DELDSN ¬= &THISPDS THEN DO
   SET ZEDSMSG = &STR(WRONG DSN)
 SET ZEDLMSG = &STR(YOU HAVE MEMBERS MARKED FOR DELETION IN &DELDSN +
 RUN MARKCLR OR CHANGE TO &DELDSN AND EXECUTE DELMARK)
   ISPEXEC SETMSG MSG(ISRZ001)
   EXIT
  END
END
ISREDIT (THISPDS) = DATASET
IF &DELDSN ¬= &THISPDS THEN DO
   SET ZEDSMSG = &STR(WRONG DSN)
 SET ZEDLMSG = &STR(YOU HAVE MEMBERS MARKED FOR DELETION IN &DELDSN +
 RUN MARKCLR OR CHANGE TO &DELDSN AND EXECUTE DELMARK)
   ISPEXEC SETMSG MSG(ISRZ001)
   EXIT
  END
ISREDIT (DELDSN) = DATASET
ISREDIT (MEM)  = MEMBER
ISPEXEC VGET DELLST PROFILE
SET &DELLST = &STR(&DELLST &STR(&MEM))
SET &DELLAST = &STR(&MEM)
ISPEXEC VPUT (DELLST,DELLAST,DELDSN) PROFILE
   SET ZEDSMSG = &STR(&MEM MARKED)
   SET ZEDLMSG = &STR(&MEM MARKED FOR DELETION BY DELMARK MACRO      +
                        )
   ISPEXEC SETMSG MSG(ISRZ001)
 ISREDIT END
