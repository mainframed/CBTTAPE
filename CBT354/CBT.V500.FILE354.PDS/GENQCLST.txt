PROC 0 DSN() QNAME() DEBUG
CONTROL NOLIST NOCONLIST NOFLUSH
SEND '** USER &SYSUID IS USING THE ENQ CLIST ON &SYSDATE AT &SYSSTIME '
IF &DEBUG = DEBUG THEN CONTROL LIST CONLIST NOFLUSH

IF &STR(&QNAME) = THEN SET QNAME = ALL
IF &STR(&DSN)  ¬= THEN GOTO ROKAY

CLRSCRN
WRITE CMD FORMAT IS "ENQ DSN(...) QNAME(...)
WRITE
WRITE     WHERE DSN CAN BE...
WRITE
WRITE       *   TO GIVE YOU ALL DSNAMES IN USE FOR THE QNAME
WRITE           ..EG..%ENQ DSN(*) WOULD LIST ALL ENQUEUES ON THE SYSTEM
WRITE                 %ENQ DSN(*) QNAME(SYSDSN) WOULD LIST ALL ENQUEUES
WRITE                                           TO QNAME SYSDSN.
WRITE
WRITE      *E   TO GIVE YOU ALL DSNAMES USED WITH DISP=OLD
WRITE           ..EG..%ENQ DSN(*E) WOULD LIST ALL ENQUEUES ON THE SYSTEM
WRITE                 %ENQ DSN(*E) QNAME(SYSDSN) WOULD LIST ALL ENQUEUES
WRITE                                           TO QNAME SYSDSN.
WRITE
WRITE    XXXX   TO GIVE YOU ALL DSNAMES USED STARTING WITH XXXX
WRITE           WHERE XXXX CAN BE ANYTHING UP TO 44 BYTES
WRITE           ..EG..%ENQ DSN(ABC) WOULD LIST ALL DATASETS STARTING
WRITE                               WITH ABC ENQUEUED ON THE SYSTEM
WRITE
WRITE  *JXXXX   TO GIVE YOU ALL DSNAMES USED BY JOB  XXXX
WRITE           ..EG..%ENQ DSN(*JABC) WOULD LIST ALL DATASETS ENQUEUED
WRITE                                 BY JOB ABC, ON THE SYSTEM
WRITE
WRITE THE DEFAULT QNAME IS 'ALL'.
WRITE
WRITE FOR EXAMPLE, THE CMD "ENQ DSN(*J&SYSUID) QNAME(SPFEDIT)"
WRITE WOULD LIST ALL DATASETS YOU ARE USING UNDER SPF
WRITE
WRITE IF THE RESOURCE (DATASET NAME) YOU ENTER DOES NOT GET LISTED,
WRITE IT IS NOT ENQUEUED (IN USE).
WRITE
WRITE NOTE...THIS ONLY SHOWS ENQUEUES FOR THE SYSTEM YOU ARE LOGGED
WRITE        ON TO....EG...THE A1AA, D1DD, ETC.
WRITE
WRITENR ENTER RESOURCE NAME...
READ &DSN
IF &LENGTH(&STR(&DSN)) = 0 THEN EXIT


ROKAY:+
     CLRSCRN
     WRITE CMD IS...TSOEXEC CALL 'SYS9.LOADLIB(GENQ)' 'Q=&QNAME,&DSN'
     WRITE
/* NOTE... TSOEXEC IS USED FOR EXECUTE PROTECTED LIBRARY....*/
     TSOEXEC CALL 'SYS9.LOADLIB(GENQ)' 'Q=&QNAME,&DSN'
     IF &LASTCC ¬= 0 THEN WRITE DATASET NOT ENQUEUED ON THIS SYSTEM...
