THIS PDS CONTAINS THE RMSG SUB-SYSTEM AND SOME JES2 EXITS USED AT
ALLERGAN INC.  AS WITH ALL PUBLIC DOMAIN PROGRAMS, USE THEM AT YOU
OWN RISK.

THE RMSG SUB-SYSTEM IS AN 'AUTOMATIC OPERATOR' SYSTEM THAT MONITORS
AND REACTS TO SELECTED CONSOLE TRAFFIC AND USER WRITTEN COMMANDS.

THE RMSG SUB-SYSTEM RUNS ON MVS/SP AND MVS/XA WITHOUT ANY MODIFICATION.
THE J2SRB01 ROUTINE RUNS ON MVS/SP AND MVS/XA WITHOUT ANY MODIFICATION.

          --------------------- CAUTION -------------------------
          |  DO NOT ACTIVATE J2XIT01 ON A NATIVE MVS SYSTEM.    |
          |  J2XIT01 INVOKES A SRB THAT ISSUES A DIAGNOSE       |
          |  INSTRUCTION.  I LIKE MY JOB, AND THEREFORE HAVE    |
          |  NOT TRIED TO ISSUE THE DIAGNOSE COMMAND ON A       |
          |  NATIVE MVS SYSTEM.                                 |
          -------------------------------------------------------

QUESTIONS? COMMENTS?  CONTACT PAUL BANKS
                              (714) 752-4612.
                              ALLERGAN INC.
                              2525 DUPONT DRIVE
                              IRVINE, CA. 92715

-MEMBER- ------------DESCRIPTION---------------------------------
CMDRMSG  SAMPLE MVS STARTUP COMMANDS ISSUED BY RMSGLOAD
          PLACE THIS MEMBER IN SYS1.PARMLIB.
          THIS IS A LIST OF COMMANDS THAT ARE ISSUED BY RMSGLOAD
          AFTER RMSG IS INITALIZED.  SEE QUITMVS FOR SHUTDOWN COMMANDS
          THE PROC RMSGLOAD REFERS TO THIS MEMBER

COMEIN   ENTRY MACRO FOR SOME ROUTINES
          PLACE THIS MEMBER IN YOUR USER MACLIB

GETOUT   EXIT MACRO FOR SOME ROUTINES
          PLACE THIS MEMBER IN YOUR USER MACLIB

IEFSSN00 SAMPLE SUB-SYSTEM NAME TABLE
          ADD AN ENTRY FOR "RMSG" TO YOUR SUB-SYSTEM NAME TABLE IN
          SYS1.PARMLIB.

JES2PARM SAMPLE JES2 PARMS
          THESE JES2 PARMS ACTIVATE ALL OF OUR JES2 EXITS AND
          STARTS A NJE/NJI LINK BETWEEN MVS AND VM.
          BEWARE OF THE VIRTUAL PRINTER NUMBERS. THEY ARE CRITICAL
          BEWARE OF THE NJE NODE NAMES.

J2SRB01  SRB TO CLOSE VIRTUAL PRINTERS
          THIS SRB ISSUES A DIAGNOSE 8 TO CLOSE VIRTUAL PRINTERS.
          IT IS LOADED BY RMSGLOAD AND ACTIVATED BY J2XIT01.
          THE LOAD MODULE MUST RESIDE IN THE SAME LINKLIB AS RMSG.
          SEE THE //LOADLIB DD IN THE RMSGSUB PROC.
          THE SSVT FOR RMSG IS ALSO THE ANCHOR FOR J2SRB01

J2TBL03  ACCOUNT NUMBER TABLE FOR J2XIT03
          ACCOUNT NUMBER VALIDATION ROUTINE FOR BOTH MVS AND CMS.
          THIS ROUTINE IS LOADED AND CALLED BY J2XIT03.
          THIS ROUTINE, WHEN ASSEMBLED UNDER CMS, CAN BE USED TO
          VALIDATE ACCOUNT NUMBERS.

J2XIT01  JES2 EXIT 1 TO CLOSE VIRTURAL PRINTERS
          THIS ROUTINE KNOWS, BY PRINTER NUMBER, WHICH PRINTERS ARE
          VIRTUAL PRINTERS.  NO ACTION IS TAKEN FOR REAL PRINTERS.
          IF THE ENTRY IS FOR A START BANNER PAGE, A 1 LINE
          BANNER PAGE IS CREATED.
          IF THE ENTRY IS FOR A ENDING BANNER PAGE, THEN THE PRINTER
          ADDRESS (CUU) AND OTHER INFORMATION IS FORMATTED FOR
          J2SRB01 AND J2SRB01 IS CALLED TO SCHEDULE A SRB TO CLOSE
          THE PRINTER.  ENDING BANNER PAGES ARE NOT PRODUCED FOR
          VIRTUAL PRINTERS.

J2XIT02  JES2 EXIT 2 TO MODIFY JOB CARD AND INSERT /*ROUTE CARD.
          1) CHECK FOR STARTED TASKS AND INSERT AN ACCOUNT
             NUMBER IN THE STC JOB CARD.
          2) INSERT A /*ROUTE CARD IF THE JOB CAME FROM THE NJE/NJI
             LINK.

J2XIT03  JES2 EXIT 3 TO VALIDATE ACCOUNT NUMBERS
          THIS ROUTINE LOADS J2TBL03 TO VALIDATE ACCOUNT NUMBERS.
          SELECTED JOB NUMBERS (SEE THE CODE) WILL CAUSE J2TBL03 TO
          BE REFRESHED (RE-LOADED) OR INACTIVATED.

J2XIT04  JES2 EXIT 3 TO MODIFY JCL
          THIS ROUTINE COMMENTS OUT JOBCAT AND STEPCAT CARDS FOR
          SELECTED JOB CLASSES.  IT ALSO ADDS SOME 'OUTPUT' CARDS TO
          ROUTE THE JOBLOG ETC TO THE LOCAL NODE.

J2XIT09  JES2 EXIT 9 TO ENFORCE OUTPUT EXCESSION FOR TEST JOBS
          THIS EXIT WILL ALLOW OUTPUT EXCESSION FOR PRODUCTION JOBS.
          TEST JOBS WILL ABEND WHEN OUTPUT EXCESSION OCCURS.

QUITMVS  A LIST OF COMMANDS TO SHUT MVS DOWN BEFORE AN IPL
          PLACE THIS MEMBER IN SYS1.PARMLIB.
          WHEN THE OPERATOR ISSUES THE COMMAND 'QUIT MVS' THESE
          COMMANDS WILL BE PUT ON THE INTRDR BY RMSG.

RCMD     ISSUE SELECTED JES2 COMMANDS
          WE DON'T WANT OUR PROGRAMMERS ISSUING JES2 OR OPERATOR
          COMMANDS.  RCMD IS USED TO SEND A REQUEST TO RMSG TO
          ISSUE SELECTED COMMANDS.
          RCMD IS PARM DRIVEN AND WILL ISSUE THE FOLLOWING COMMANDS.
           PARM            COMMAND
           SUPRA           $TI10,V        CHANGE INITIATOR CLASS
                           $SI10          START THE INITIATOR.
           RLSE JOBNAME    $A'JOBNAME'    RELEASE A HELD JOB
           REFRESH         F LLA,REFRESH  REFRESH THE LLA FOR XA
            * THE PRODUCTION CONTROL GROUP LINKS ALL PRODUCTION
              PROGRAMS INTO A LINKLIST DATASET.  RCMD WITH THE
              REFRESH PARM IS THE LAST STEP OF THE LKED JOB.
            * IF THE F LLA,REFRESH COMMAND LOOKS A LITTLE STRANGE, IT
              IS BECAUSE WE HAVE MSX IN HOUSE AND ISSUE THE COMMAND ON
              ALL PROCESSORS.  REMOVE THE 'Â¬ALL' AND THE COMMAND
              SHOULD WORK FINE.

          EXAMINE THE CODE FOR ADDITIONAL FEATURES.

RMSG     AUTOMATIC OPERATOR SUB-SYSTEM
          ---------------  CAUTION ------------------------------
          |THIS ROUTINE IS TAILORED FOR THE ALLERGAN INC.       |
          |COMPUTER SYSTEMS.  SEE THE COMMENTS IN THE PROGRAM   |
          |FOR MORE INFORMATION.                                |
          -------------------------------------------------------
          RMSG IS A SUB-SYTEM THAT MONITORS ALL CONSOLE TRAFFIC AND
          REACTS TO SELECTED MESSAGES AND COMMANDS.

          THE SSVT FOR RMSG IS ALSO THE ANCHOR FOR J2SRB01
          RMSG CONTAINS THE FOLLOWING FEATURES:
          1) REPLY TO SELECTED WTOR MESSAGES.
             EX: REPLY 'NOHOLD' TO THE REPLY HOLD OR NOHOLD MSG.
          2) RESPOND TO SELECTED WTO MESSAGES -
             EX: WHEN RMSG SEES  THE 'VTAM ACTIVE' MSG IT WILL
                 START TSO.
          3) ALLOW USER COMMANDS.
             EX: THE COMMAND 'QUIT MVS' WILL ISSUE A SERIES OF
                 COMMANDS TO SHUT DOWN MVS (SEE QUITMVS MEMBER).
                 JES2 WILL BE STOPPED AND A Z EOD WILL BE ISSUED.

RMSGCMD  PROC USED BY RMSG TO WRITE COMMANDS TO THE INTRDR
          PLACE THIS MEMBER IN A PROCLIB

RMSGLOAD INITIALIZE RMSG AND LOAD J2SRB01
         THIS ROUTINE INITALIZES THE RMSG SUB-SYSTEM AND LOADS THE
         J2SRB01 ROUTINE.  IT ALSO READS THE CMDRMSG MEMBER OF
         SYS1.PARMLIB AND PUTS THE COMMANDS ON THE INTRDR.

RMSGSUB  PROC TO RUN RMSGLOAD AND INITALIZE RMSG SUB-SYSTEM
          PLACE THIS MEMBER IN A PROCLIB
          BEWARE OF THE LOADLIB DD CARD.  IT MUST POINT TO THE LINKLIB
          THAT CONTAINS BOTH RMSG AND J2SRB01.
          TO START RMSG ENTER THE COMMAND 'S RMSGSUB'
           WE PUT THIS COMMAND IN CMD00.
          TO REFRESH RMSG AND J2SRB01 ENTER THE COMMAND
          'S RMSGSUB,OPTION=FORCE'.
