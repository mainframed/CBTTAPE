PROC 0 DEBUG
/*--------------------------------------------------------*/
/*      ISPF/PDF CLIST FOR DOING BROWSE OF OBS WYLBUR     */
/*               DATASET (DATA IS COMPRESSED)             */
/*--------------------------------------------------------*/
CONTROL  NOLIST NOFLUSH NOMSG NOPROMPT
IF &DEBUG NE THEN CONTROL LIST NOFLUSH MSG CONLIST SYMLIST PROMPT
IF &SYSPREF  EQ  &STR() THEN +
     DO
     SET &DSPRFX EQ &SYSUID
     END
ELSE +
     IF &SYSPREF  EQ  &SYSUID THEN +
          DO
          SET &DSPRFX EQ &SYSUID
          END
     ELSE +
          DO
          SET &DSPRFX EQ &SYSPREF
          END
ISPEXEC CONTROL ERRORS RETURN
RESTART: ISPEXEC DISPLAY PANEL(OBSL#P)
IF &LASTCC = 8 THEN EXIT
FREE ATTR(FB)
FREE FI(SYSUT2)
SET &MAXCC = 0
SET &LASTCC = 0
ATTR FB RECFM(F B) LRECL(254) BLKSIZE(5080)
SET &NUM = &SUBSTR(8:8,&SYSTIME)
FREE  FI(SYSIN)
SET &LASTCC = 0
SET &MAXCC = 0
ALLOC FI(SYSUT1) DA(&OBSDSN) SHR
IF &LASTCC Â¬= 0  THEN +
    DO
    WRITE
    WRITE &OBSDSN   COULD NOT BE ALLOCATED, SORRY
    WRITE
    FREE ATTR(FB)
    GOTO RESTART
    END
ALLOC FI(SYSUT2) DA('&DSPRFX..TEMP&NUM..OBSLIST') CATALOG +
      SPACE(1 3) TRACKS USING(FB) NEW UNIT(SYSDA)
ERROR  DO
       GOTO WRAPUP
       END
ATTN   DO
       GOTO WRAPUP
       END
CONTROL MSG PROMPT
SET &LASTCC = 0
DOPROGL   WUNPRESS  'NUMBERED'
IF  &LASTCC NE 0 THEN DO
    WRITE OBS  UPRESS ERROR
    GOTO WRAPUP
    END
CONTROL NOMSG PROMPT
ISPEXEC BROWSE  DATASET('&DSPRFX..TEMP&NUM..OBSLIST')
WRAPUP:   +
FREE ATTR(FB)
FREE FI(SYSUT1)
FREE FI(SYSUT2)
ALLOC FI(SYSIN) DA(*)
DEL  '&DSPRFX..TEMP&NUM..OBSLIST'
END
