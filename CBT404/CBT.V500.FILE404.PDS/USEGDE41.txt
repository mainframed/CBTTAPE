       subject: Time Sharing Subsystem        date: February 5, 1985
                Option (TSSO) Systems
                Programming Reference         from: M. A. Schare
                - Case 25820-I0200                  PY 25821
                                                    2C-209 x2796



                           U S E R S   G U I D E



       INTRODUCTION

       This document  provides  a  general  overview  of  the  Time
       Sharing  Subsystem  Option  (TSSO),  a  package  designed to
       increase operator productivity  by  automating  tasks  which
       need  not  be performed manually. TSSO performs its function
       through two integrated components. The Operator Productivity
       Facility   (OPF)  extends  the  power  of  TSO  to  the  MVS
       operator's console, while the Automated Operations  Facility
       (AOF)  enhances  an installation's ability to control system
       events based  on  console  message  traffic.  This  document
       offers   information  on  the  installation  of  TSSO,  TSSO
       parameters, and the use of the two components.

       CURRENT_VERSION

       This document describes the  function  of  TSSO  Version  4,
       Release  1  (TSSO  4.1).  All features described herein will
       continue to work on subsequent versions of the Time  Sharing
       Subsystem  Option  unless  specified  in a future version of
       this document. A description of the  new  features  of  TSSO
       Version   4.1  can  be  found  in  member  RELGUIDE  in  the
       TSSO.VERS41.ASM dataset.

       INSTALLATION

       TSSO is distributed in a single partitioned data set,  which
       contains  all  source modules, procedures and documentation.
       Although this dataset  may  be  called  by  any  name,  this
       document   assumes   a   name   of   TSSO.VERS41.ASM.    The
       installation of TSSO is outlined in the  following  step  by
       step procedure.

         1.  First, download the TSSO.VERS41.ASM dataset  to  DASD.
             About  3  cylinders of 3380 space is required.  If you
             received your copy of the TSSO subsystem from the  CBT
             tape, simply copy it to a dataset by this name. If you
             received a tape, then the TSSO subsystem is in IEBCOPY
             format,  on  the  first  file.   The tape will be non-











                                  - 2 -



             labeled,  so  use  the  LABEL=(1,NL)  parameter   when
             downloading TSSO.

         2.  Next,  create  a   dataset,   TSSO.VERS41.LOAD,   with
             RECFM=U,   LRECL=0,   BLKSIZE=13030,   DSORG=PO.  This
             dataset will be an intermediate  dataset  to  assemble
             TSSO  modules.  Create another dataset, SYS1.TSSOLOAD,
             to contain the TSSO production modules.  This  dataset
             should   have   the   same   DCB   characteristics  as
             TSSO.VERS41.LOAD.

         3.  The next step calls for assembly of  the  TSSO  source
             modules.   A   procedure,  ASMALL,  contained  in  the
             TSSO.VERS41.ASM dataset, has been set up to assist  in
             this  task. TSSO Version 4.1 contains 18 modules to be
             assembled. You will need to EDIT this dataset  to  put
             in   installation   jobcards   and   local  accounting
             information. If you will be running the TSSO subsystem
             on  MVS/370, or both MVS/370 and MVS/XA, the SYSLIB DD
             statement must be  pointing  to  the  SYS1.MACLIB  and
             SYS1.AMODGEN  datasets  for  MVS/370.  If  you will be
             running  the  subsystem  exclusively  on  MVS/XA,  the
             SYSLIB  DD  statement  may point to the XA versions of
             SYS1.MACLIB and SYS1.AMODGEN.

         4.  Copy the load modules from TSSO.VERS41.LOAD  into  the
             production    library   SYS1.TSSOLOAD.   The   library
             TSSO.VERS41.LOAD should remain on  the  system  as  an
             intermediate  library,  to contain assembled TSSO load
             modules, and assembled Automated  Operations  Facility
             tables.

         5.  The SYS1.PARMLIB dataset must be updated with  one  or
             more  TSSO  parameter  decks.  The  default  member is
             TSSOPARM, however, alternate members may  be  selected
             when  TSSO  is  started.  The  next  section  provides
             details on TSSO parameters, and attachment 4 gives  an
             example  of  a TSSO parameter deck. Note that the TSSO
             parameter decks must be located  in  SYS1.PARMLIB,  as
             TSSO will dynamically allocate this dataset.  A sample
             TSSO parameter deck may be found in member SAMPPARM in
             the TSSO.VERS41.ASM dataset.

         6.  TSSO must be identified to MVS as a subsystem. This is
             accomplished  through an entry in the active subsystem
             names table,  member  IEFSSNxx  in  SYS1.PARMLIB.  The
             format of the entry is

             TSSO













                                  - 3 -



         7.  SYS1.TSSOLOAD must be included in the IEAAPFxx  member
             of SYS1.PARMLIB. This allows the TSSO subsystem to run
             APF authorized.

         8.  A procedure for starting TSSO must be included in  the
             SYS1.PROCLIB dataset. Note that TSSO may be started by
             the master scheduler, rather then JES, and  therefore,
             this procedure cannot be in a PROCLIB defined to JES2.
             It must be in  the  SYS1.PROCLIB  dataset.   A  sample
             procedure  for  starting TSSO is in member TSSOPROC in
             the TSSO.VERS41.ASM dataset.

         9.  Some of the TSO commands supplied  with  TSSO  require
             APF   authorization.  Update  the  installation  CSECT
             IKJEFTE2 in load module IKJEFT02 to include the CACHE,
             CPCMD  and  REPLY  commands.  Under TSO/E Release 2.1,
             this CSECT is in the load  module  IKJTABLS.  If  this
             release  of  TSO/E  is  installed,  a separate copy of
             IKJTABLS may be  used  by  TSSO  if  included  in  the
             SYS1.TSSOLOAD dataset.

        10.  The TSSO Automated Operations Facility table(s) should
             be  created  at  this time. Instructions for preparing
             the table are found later in this document.

        11.  If you will be running TSSO with  RACF support, a RACF
             user  id  for  TSSO  should  be  added. In addition, a
             userid of TSSO should be  added  to  SYS1.UADS.   This
             will  allow  TSSO  to  assume the TSO attributes (e.g.
             ACCOUNT,  SUBMIT  or  MOUNT)  that  the   installation
             desires.

        12.  A warm start of MVS must be performed before TSSO  can
             be   used.   The  next  section  describes  what  TSSO
             parameters can be  specified  in  the  TSSO  parameter
             deck. This is only required if TSSO is being installed
             for the first time.

       TSSO_PARAMETERS_AND_INITIALIZATION_PROCESSING

       The use of TSSO parameters provides an installation  with  a
       flexible  mechanism  for  altering TSSO processing. Next, an
       overview of  TSSO  initialization  processing   is  provided
       including  a  description  on  how to specify alternate TSSO
       parameters at startup. Note that  these  parameters  can  be
       entered  in  any order, and if two entries are specified for
       the same parameter, the last entry takes precedence.

         A.  The SRC (System  Recognition  Character)  defines  the
             character   that  TSSO  will  use  to  recognize  TSSO
             operator commands. For example, if this  character  is











                                  - 4 -



             "#",  TSSO  will  intercept  and  process all operator
             commands starting  with  a  "#".  The  syntax  of  the
             parameter is:

             SRC = char

             where char is the character that TSSO  will  use.  The
             default character is a "#".

         B.  The SSSM (Sub System Support Module) parameter defines
             the  module  name  that  TSSO  will  load  to  perform
             subsystem interface requests. The syntax is:

             SSSM = sssmname

             where sssmname is the module name used. This parameter
             should   not   be  specified  under  normal  operating
             conditions. It is useful when testing new versions  of
             TSSO. The default module name is TSSOSSSM.

         C.  The TABLE parameter  defines  the  name  of  the  TSSO
             Automated  Operations  Facility  (AOF)  table. The AOF
             table contains information used  in  the  intercepting
             and   responding   to   operating   system   messages.
             Information describing how to  create  this  table  is
             specified   later  in  this  document.   There  is  no
             default. If this parameter is not specified,  the  AOF
             is  deactivated.  Note that this table can be reloaded
             at any time with the ".RELOAD" TSSO  operator  command
             described later. The syntax of this parameter is:

             TABLE = table-name

             where table-name is the load module name that contains
             a TSSO AOF table.

         D.  The MAXCMDS parameter defines the  maximum  number  of
             concurrent   commands   that   TSSO   will   hold  for
             processing. TSSO processes commands in  the  order  in
             which  they are entered, on a FIFO basis. Any commands
             that are entered  while  TSSO  is  processing  another
             command  are  queued  for  execution.  This  parameter
             defines the size of that  queue.  A  small  number  is
             undesirable  because  it is advantageous to be able to
             enter many TSSO commands at a time, however,  a  large
             number  is undesirable because it becomes difficult to
             detect when a TSSO command may be looping, or awaiting
             terminal input. The syntax of this parameter is

             MAXCMDS=nn












                                  - 5 -



             where nn defines the maximum  number  of  simultaneous
             TSSO  commands.  Note that TSSO requires 256 bytes for
             each command, in the common service  area  (CSA).  The
             default value is 15 simultaneous commands.

         E.  The NONSWAP parameter defines whether  TSSO  will  run
             non-swappable.  If "Y" is entered, TSSO will issue the
             appropriate SYSEVENT to MVS  to  declare  itself  non-
             swappable.  Any  other  entry  will  cause  TSSO to be
             swapped out whenever it has no work.  This  can  cause
             severe   performance   degradation   when   using  the
             subsystem. The default value is  "Y".  The  syntax  of
             this parameter is

             NONSWAP=(Y|N)

             where "Y"  will  mark  the  TSSO  address  space  non-
             swappable.

         F.  The PROMPT parameter provides  a  mechanism  to  alter
             TSSO   processing   without  editing  the  appropriate
             PARMLIB members. The syntax of this parameter is:

             PROMPT=(Y|N)

             If PROMPT=Y is specified, TSSO will enter prompt  mode
             after  processing  all  the parameters in PARMLIB, and
             allow  the  MVS  operator   to   enter   or   override
             parameters.  A  discussion of prompt mode can be found
             below.

         G.  The  RACFID  parameter  allows  the  installation   to
             specify a RACF user identifier for the TSSO subsystem.
             The  TSSO  subsystem  will  then  execute   with   the
             authority  of that RACF userid. This implies that RACF
             commands can be entered from the MVS  console  through
             the  use  of  TSSO.  Note that TSSO does not require a
             password to acquire this RACF authority, and care must
             be taken to assure that use of this parameter does not
             violate installation security standards.   The  syntax
             of this parameter is:

             RACFID=racf-user-id

             where racf-user-id is the RACF  identifier  that  TSSO
             will  assume.  This parameter has no default. If it is
             not specified, TSSO will execute with the default RACF
             authority.  If  the installation has not installed the
             RACF program product, this parameter must be  omitted.
             A  recent  small  programming enhancement (SPE) to the
             JES2 subsystem has enhanced TSSO's ability to  control











                                  - 6 -



             production  batch  jobs  that  may  use RACF protected
             datasets. JES2 will now propagate the userid and group
             from  the  current  address  space  for jobs submitted
             through the internal  reader.  TSSO  can  submit  jobs
             using  the  TSO  SUBMIT  command,  and  those jobs can
             acquire the authority of the TSSO address  space.  Due
             to security considerations, TSSO Release 4.1 or higher
             does not permit the MVS console operator to enter  the
             RACF userid while in PROMPT mode.

         H.  The END parameter marks  the  end  of  TSSO  parameter
             input. The syntax of this parameter is:

             END

             with no operands. If prompt mode was enabled, the  MVS
             console  operator will be prompted for additional TSSO
             parameters after the END parameter is processed.

         I.  The "*" parameter  allows  an  installation  to  place
             comments  in  the  TSSO  initialization deck. The line
             will be ignored by TSSO. The syntax of  the  statement
             is

             * any-text

             where  any-text  is  any  descriptive   comments   the
             installation may want to include in the initialization
             deck.

       TSSO_START_COMMAND_OPTIONS

       TSSO  provides  the  installation  with  a  great  deal   of
       flexibility  at startup time. The following forms of the MVS
       START command may be used to start TSSO.  In  any  of  these
       forms,  the SUB=JES2 parameter may only be specified  if the
       JES2 subsystem is up. Specification of SUB=JES2  allows  the
       TSSO  subsystem  to  use  JES2 services such as PRINTOFF and
       SUBMIT. The SUB=JES2 parameter should be  specified  in  all
       but  emergency situations.  Note that the SUB=JES2 parameter
       is an  MVS  directive  to  direct  processing  of  the  TSSO
       procedure  JCL  to the JES2 subsystem. It is not a parameter
       in the TSSO procedure, and therefore, cannot be overridden.

          o S TSSO,SUB=JES2

            This form of the MVS start command  instructs  TSSO  to
            use  the  default parmlib member of "TSSOPARM" for TSSO
            parameters. Normally,  this  form  of  the  TSSO  start
            command  should  be  used and perhaps executed from the
            JES2 or JES3 initialization deck.











                                  - 7 -



          o S TSSO,PARM=parm-member,SUB=JES2

            where parm-member is an alternate TSSO  parameter  deck
            in  SYS1.PARMLIB.  TSSO will use the alternate deck for
            parameters if this form of the  MVS  START  command  is
            used.

          o S TSSO,PARM='PROMPT',SUB=JES2

            will instruct TSSO to prompt the MVS  console  operator
            for the name of a member in SYS1.PARMLIB to be used for
            parameters. After processing  the  named  member,  TSSO
            will  behave  as if the PROMPT parameter was specified,
            prompting  the  MVS  console  operator  for  additional
            parameters.   Use   of   this   parameter   allows   an
            installation to specify TSSO parameters without  having
            to previously enter them into SYS1.PARMLIB. This can be
            useful in emergency situations.
       If the SUB=JES2 parameter is not used, the MVS operator must
       issue  the  ".J"  TSSO  command  to  allow  TSSO to use JES2
       services.  Although TSSO has not been tested using the  JES3
       product,  the  interfaces should be the same because TSSO is
       using standard subsystem interface calls.

       Prompt mode is entered in one of two  ways.  If  the  PROMPT
       parameter  was specified on the MVS START command, or if the
       PROMPT parameter was specified in  a  PARMLIB  member,  TSSO
       will  prompt  for  additional parameters after processing of
       the PARMLIB  input.  Anything  entered  during  prompt  mode
       processing overrides PARMLIB input. It is recommended that a
       default TSSOPARM member be created for daily processing, and
       that prompt mode be used in emergency situations only.






























                                  - 8 -



       THE_TSSO_OPERATOR_PRODUCTIVITY_FACILITY_(OPF)

       OPF extends the power of TSO to the MVS operator's  console.
       The  facility  allows  for the execution of TSO commands and
       CLISTS from an MVS console, with the response going back  to
       the  invoking  console.  OPF  can  be  used to automate many
       operations procedures.

       Conceptually, TSSO OPF is the addition of TSO  functions  to
       operators  at  MVS  consoles. OPF includes all TSO functions
       which use standard interfaces  (with  the  exceptions  noted
       below).  It  also  includes control functions, unique to the
       TSSO environment, that alter TSSO options and  display  TSSO
       information.  A  special  OUTPUT  monitor redirects selected
       TSSO output to the MVS command subsystem through the SVC  34
       interface,  enabling  TSSO  CLISTS and command processors to
       issue MVS operator commands. These functions  are  described
       below.    The  output  monitor  also  allows  for  hilighted
       messages to be displayed at the MVS console.

       Most TSO commands may be  run  under  control  of  the  TSSO
       subsystem.   The  requirements  for  such  commands  are  as
       follows:

         1.  The command must use standard TSO interfaces,  namely,
             GETLINE and PUTLINE to perform I/O. The command should
             not require input of any kind, other than  normal  TSO
             command parameters.

         2.  The command should not  attempt  to  use  full  screen
             processing   A   command   that  issues  the  STFSMODE
             FULLSCRN=YES macro in ACF/VTAM environments  can  hang
             the TSSO subsystem, forcing a restart.

         3.  The command should be tested before running  it  under
             TSSO.  TSO  assumes  that  TSSO initiated commands are
             running in background  mode,  therefore,  the  command
             should be tested using batch TSO.

       A number of TSO commands that are designed to run  with  the
       TSSO  subsystem  are  distributed  with  the base code. Most
       notable is the REPLY command, providing  the  capability  to
       issue MVS replies to outstanding WTOR's based on message id.
       Other commands  provided  include  the  CACHE  command,  for
       controlling  3880-21 and 3880-23 cache devices, the LINKLIST
       command, for displaying the system LNKLST concatenation, and
       the   VOLSER   and   VALLOC  commands,  for  displaying  UCB
       information for DASD devices.  Also worth mentioning is  the
       CPCMD  command,  that allows an MVS console operator running
       in a virtual machine under VM/SP, VM/SP  HPO  or  the  VM/XA
       migration  aid,  to  issue  CP commands and get the response











                                  - 9 -



       back to the console invoking the command.  A  complete  list
       of these TSO commands may be found later in this document.

       TSSO supports a number of commands that are not directed  to
       the  TMP  for execution. These commands are handled directly
       by TSSO, and are used to  alter  or  query  TSSO  processing
       options.  One  such  command  is  the  ".P" command, used to
       terminate TSSO. The ".P" command, and other control commands
       are documented later in this document.

       TSSO also supports the use of TSO CLISTS. CLISTS may be used
       for  tasks  such  as  displaying  instructions  for  the MVS
       operator, or editing a file. CLISTS under TSSO also have the
       ability   to   issue  MVS  operator  commands.   Since  this
       capability  provides  a   great   deal   of   function   and
       flexibility,  it  will  be  discussed separately in the next
       section.

       THE_TSSO_CLIST_ENVIRONMENT

       Most of the operational benefits  that  are  gained  through
       TSSO/OPF  are  realized  through  the CLIST facility. A TSSO
       CLIST is exactly the same as a CLIST that  a  TSO  user  may
       execute, with one important exception. TSSO scans all output
       lines to be written to the console. Special TSSO  directives
       may  be  inserted  into  the output stream of the TSO CLIST.
       These directives are summarized below.

         A.  The  first  directive,  and  the  most  useful,  is  a
             facility whereby TSSO can issue MVS operator commands.
             When an output line in the SYSTSPRT output stream (the
             output  from the TSO command or CLIST) begins with the
             keyword "*COM", TSSO will  execute  the  remainder  of
             that  statement as an MVS operator command. The effect
             of this processing is the TSSO CLISTS may be  used  to
             issue operator commands. The easiest way to insert the
             "*COM" into the output stream  is  through  the  CLIST
             WRITE  statement.  The  syntax  of this extended write
             statement is as follows.

             WRITE *COMnnn  oscmd

             where

             nnn - is a delay factor. If n is specified as a number
             between  1  and  999,  TSSO will delay n seconds after
             processing the command. This is useful when  operating
             system  commands have a time dependency on each other,
             and

             oscmd- is an MVS operator command to be executed.  The











                                  - 10 -



             command  could be an MVS command, JES command, or even
             another TSSO command. The  command  will  be  executed
             with  the  authority  of  the  console that originally
             invoked the TSSO command.

         B.  The second directive for  which  TSSO  will  scan  the
             output stream for is the "*HI" facility. This facility
             allows the CLIST developer to write hilighted messages
             on the MVS console. The syntax of this directive is

             WRITE *HI message

             where message is the message to be  hilighted  on  the
             MVS  console.  Note that the CLIST WRITE statement can
             be used in its normal form to write  messages  to  the
             console  operator.  This  can  be useful in setting up
             HELP files for the operator.

       The following is an example of a TSSO CLIST  that  automates
       the bringup of VTAM system address spaces.

       PROC 0
       /*********************************************************/
       /* This CLIST will bring up the system address           */
       /* spaces related to VTAM. Note that delays are used to  */
       /* achieve proper timing                                 */
       /*********************************************************/
       WRITE *COM30 S NETWORK    /* START THE NETWORK           */
       WRITE *COM3 S TSO         /* START TCAS                  */
       WRITE *COM $SLOGON1
                                 /* NOTE THAT COMMENTS CANNOT BE*/
                                 /* PLACED ON THE SAME LINE AS  */
                                 /* JES2 COMMANDS               */
       EXEC 'SYS1.TSSOPROC(SLINES)' /* START JES2 LINES         */
       WRITE *HI TSSN001I NETWORK INITIALIZED
                                    /* SEND MSG TO CONSOLE      */
                                    /* AND HILIGHT IT           */
       EXIT

       The following tips are useful when writing TSSO CLISTS.

       All TSSO CLIST processing takes place after  the  CLIST  has
       completed execution (e.g. IKJEFT01 has terminated). The TSSO
       CLIST monitor uses the completed SYSTSPRT output  stream  as
       input.  Care  must  therefore be taken in TSSO CLIST design,
       because any TSO commands in the CLIST  are  executed  before
       any MVS commands are issued by TSSO.

       As stated above, any MVS commands generated by a  CLIST  are
       executed  with the authority of the console that invoked the
       CLIST. This prohibits an INFO-only MCS console, for example,











                                  - 11 -



       from issuing commands with authority.

       CLISTS can use the WRITE statement to generate  messages  to
       the MVS console. This can be useful in writing operator HELP
       procedures as demonstrated in the following CLIST.

               PROC 0
               /********************************************************/
               /* This CLIST will provide HELP information to the      */
               /* operator on the current status of the NJE LINES      */
               /* between JES2 systems                                 */
               /********************************************************/
               WRITE NJE LINK BETWEEN A and B is line 12
               WRITE NJE LINK BETWEEN A and C is line 16
               WRITE NJE LINK BETWEEN B and C is line 20
               WRITE NJE LINK BETWEEN C and A is line 19
               WRITE NJE LINK BETWEEN C and B is line 24
               WRITE NJE LINK BETWEEN B and A is line 13
               WRITE
               WRITE This list is current as of January 3, 1985. For more
               WRITE assistance, contact Alan Grossman at extension 5555.
               EXIT CODE(0)


       The REPLY command is  particularly  useful  in  CLISTS.  For
       example, if numerous NCCF commands are to be executed, these
       can be executed in a TSSO CLIST using the reply command with
       message id DSI802A. See the description of the REPLY command
       later in this document.

       Comments may be placed at the end of  MVS  commands  because
       MVS   treats them as MVS command comments. JES2 treats CLIST
       comments as data, and tries  to  use  them  in  forming  the
       command.  Therefore,  do  not  place  CLIST comments on JES2
       commands. For example, the following CLIST is invalid

       PROC 0
       WRITE *COM $TEXIT6,ENABLE  /* ENABLE THE EXIT */
       EXIT

       and would produce an invalid JES2 command.

       Symbolic substitution  can  be  used  in  TSSO  CLISTS.  The
       following CLIST demonstrates this.


















                                  - 12 -



       PROC 2 UNIT VOLSER USE()
       /*****************************************/
       /* This CLIST will mount MVS volumes     */
       /* using a command is operator friendly  */
       /* syntax. Note the optional PUBLIC      */
       /* parameter.                            */
       /*****************************************/
       WRITE *COM3 VARY &UNIT,ONLINE
       IF &USE = THEN +
       DO
         WRITE *COM MOUNT &UNIT,VOL=(SL,&VOLSER)
       END
       ELSE +
       DO
         WRITE *COM MOUNT &UNIT,VOL=(SL,&VOLSER),USE=&USE
       END
       WRITE *HI MNT001I VOLUME &VOLSER NOW MOUNTED ON &UNIT
       WRITE *COM D U,,,&UNIT,1
       EXIT


       Since operations personnel will  be  using  this  tool,  the
       recommendation  is  to allow them to write their own CLISTS.
       With the exception of the *COM feature, all such CLISTS  can
       be harmlessly tested under TSO.

       TSSO  CLISTS  are  invoked  in  the  same  fashion  as  TSSO
       commands.  The  normal  TSO search sequence is followed. The
       recommendation is to allocate a SYS1.TSSOPROC  dataset,  and
       allocate  it to DDNAME SYSPROC in the TSSO bringup deck. The
       SYSPROC dataset may also be  dynamically  allocated  through
       the  TSSO ALLOCATE command. Lastly, the TSO EXEC command may
       be used to execute TSSO CLISTS.

       Use the TSSO  hilighting  procedure  with  caution.  Do  not
       highlight  messages  unless  their  importance  warrants it,
       because  your  operations  staff  will   learn   to   ignore
       highlighted  messages,  and  this  can  be  harmful  to your
       overall system operations.

       As is becoming  apparent,  the  TSSO  Operator  Productivity
       Facility  is  tremendously  powerful  tool. Many procedures,
       which currently must be done manually, should  be  automated
       using  OPF.  In  conjunction  with  the Automated Operations
       Facility, TSSO provides an installation with  an  impressive
       array  of  operational  enhancements.  The next few sections
       describe the Automated Operations Facility.















                                  - 13 -



       TSSO AUTOMATED OPERATIONS FACILITY

       Introduction

       A high percentage of MVS commands are issued in response  to
       system  or  subsystem  messages,  and  these  responses  are
       predetermined by the contents of  the  messages.   The  TSSO
       Automated  Operations  Facility  (AOF) frees the MVS console
       operator from  routine  tasks  by  automating  responses  to
       system   messages.   AOF  is  a  table-driven  monitor  that
       intercepts messages and carries out  one  of  four  actions:
       suppresses,  highlights, or lowlights the message; or issues
       an MVS, JES2 or subsystem command.   Because  AOF  does  not
       require  the  services of the TSSO address space, any number
       of messages can be processed simultaneously.

       There are three steps required  to  install  this  facility;
       briefly:

         1.  Create the AOF table.

         2.  Assemble and link-edit  the  table  into  load  module
             format.

         3.  Store the module in SYS1.TSSOLOAD.

       These steps are described in detail below.

       Note that the table can be updated at any time.   Also,  you
       may  create multiple tables, although only one can be active
       at a time.  Multiple tables may be useful so that  different
       sets  of  commands  can  be  used  at different times (e.g.,
       first, second and third shifts).  You can change the  active
       table in two ways:

         1.  By changing the  TABLE=  parameter  in  the  parameter
             deck;  the  new  table will be available the next time
             TSSO is brought up.

         2.  By dynamically reloading the table with the "#.RELOAD"
             command; the new table will be available immediately.

       Creating the AOF Table

       There  are  three  macros  required  to  create  the  table:
       TABSTART  to start the table, TABENTRY to specify actions on
       messages, and TABEND to end the table.

       TABSTART is always the first macro and can be specified only
       once.  It takes the form












                                  - 14 -



            loadname TABSTART ID=table-id

       where loadname is the name of this TSSO table  and  table-id
       is  an  eye-catching  name  to identify the table in a dump.
       table-id will also be  displayed  on  the  DISPAOF  and  .QT
       commands.   The loadname label is used as the CSECT name and
       must be used as the load module name.

       TABEND is always the last macro, signifying the end  of  the
       table.   TABEND  must  be  present; otherwise, unpredictable
       things may happen, none of them pleasant.



















































                                  - 15 -



       TABENTRY macros are entered  between  TABSTART  and  TABEND.
       TABENTRY  macros  generate entries in the AOF table and take
       the form

    TABENTRY MSG=msg-id,ACTION=actionÝ,TEXT='operator-cmd'¨Ý,TEST=(condition)¨

       A sample AOF table, demonstrating most of  the  capabilities
       of TSSO/AOF, and all forms of the TABENTRY macro, is located
       in the TSSO.VERS41.ASM dataset in member AOFIVP.

       The MSG Operand

       MSG identifies an MVS, JES2, or subsystem message as defined
       in  MVS/XA  System  Messages  (GC28-1376  and  -1377) or its
       MVS/370 equivalent.  msg-id is  the  first  seven  or  eight
       characters  of  the  console message.  msg-id may also be an
       asterisk (*), which will  match  on  all  console  messages.
       MSG=* is useful with the TEST operand described later.

       The ACTION Operand

       The following actions  may  be  taken  in  response  to  the
       identified message:

         1.  Suppress (i.e., do  not  print)  the  message  at  the
             console.  The macro takes the form

             TABENTRY MSG=msg-id,ACTION=SUPPRESS

         2.  Highlight the message at the console.  This is  useful
             for  highlighting important messages.  The macro takes
             the form

             TABENTRY MSG=msg-id,ACTION=HILIGHT

         3.  Lowlight the message at the  console.   This  reverses
             the  intensity  of MVS messages that are automatically
             highlighted.  The macro takes the form

             TABENTRY MSG=msg-id,ACTION=LOWLIGHT

         4.  Reply  to  a  Write  to  Operator  with  Reply  (WTOR)
             message.  The macro takes the form

             TABENTRY MSG=msg-id,ACTION=REPLY,TEXT='reply-text'

             where reply-text is the text of the reply;  TSSO  will
             automatically  format  the  reply  message  as  R msg-
             no,reply-text.   Note  that  msg-id  must  be  a  WTOR
             message.












                                  - 16 -



         5.  Issue an operator command in response to a message and
             extract  part  of  the  message to use in the command.
             The macro takes the form

             TABENTRY MSG=msg-id,ACTION=OSCMD,TEXT='operator-cmd'

             operator-cmd can be an MVS command, JES2 command, TSSO
             command,  or  TSSO  CLIST.   Rules for coding TEXT are
             described later.

         6.  Print an operator command at the console  rather  that
             execute  it.   this  allows  you  to  test an operator
             command that results from a TABENTRY before  executing
             it.  The macro takes the form

             TABENTRY MSG=msg-id,ACTION=OSCMDT,TEXT='operator-cmd'

             The rules are the same as for OSCMD above.

         7.  Carry out the specified action  if  and  only  if  the
             message  meets  certain conditions, such as matching a
             particular job name.  To do  this,  include  the  TEST
             operand in your TABENTRY macro as follows:

     TABENTRY MSG=msg-id,ACTION=action,ÝTEXT='operator-cmd',¨TEST=(condition)

             where condition  tests  portions  of  the  message  by
             substring  or word.  Rules for coding the TEST operand
             are described later.

             NOTE:  TEXT can only be used if ACTION=OSCMD,  OSCMDT,
                    or REPLY.

       There is no limit on the number of TABENTRY macros that  may
       be  specified  in  a  given  AOF  table. Note that TSSO will
       process all of the entries in the TSSO/AOF table  for  every
       WTO  or  WTOR  message.  This  implies that multiple ACTION=
       specifications may be specified  for  the  same  msg-id,  by
       specifying  multiple  TABENTRY  macros.  TSSO  does not stop
       after processing one ACTION= directive, but continues  until
       the end of the table.

       The TEXT Operand

       The OSCMD action allows you to specify an  operator  command
       to  be  performed  in  response  to  a  particular  message.
       Optionally, you may select  one  or  more  portions  of  the
       message  to  include  in  the  command.   This is useful for
       extracting a data set name,  job  name,  or  other  variable
       information  from  a message and embedding it in the command
       to be executed.  The two  formatting  options  in  the  TEXT











                                  - 17 -



       parameter allow you to extract this information by substring
       or by word.

       To select information by substring, use the format

            \Pnnn,yy\

       where nnn is the starting character position and yy  is  the
       number  of  characters  to select.  For example, suppose you
       want to record the text of /*MESSAGE cards whenever they are
       encountered  in  the  job  stream.   JES2  issues a $HASP104
       message, and you want to capture characters 1 through 72  of
       the card.  Thus, the TABENTRY would look like this:

            TABENTRY MSG=$HASP104,ACTION=OSCMD,TEXT='#RECMSG MSG(''\P001,72\'')'

       Note that nnn must be left-padded with zeroes.

       To select information by word, use the format

            \Wabcdnn\

       where a, b, c, and d define the word  separator  characters,
       and  nn  identifies  the  word's  position.  A word can be a
       maximum of 16 characters.  For example, given the message

            IEF176I WTR 1A4 WAITING FOR WORK...

       you might want to purge the writer 1A4 with the command

            PURGE 1A4

       To do this, you want to extract  the  third  word  from  the
       message,  which  identifies the external writer name.  Thus,
       the TABENTRY macro would look like this:

            TABENTRY MSG=IEF176I,ACTION=OSCMD,TEXT='PURGE \W03    \'

       Note that if you  do  not  need  to  define  four  separator
       characters,  you  must  pad the field with blanks.  Also, nn
       must be left-padded with a zero.

       Multiple "P" and  "W"  options  can  be  used  in  one  TEXT
       operand.  If AOF detects an error in the TEXT parameter as a
       result of  a  P  or  W  option,  a  message  is  issued  and
       processing is terminated.

       The TEST Operand

       The TEST  operand  allows  you  to  respond  selectively  to
       messages  by  "testing" the text.  For example, when payroll











                                  - 18 -



       jobs complete,  you  may  want  to  highlight  the  message,
       whereas  you  want  to ignore other job completion messages.
       The TEST operand allows you to  match  on  message  text  by
       substring or word.

       To match by substring, use the format

            (P,nnn,yy,'literal-string')

       where you want to find the character  string  literal-string
       starting  in  character  position  nnn  for  a  length of yy
       characters.  For example, (P,32,07,'PAYROLL') would look for
       PAYROLL in character positions 32 through 38.

       To match by word order, use the format

            (W,nn,yy,'literal-string','abcd')

       where you want to find the character  string  literal-string
       as  word  number nn with a word length of yy characters; and
       a, b, c, and d define the word  separator  characters.   For
       example,  (W,03,07,'PAYROLL',', ') would look for PAYROLL as
       the third word with seven characters separated by blanks  or
       commas.

       Thus, the whole TABENTRY macro  for  our  example  could  be
       either

            TABENTRY MSG=$HASP395,ACTION=HILIGHT,TEST=((P,32,07,'PAYROLL'))

            or

            TABENTRY MSG=$HASP395,ACTION=HILIGHT,TEST=((W,03,07,'PAYROLL',' ,'))

       It is possible to test  on  all  WTO  or  WTOR  messages  by
       specifying MSG=*.  For example, if you want to highlight all
       JES end-of-day messages, you would test for a first word  of
       $HASP  and  a second word (i.e., job name) of ENDOFDAY.  The
       TABENTRY macro would look like this:

    TABENTRY MSG=*,ACTION=HILIGHT,                                         X
                 TEST=((W,1,5,'$HASP',' '),(W,2,7,'ENDOFDAY',' '))

       Notes on the TEST Operand

         1.  Each TEST  condition,  as  well  as  the  entire  TEST
             parameter list, must be enclosed in parentheses.

         2.  There are multiple way to do the same test,  as  shown
             in  the  examples  above.   However,  it  is generally
             easier to match on words rather than substrings.











                                  - 19 -



         3.  "Logical and" and "logical or" test conditions can  be
             constructed with the TEST operand.

               a.  To construct a "logical and",  specify  all  the
                   conditions to be met in one TEST operand:

                   TEST=((condition1),(condition2),(condition3))

               b.  To construct a "logical  or",  specify  multiple
                   TABENTRY  macros  with the same MSG, ACTION, and
                   TEXT operands but with different TEST operands:

                   TABENTRY MSG=msg-id,ACTION=action,TEST=((condition1))

                   TABENTRY MSG=msg-id,ACTION=action,TEST=((condition2))

                   TABENTRY MSG=msg-id,ACTION=action,TEST=((condition3))

         4.  When using the TEST operand, TABENTRY  macros  can  be
             quite  lengthy.  To continue a macro on the next line,
             enter an "X" in column 72.  Since the  TABENTRY  macro
             follows   the   conventions   for  the  IBM  assembler
             language, the next line in a continuation  must  start
             in  column  16.  Note  that  blank  characters are not
             permitted, except if they are inside quotation marks.





































                                  - 20 -



       Assembling and Link-Editing the Table

       Assemble and link edit your AOF table into load module  form
       by  submitting  a  batch  job  similar  to the sample in the
       TSSO.VERS41.ASM dataset, member ASMTABLE.  You may tailor  a
       copy of this data set to your specifications as follows:

         1.  Include   the    appropriate    installation-dependent
             information on the JOB card.

         2.  change the SYSIN DD card to point to your AOF table.

         3.  Change the load library name in the LKED.SYSLMOD  step
             to one of your choice. (Optional)

         4.  Change  the  NAME  statement  in  the  linkage  editor
             control cards to match the label on the TABSTART macro
             in your AOF table.

       Note that the Assembler parameters RENT and NOALIGN must  be
       present.

       A  return  code  of  0  indicates  that  the  assembly   was
       successful.

       Storing the Module

       When the table assembly is successful, copy the load  module
       from  TSSO.VERS41.load (or the appropriate dataset) into the
       SYS1.TSSOLOAD dataset.  To activate the new AOF  table,  use
       the procedures as described previously in this document.































                                  - 21 -



       T_S_S_O__Command_Reference

       This section of the  TSSO  users  guide  documents  the  TSO
       command  processors  that  are distributed with TSSO. Unless
       otherwise noted, these command processors can be  issued  by
       TSO  users  as well as the TSSO subsystem.  The commands are
       documented, one to a page, for easy insertion into  existing
       operator procedure books.






















































                                  - 22 -



       SPMON_COMMAND

       The SPMON command is used to display system  information  to
       the MVS console operator. The syntax of this command is:


       SPMON  job-parm  type-parm

       where job-parm is a 1-8 character jobname, and type-parm  is
       one of four possible strings, 'JOB', 'STC', 'TSO', or 'ALL'.
       The  command  will  always   display   certain   information
       regardless  of the parameters entered. Information displayed
       is:

         a.  Percentage of CPU busy.

         b.  Average Unreferenced Interval Count (UIC)

         c.  Average Paging Rate.

         d.  Number of TSO users.

         e.  Number of Started tasks

         f.  Number of batch jobs

         g.  Number of inactive initiators
       In addition to the  above  information,  the  SPMON  command
       displays   additional   job  related  information  based  on
       parameters specified. SPMON  determines  the  job  selection
       criteria  through the use of the two parameters. If job-parm
       is  'ALL',  SPMON  will  select  all  jobs  in  the  system,
       otherwise,  SPMON  will only select jobs that begin with the
       character string entered for  job-parm  The  jobs  that  are
       selected  based  on  the  job-parm  parameter may be further
       reduced through the  use  of  the  type-parm  parameter.  If
       type-parm  equals 'ALL', which is the default, the parameter
       has no effect. Otherwise, each selected job must be  of  the
       type  (JOB, STC or TSO) selected by the type-parm parameter.
       After jobs finally pass  the  two  criteria,  the  following
       information is displayed for each job.

         a.  JOBNAME

         b.  Number of service units in current transaction

         c.  Swap-in, Swap-out status

         d.  Number of active frames in real storage

       Some examples may prove informative.











                                  - 23 -



       EXAMPLE ONE

       SPMON BCR

       will display the general system information, in addition  to
       information  about all jobs, TSO users or started tasks that
       start with "BCR".


       EXAMPLE TWO

       SPMON PY TSO

       will display the general system information, in addition  to
       information about all TSO users starting with "PY".


       EXAMPLE THREE

       SPMON

       will display the general system information only.








































                                  - 24 -



       LINKLIST_COMMAND

       The LINKLIST command will display the list of  the  datasets
       in  the  current MVS LNKLST concatenation. The syntax of the
       command is:

       LINKLIST

       There are no parameters. This command is only  valid  in  an
       MVS/XA environment, because the information is not available
       in MVS/370. The command works under both TSO  and  the  TSSO
       Subsystem.


















































                                  - 25 -



       The_VALLOC_and_VOLSER__COMMANDS

       The VALLOC and VOLSER commands demonstrate the power of  the
       TSSO  subsystem.  These commands are used to display UCB and
       ALLOCATION information. The syntax of these commands is:

       VALLOC volume-serial

       VOLSER volume-serial

       where  volume-serial  is  a  six   character   DASD   volume
       identifier.  The command will locate the volume-serial using
       the standard  MVS  UCBSCAN  service,  and  display  the  UCB
       address  and  the  UCB itself. To display UNIT or ALLOCATION
       information, the command uses the TSSO "*COM"  interface  to
       issue  appropriate  MVS  commands. The VOLSER command issues
       the "D U,,,ucb-address,1"  MVS  system  command,  while  the
       VALLOC  command  issues  the  "D U,,ALLOC,ucb-address,1" MVS
       command. The result is an eye-pleasing, informative  display
       to  the  console  operator. The command will also inform the
       MVS operator if the volume-serial is not  found.  Note  that
       while  this command will function under regular TSO, the MVS
       commands are not generated, and the invoker of  the  command
       will  see  the formatted command, "*COM" and all. If volume-
       serial is omitted, the command will display information  for
       the MVS SYSRES (IPL) device. Some examples of the VALLOC and
       VOLSER commands follow.


       EXAMPLE ONE

       VALLOC PPBFX2

       will display the ucb address, and allocation information for
       volume PPBFX2.


       EXAMPLE TWO

       VOLSER SYSRES

       will display the ucb address for volume "SYSRES".


       EXAMPLE THREE

       VOLSER

       will locate, and display ucb information for the MVS  SYSRES
       (IPL) pack.












                                  - 26 -



       REPLY_COMMAND

       The REPLY command is used to  reply  to  MVS  WTOR  messages
       after  the  WTOR has appeared on the MVS console. You do not
       need to know the MVS reply number to respond  to  the  WTOR.
       The  REPLY  command  can,  therefore,  be  used  to automate
       operational procedures with products that communicate to the
       operator  through  the WTOR interface. Such products include
       NCCF, IMS and GDDM. The syntax of the REPLY command is:

       REPLY MESSAGE(msg-id)   TEXT(reply-text)

       where msg-id is  the  message  you  are  replying  to  (e.g.
       DSI802A  or IKT013A) and reply-text is the text of the reply
       you wish to give in response to the WTOR. The REPLY  command
       functions  by  loading  a  module,  REPLYLOA,  into  CSA and
       branching to  it.  This  module  scans  the  Operator  Reply
       Elements (OREs) using Cross Memory Services in search of the
       message id. The ORE contains the proper  reply  number,  and
       the  REPLY  command  will construct and issue the proper MVS
       reply. Once again, the command is only  effective  once  the
       WTOR  has  been  issued.  Contrast  this to the ACTION=REPLY
       directive in TSSO/AOF, which replies to messages the instant
       they  are generated. You can see that TSSO/AOF and the REPLY
       command  combine  to  give  full  coverage   on   automating
       responses to MVS WTORs.


       EXAMPLE 1

       REPLY MSG(DSI802A) TEXT('CLOSE IMMED')

       DSI802A is the message number of the NCCF WTOR. This command
       will effectively shut down the NCCF program product.


       EXAMPLE 2

       REPLY MSG(USRWTO1) TEXT('DISPLAY FIELDS')

       would issue the reply to  a WTOR with  message  id  USRWTO1.
       The text of the reply would be 'DISPLAY FIELDS'.




       There are some installations that run multiple  versions  of
       the IMS/VS program product. All of the copies issue the same
       message id as a WTOR. For these installations, an  alternate
       form  of  the REPLY command exists. The syntax for this form
       of the command is:











                                  - 27 -



       REPLY IMS(ims-id) TEXT(reply-text)

       where ims-id is the system identifier of the  IMS  copy  you
       wish to direct the response to, and reply-text is as defined
       above. The effect of this form of the command is to  provide
       a mechanism for automating IMS procedures. Some examples are
       provided.


       EXAMPLE 3

       REPLY IMS(ZFF) TEXT('/DIS A')

       will perform the IMS command, DISPLAY ACTIVE, on an IMS copy
       genned as ZFF.


       EXAMPLE 4

       REPLY IMS(PRO) TEXT('NRE CHECKPOINT 0 FMT ALL')

       will perform the NRESTART  command  on  the  IMS  copy  with
       system identifier PRO.







































                                  - 28 -



       CACHE_COMMAND

       The CACHE command is useful in controlling the operation  of
       3880-11,  3880-21, 3880-13 or 3880-23 cache devices from the
       MVS console. As distributed by  IBM,  software  support  for
       these  devices  is contained in the IDCAMS program available
       with MVS. The MVS console operator cannot  control  or  even
       query  the  device.  The CACHE command will format an IDCAMS
       command, attach IDCAMS, and  write  the  results  using  the
       PUTLINE interface. When issued under TSSO, these results are
       then displayed on the MVS console. The syntax of  the  CACHE
       command is:

       CACHE (cache-device) ON|OFF|LIST|STATUS   SUBSYS  LEGEND

       where cache-device is either a UCB address of the form  UUU,
       or a six character volume serial representing the device you
       wish information about. The next parameter defines what  the
       CACHE command will do:

         a.  ON- Format the appropriate IDCAMS  command  (SETCACHE)
             to turn the cache unit on.

         b.  OFF- Format the appropriate IDCAMS command  (SETCACHE)
             to turn the cache unit off.

         c.  LIST  format  a  LISTDATA  command   to   list   cache
             statistics  such  as  READ  hit  ratio, and WRITE miss
             ratios.

         d.  STATUS- (default) Provide information  concerning  the
             current status of the cache device.

       The SUBSYS keyword extends the above commands from just  one
       UCB  or VOLSER to the entire 3350 or 3380 string. The LEGEND
       keyword provides a verbose description of the format of  the
       IDCAMS  output and is likely to be inappropriate for display
       at the console.


       There are some commands that you may want to  issue  to  the
       cache  controller  through  IDCAMS that are not supported by
       this command. For these occasions, and alternate form of the
       CACHE command is provided. The syntax is:


       CACHE * CMD('idcams-command')

       where idcams-command is any command accepted by IDCAMS. This
       command  can  be  a  cache  command  such  as BINDDATA, or a
       command that has nothing to do with cache  devices  such  as











                                  - 29 -



       LISTC.


       EXAMPLE 1

       CACHE 263 ON

       will turn the CACHE on for the volume at UCB 263.


       EXAMPLE 2

       CACHE JESSPL OFF

       will turn the volume  JESSPL  off  to  the  cache.  This  is
       probably a good idea.


       EXAMPLE 3

       CACHE PGMPRO ON

       will turn volume PGMPRO on to the cache device.


       EXAMPLE 4

       CACHE PGMPRO

       will provide status information for the cache  covering  the
       volume PGMPRO.


       EXAMPLE 5

       CACHE PGMPRO SUBSYS

       will provide status information for all volumes  covered  by
       the cache covering the volume PGMPRO.


       EXAMPLE 6

       CACHE 265 LIST

       will provide statistics for the cache device at UCB 265.


       EXAMPLE 7

       CACHE * CMD('LISTC')











                                  - 30 -



       will issue the IDCAMS LISTC command, and return the reply to
       the invoking console.




























































                                  - 31 -



       CPCMD_command

       The CPCMD command is designed to provide an MVS operator  of
       a virtual machine with the ability to issue CP commands on a
       VM/SP, VM/SP HPO or VM/XA system.  Any  CP  command  of  the
       appropriate  CP  privilege class is allowed. The response of
       the command is returned to the invoking console. The  syntax
       of this command is:

       CPCMD cp-command

       where cp-command is  any  VM  CP  command.  Note  that  this
       command  will  function under TSO and return the response to
       the CP command to the invoking TSO user.


       EXAMPLE 1

       CPCMD QUERY NAMES

       will issue the  CP  QUERY  NAMES  command,  and  return  the
       response to the invoking console


       EXAMPLE 2

       CPCMD ATTACH 3F0 * 3F0

       will instruct VM to attach the device at 3F0 to the  virtual
       machine configuration at virtual device 3F0. The device must
       also be varied online by the MVS operator. Note that the MVS
       virtual  machine  would  need command privilege class "B" to
       issue this command.





























                                  - 32 -



       DISPAOF_COMMAND

       The DISPAOF command is used  to  display   the  contents  of
       TSSO/AOF  tables.  These tables control the operation of the
       TSSO Automated Operations Facility.  The DISPAOF command can
       query  either the active TSSO/AOF table, or a table that has
       been assembled and is residing on DASD. The  syntax  of  the
       DISPAOF command is

       DISPAOF MSG(msg-id)  TABLE(table-name) TEST

       where msg-id is a 1-8 character message identifier that  was
       specified  in  the TSSO/AOF TABENTRY macro MSG parameter. If
       the msg-id parameter is not specified, DISPAOF will  display
       all  entries in the TSSO/AOF table.  If msg-id is specified,
       the display will be  limited  to  those  messages  with  the
       selected  msg-id.   The  information  displayed includes the
       TSSO/AOF table name, ID parameter, date and time  assembled,
       and TSSO version number. For each message displayed, the MSG
       ID, ACTION directive and ACTION TEXT will be displayed.

       The table-name parameter is used  to  specify  an  alternate
       TSSO/AOF  table  name.  This table must previously have been
       assembled and available to TSSO. This  can  be  achieved  by
       placing   the   table   (in   load  module  form)  into  the
       SYS1.TSSOLOAD  dataset.  If  table-name  is  not  specified,
       DISPAOF  will  use the running TSSO/AOF table (i.e. the same
       table TSSO/AOF is currently using).

       The TEST parameter will expand the information  printed  for
       each  selected message by including any TEST conditions that
       exist for that message.


       EXAMPLE 1

       DISPAOF

       will display the running TSSO/AOF table,  with  all  message
       ids, action directives and action text. The TEST conditions,
       if any, will not be displayed.


       EXAMPLE 2

       DISPAOF MSG($HASP395)

       will display all entries in the running TSSO/AOF table  with
       a message id of $HASP395.













                                  - 33 -



       EXAMPLE 3

       DISPAOF MSG($HASP350) TEST

       will display all entries, and all  test  conditions  in  the
       running AOF table for message id $HASP350.


       EXAMPLE 4

       DISPAOF MSG(IKT021D) TABLE(AOFNEW) TEST

       will display  all  entries,  and  all  test  conditions  for
       message  IKT021D,  however, instead of using the running AOF
       table, DISPAOF will  search  a  table  in  the  load  module
       "AOFNEW".














































                                  - 34 -



       T_S_S_O___Control_Commands

       TSSO has a number of commands that are used to  direct  TSSO
       processing.  All  such commands start with the TSSO SRC. The
       examples below  assume  that  '#'  is  the  TSSO  SRC.   The
       commands are listed below:

         1.  #.RELOAD table-name

             where  table-name  is  a  TSSO  Automated   Operations
             Facility  table.  If  table-name  =  'NONE' the AOF is
             deactivated. If an error occurs while  processing  the
             table,  AOF  is  deactivated.  The  most common errors
             include table-name not found, and table-name not being
             a valid TSSO AOF table.

         2.  #.P

             is  used  to  terminate  the  Time  Sharing  Subsystem
             Option.  TSSO  can  be  restarted through the "S TSSO"
             command as documented above.

         3.  #.J

             is used to request a job  identification  number  from
             the  primary  subsystem. This is required if TSSO will
             be  using  the  primary  subsystems  services.   These
             services include submitting  jobs (with the TSO SUBMIT
             command), and using the PRINTOFF command.   Note  that
             if  TSSO  was  started using the "SUB=JES2" parameter,
             this command will have no effect.

         4.  #.M

             is used to manipulate  the  TSSO  debugging  facility.
             This   command   should   not  be  used  under  normal
             circumstances.

         5.  #.ABEND

             is used  to  abnormally  terminate  the  TSSO  address
             space. This is another TSSO debugging aid which should
             not be used in normal operation.

         6.  #.Q

             is used  to  query  certain  parameters  of  the  TSSO
             subsystem. Individual subcommands are:

               a.  #.QT












                                  - 35 -



                   will return the name of the TSSO AOF table.  The
                   value  specified  on  the  ID  parameter  of the
                   TABSTART macro is also displayed, in addition to
                   the data and time the AOF table was assembled.

               b.  #.QMAXCMD

                   will return the value of the MAXCMDS  parameter,
                   specified at TSSO startup.

               c.  #.QSSSM

                   will return  the  name  of  the  TSSO  subsystem
                   support module.

               d.  #.QSWAP

                   will indicate if TSSO is running non-swappable.

               e.  #.QRACF

                   will return the  name  of  the  TSSO  RACF  user
                   identifier.

               f.  #.QMAXWTO

                   will return the value of the  MAXWTO  parameter,
                   specified at TSSO startup.

               g.  #.QVERS

                   will display the TSSO Version  identifier  (TSSO
                   4.1)  and  the  date  and  times  that the TSSO,
                   TSSOSSSM   and   TSSOWTO   modules   were   last
                   assembled.
             Note that TSSO control commands may be treated exactly
             as  other  TSO commands when used in a TSSO CLIST. For
             example, a CLIST  may  process  directives,  and  then
             perform  a  .RELOAD  command  to  reload  the TSSO/AOF
             table. It is also possible for a CLIST to  consist  of
             nothing but TSSO commands. An example might be a CLIST
             to query all the TSSO parameters.




















                                  - 36 -



       TSSO_Commands_for_Emergency_Procedures

       TSSO operates as a proper subsystem under  MVS.  Because  of
       this,  it  can run without support of a Job Entry Subsystem,
       or communications  subsystem.  This  means  that  TSSO  will
       initialize,  even if JES or VTAM will not. TSSO, through the
       use of several command processors,  provides  facilities  to
       repair  critical  MVS files, or load modules, in the event a
       subsystem does not initialize. The commands  are  summarized
       below:

         a.  The EF command, allows the  MVS  console  operator  to
             perform  TSO  edit  commands  on the file allocated to
             DDNAME 'EDITFILE'. This DDNAME could  have  been  pre-
             allocated  through the ALLOCATE command. The syntax of
             the EF command is as follows:

             EF (;cmd1;cmd2;cmd3...;cmdn)

             where cmdx are TSO EDIT commands.

         b.  The PDS command, a public domain TSO facility, written
             by  Bruce  Leland  from  Hitachi,  provides  for  TSSO
             support. Through the PDS command, it  is  possible  to
             rename,  delete  or  otherwise manipulate members of a
             partitioned  dataset.  The  PDS   command   offers   a
             tremendous  range  of  facilities,  and can be used to
             recover from a wide variety of subsystem problems.

         c.  Lastly,  it  is  possible  to  use  the  standard  TSO
             facilities,  such  as the ALLOCATE command, to correct
             JCL  or   other   initialization   errors   in   major
             subsystems.   The  full  range  of  TSO  commands  are
             available to assist in problem resolution.

       ACKNOWLEDGEMENTS

       The author wishes to thank Bill Godfrey, from  the  Planning
       Research  Corporation,  for his work on the original version
       of TSSO. Although 97% of the code has been replaced in  TSSO
       Release 4.1, the idea of a user written subsystem to process
       TSO commands was his. The author also wishes to  acknowledge
       Bill for the EF command, the original version is still being
       used. The  author  wishes  to  thank  Cheryl  Rahn  for  her
       contribution  of  the CPCMD command.  The author also wishes
       to thank Eileen Saks, for her work on this document, and Len
       Castelli,  for   being  a  sounding  board  on  TSSO design.
       Lastly, the author wishes to thank Bruce Leland  for  adding
       TSSO support in his PDS command.













                                  - 37 -



       CONCLUSIONS

       This document has described the external interfaces  to  the
       Time   Sharing   Subsystem  Option  package.  Any  questions
       concerning TSSO, its uses, or its internal structure, may be
       directed to the author at (201) 981-2796.



       PY-25821-MAS-mas              M. A. Schare

       Copy to
       B. Clair
       W. G. Ferrone
       L. Garcia
       B. L. Howard
       C. P. Lewis
       W. J. Lundy
       S. P. Nathan
       T. P. Senior
       L. M. Szasy
       J. J. Yostpille
       Members: System Software District
       Members: Technical Support District
       District Managers: 25820
       District Managers: 25850




































       Module Descriptions        Page 1               Attachment 1



       This attachment  is  a  brief  summary  of  TSSO  processing
       modules.

         1.  TSSO- The TSSO  mainline  routine.  This  module  gets
             invoked when the MVS START command is issued for TSSO.

         2.  TSSOSSSM- The  TSSO  subsystem  support  module.  This
             module  contains the subsystem interface routines, and
             is LOADED by TSSO.

         3.  TSSOWTO- Is a module that copies the SYSTSPRT file  to
             the  MVS console through the WTO macro. It also issues
             the commands specified through TSSO OPF.

         4.  TSSOESTA- The  TSSO  ESTAE  routine.  This  module  is
             loaded as part of TSSO startup.

         5.  TSSOPARS- Is the TSSO parse routine.  It  is  used  to
             parse PARMLIB input, and to parse MVS console messages
             in support of the  'W' formatting directive in AOF.

         6.  JCECVT- Is the TSSO convert routine.  It  is  used  to
             perform data conversions.

         7.  CACHE- The TSO CACHE command.

         8.  LINKLIST- The TSO LINKLIST command.

         9.  REPLY and REPLYLOA- The TSO  REPLY  command,  and  the
             module it loads into global storage.

        10.  VALLOC- The TSSO VALLOC command.

        11.  VOLSER- The TSSO VOLSER command.

        12.  CPCMD- The TSSO CPCMD command.

        13.  DISPAOF- The TSSO DISPAOF command for  displaying  the
             contents of AOF tables.

        14.  SPMON- The TSSO SPMON command.

        15.  EF- The TSSO EDIT facility command.

        16.  MULT- The TSSO MULT command.

















       Sample AOF Table           Page 1               Attachment 2



       This is the sample AOF table distributed with TSSO in member
       AOFIVP of the TSSO.VERS41.ASM dataset.





       ***********************************************************************
       * THIS IS A SAMPLE AUTOMATED OPERATIONS FACILITY TABLE. IT IS USED AS *
       * PART OF THE TSSO INSTALLATION VERIFICATION PROCEDURE. IT CONSISTS   *
       * OF A SUBSET OF ALL POSSIBLE ENTRIES IN A TSSO/AOF TABLE.            *
       *                                                                     *
       * THIS AOF TABLE CAN BE USED IN CONJUNCTION WITH THE AOF/IVP,         *
       * DISTRIBUTED WITH TSSO.                                              *
       *                                                                     *
       *                                                                     *
       ***********************************************************************
       AOFIVP   TABSTART ID=IVPTABLE
       ***********************************************************************
       * FIRST, A COUPLE OF REPLIES TO STANDARD ANNOYING MVS   MESSAGES.     *
       ***********************************************************************
       *
       ***********************************************************************
       * REPLY '' TO VTAM INITIALIZATION MESSAGE
       ***********************************************************************
                TABENTRY MSG=IST051A,ACTION=REPLY,TEXT=' '
       *
       ***********************************************************************
       * REPLY 'SIC' TO TCAS TERMINATION MESSAGE
       ***********************************************************************
                TABENTRY MSG=IKT010D,ACTION=REPLY,TEXT='SIC'
       ***********************************************************************
       * REPLY 'SIC' TO TCAS TERMINATION MESSAGE
       ***********************************************************************
       *
                TABENTRY MSG=IKT012D,ACTION=REPLY,TEXT='U'
       ***********************************************************************
       * REPLY 'POST' TO IMS BRINGUP ON UCB MESSAGE
       ***********************************************************************
       *
                TABENTRY MSG=IEC804A,ACTION=REPLY,TEXT='POST'
       *
       ***********************************************************************
       * THE NEXT ENTRY POINTS OUT THE HILIGHTING FEATURE. IEE704I IS THE    *
       * MESSAGE ID FOR   REPLY XX IS NOT OUTSTANDING.                       *
       ***********************************************************************
                TABENTRY MSG=IEE704I,ACTION=HILIGHT
       *
       ***********************************************************************
       * THE NEXT ENTRY DEMONSTRATES A POSSIBLE USE FOR THE OSCMD FEATURE.   *
       * IEE043I IS THE MESSAGE YOU GET WHEN A SYSTEM LOG DATASET IS QUEUE   *











       Sample AOF Table           Page 2               Attachment 2



       * TO A GIVEN OUTPUT CLASS. THE #LOGWTRR4 PROGRAM (OR CLIST) CAN BE    *
       * USED TO PROCESS THE LOG DATASET. THE XWTR PROC    CAN ALSO BE USED. *
       * YOU CAN CAUSE THIS TO OCCUR BY ISSUING THE "W Z" COMMAND.           *
       ***********************************************************************
                TABENTRY MSG=IEE043I,ACTION=OSCMD,                            X
                      TEXT='#LOGWTRR4'
       *
       ***********************************************************************
       * WHEN THE LOGWTR PROGRAM TERMINATES, MESSAGE IEF176I IS ISSUED,      *
       * INDICATING THE LOGWTR IS LOOKING FOR WORK. HAVE TSSO PURGE IT OUT.  *
       * NOTE HOW IT USES THE DDD FROM THE MESSAGE TO FIGURE OUT WHAT TO     *
       * PURGE. NOTE THAT THIS WILL WORK FOR ANY EXTERNAL WRITER.            *
       * THIS IS AN EXAMPLE OF "WORD" FORMATTING IN THE TEXT= PARM.          *
       ***********************************************************************
                TABENTRY MSG=IEF176I,ACTION=OSCMD,                            X
                      TEXT='P \W03    \'
       *
       ***********************************************************************
       * THE NEXT EXAMPLE SHOWS POSITIONAL FORMATTING IN THE COMMAND TEXT.   *
       * THE $HASP104 MESSAGE IS ISSUED WHENEVER A //*MESSAGE CARD IS        *
       * ENCOUNTERED IN THE JOB STREAM. THE #RECMSG CLIST MEARLY RECORDS IN  *
       * A DATASET (USING CLIST OPENFILE/PUTFILE/CLOSFILE TECHNIQUES) THE    *
       * TEXT OF THE MESSAGE.                                                *
       ***********************************************************************
                TABENTRY MSG=$HASP104,ACTION=OSCMD,                           X
                      TEXT='#RECMSG JOB(''\P001,72\'')'
       *
       ***********************************************************************
       * ANOTHER EXAMPLE OF THE USE OF THE HILIGHTING FEATURE. HILIGHT THE   *
       * MESSAGE INDICATING THAT VTAM IS UP.                                 *
       ***********************************************************************
                TABENTRY MSG=IST020I,ACTION=HILIGHT
       *
       ***********************************************************************
       * IN ADDITION TO  HILIGHTING THE VTAM INITIALIZATION MESSAGE, ISSUE   *
       * THE #VTAMR4 CLIST. THIS CLIST IS A OPERATOR CLIST THAT ISSUES       *
       * MVS START COMMANDS FOR VTAM DEPENDANT PROGRAM PRODUCT, LIKE NCCF    *
       * AND TSO.                                                            *
       *                                                                     *
       ***********************************************************************
                TABENTRY MSG=IST020I,ACTION=OSCMD,TEXT='#VTAMR4'
       *
       ***********************************************************************
       * DSI802A IS THE NCCF MESSAGE SAYING THAT YOU CAN ISSUE A VALID NCCF  *
       * OPERATOR COMMAND. YOU DO NOT NEED TO KNOW THE MESSAGE NUMBER FOR    *
       * THIS COMMAND, BECAUSE YOU CAN REPLY TO IT USING THE REPLY COMMAND   *
       * SO WE LOWLIGHT THE MESSAGE, AND ALLOW IT TO ROLL OFF THE SCREEN.    *
       * THIS IS AN EXMAPLE OF THE LOWLIGHTING FEATURE.
       ***********************************************************************
                TABENTRY MSG=DSI802A,ACTION=LOWLIGHT
       *











       Sample AOF Table           Page 3               Attachment 2



       ***********************************************************************
       * THIS IS AN EXAMPLE OF A SUPPRESS CONDITION. $HASP309 IS A MESSAGE   *
       * THAT JES2 ISSUES EVERY TIME AN INITIATOR GOES INACTIVE. THIS MESSAGE*
       * IS NOW SUPPRESSED.                                                  *
       ***********************************************************************
                TABENTRY MSG=$HASP309,ACTION=SUPPRESS
       ***********************************************************************
       * WE WILL NOW DISPLAY SOME OF THE POWER OF THE TEST CONDITIONS. THE   *
       * FOLLOWING DEMONSTRATIONS ALL TRAP THE $HASP395 JOB ENDED MESSAGE,   *
       * HOWEVER, THE ACTION= PARAMETER IS EXECUTED ONLY IF ALL CONDITIONS   *
       * FOR THE TESTS ARE MET. FOR EXAMPLE, OUR FIRST CASE WILL ONLY        *
       * HILIGHT THE MESSAGE IF THE JOB THAT HAS ENDED IS NAMED "PAYROLL".   *
       * THIS TEST CASE SPECIFIES THAT (1) WORDS ARE BEING TESTED, (2), THAT
       * IT IS THE SECONDWORD WE ARE INTERESTED IN, (3), WE ARE INTERESTED IN
       * THE FIRST SEVEN CHARACTERS OF THAT WORD, (4), WE WISH TO MATCH THE
       * STRING 'PAYROLL', AND      (5), WE WILL USE FOUR BLANKS AS THE
       * SEPARATOR CHARACTORS WHEN DEFINING A WORD.
       * NOTE THAT THE DOUBLE PARENTHESIS ARE REQUIRED.
       ***********************************************************************
                TABENTRY  MSG=$HASP395,ACTION=HILIGHT,                        X
                      TEST=((W,2,7,'PAYROLL','    '))
       *
       ***********************************************************************
       * THE NEXT ENTRY IS AN EXAMPLE OF A TEST CONDITION BASED ON SUBSTRING,*
       * OR COLUMNS. THE MESSAGE WILL THE JES2 $HAS648 MESSAGE, WHICH IS     *
       * THE RESPONSE TO A $DU,STA. THIS ENTRY WILL SUPPRESS ALL LINES FROM  *
       * THE JES2 RESPONSE THAT ARE SNA LINES (COLS 20 THROUGH 22 = 'SNA'    *
       *                                                                     *
       ***********************************************************************
                TABENTRY  MSG=$HASP628,ACTION=SUPPRESS,                       X
                      TEST=((S,20,3,'SNA'))
       *
       ***********************************************************************
       * THE NEXT ENTRY IS AN EXAMPLE OF A LOGICAL AND CONDITION BETWEEN TEST*
       * CASES. BOTH CRITERIA MUST BE SATISIFED FOR THE TESTS TO PASS.       *
       * THE TEST CASE WILL AN MVS/JES2 JOB AWAITING EXECUTION IN A CERTAIN  *
       * JOB CLASS. THIS ENTRY WILL TAKE A $DN COMMAND, AND ISSUE AN OSCMD   *
       * TO RAISE THE PRIORITY OF JOBS AWAITING EXECUTION IN CLASS 9 TO "15" *
       * (YES, I REALIZE THIS DOESNT MAKE MUCH SENSE, BUT ITS GOOD FOR DEMO  *
       * PURPOSES).
       * NOTE THAT THE THIRD WORD IS CHECKED FOR "AWAITING" AND THE FOURTH   *
       * WORD IS CHECK FOR EXECUTION, AND THE FIFTH WORD IS THE JOB CLASS.   *
       * ALSO NOTE HOW THE SECOND WORD OF THE MESSAGE (THE JOB NAME) IS USED *
       * IN FORMING THE TEXT= OPERAND. OSCMDT WILL BE USED SO THE COMMAND    *
       * DOESNT ACTUALLY GET ISSUED.
       * NOTE ALSO THAT YOU DONT NEED TO SPECIFY FOUR BLANKS- ONE IS         *
       * SUFFICIENT WHEN GENERATING TEST CASES.
       ***********************************************************************
                TABENTRY MSG=$HASP608,ACTION=OSCMDT,                          X
                      TEXT='$T''\W    02\'',P=15',                            X
                      TEST=((W,3,8,'AWAITING','  '),(W,4,9,'EXECUTION','    ')X











       Sample AOF Table           Page 4               Attachment 2



                      ,(W,5,1,'9',' '))
       *
       ***********************************************************************
       * THE LAST CASE IS A GENERIC MESSAGE. THIS MESSAGE IS MATCHED BY      *
       * EVERY SINGLE WTO OR WTOR THAT COME ACROSS, EXCEPT IT MUST STILL     *
       * PASS THE TEST CONDITIONS. THIS EXAMPLE I WILL GIVE HILIGHTS ALL JES *
       * MESSAGES CONCERNING JOB ENDOFDAY.THESE MESSAGES ALL START WITH      *
       * $HASP (WORD 1) AND CONTAIN THE JOBNAME IN WORD 2.                   *
       *                                                                     *
       ***********************************************************************
                TABENTRY MSG=*,ACTION=HILIGHT,                                X
                      TEST=((W,1,5,'$HASP',' '),(W,2,7,'ENDOFDAY',' '))
       ***********************************************************************
       * THIS TABEND MACRO DEFINES THE END OF THE AUTOMATED OPERATIONS       *
       * FACILITY TABLE.                                                     *
       *                                                                     *
       * DO NOT LEAVE THE TABEND MACRO OUT OF THIS ASSEMBLY.                 *
       *                                                                     *
       ***********************************************************************
                TABEND










































       AOF Processing Algorithm   Page 1               Attachment 3



       TSSO Automated Operations Facility- Text Processing
       Algorithm

       This section will describe the algorithm used in forming the
       MVS  operator  commands issued as a result of processing the
       ACTION=OSCMD directive under the TSSO  Automated  Operations
       Facility.  To describe this algorithm, several terms must be
       defined. First, action-text  is  defined  as  the  parameter
       specified in the TEXT operand of the TABENTRY macro. WTOTEXT
       is the text of the console message that was matched  by  the
       MSG  parameter. Therefore, the first 8 bytes of WTOTEXT must
       have matched an entry in the AOF table, as specified by  the
       MSG  parameter.  Lastly, cmd-buffer is defined as the buffer
       that will  be passed to MVS to be executed  as  an  operator
       command.

       The algorithm in forming the command buffer is described  in
       the following paragraphs.

         1.  Copy characters from action-text to  cmd-buffer  until
             no more characters are found, or a '\' is located. The
             '\'  is  defined  as  a  significance  indicator   and
             indicates to AOF that characters or words from WTOTEXT
             are to be copied.  When a  significance  indicator  is
             detected, go to step 2. When no more characters remain
             in  action-text,  pass  the   command   to   MVS   for
             processing, and terminate.

         2.  The  character  after   the   significance   indicator
             determines the type of formatting to be performed. Two
             characters  are   permissible.   The   'P'   directive
             indicates   positional   formatting,   while  the  'W'
             directive indicates word formatting. If the  character
             is  a 'P', go to step 3, if the character is a 'W', go
             to step 4.

         3.  The syntax of  the  positional  formatting  option  is
             defined  here. To use position formatting, the syntax,
             including the leading '\P' must be

             \Pnnn,yy\

             where 'P' indicates positional formatting,  the  'nnn'
             are  numeric  characters  that  specify  the  starting
             position in WTOTEXT, and the 'yy' indicates the number
             of  characters starting from position 'nnn' to copy to
             the command buffer. Thus, it is  possible  to  include
             all  or  part of WTOTEXT in the operator command to be
             issued. For example, if

             \P032,08\











       AOF Processing Algorithm   Page 2               Attachment 3



             was coded, then character positions 32-39  of  WTOTEXT
             would  be  copied  to  cmd-buffer.  The syntax for the
             positional parameter is  very  rigid.  Leading  zeroes
             must  be specified, and the final '\' must be present.
             Processing continues at  step  1  with  the  character
             following the final '\'

         4.  The  syntax  of  the  'word'  formatting   option   is
             described  here.  A  word  is  defined  as a string of
             characters  separated  by  separator  characters.  The
             maximum  size  of  a word is 16 bytes. To use the word
             formatting option, code

             \Wabcdnn\

             where 'W' indicates word formatting, the 'a', 'b', 'c'
             and 'd' specify separator characters to be used in the
             definition of a word, and  'nn'  is  a  numeric  value
             indicating  which  word  to  use. The selected word is
             then copied to cmd-buffer. For example if

             \W=,  03\

             were coded, it would be interpreted  as  follows.  The
             'W'   selects  word  formatting,  and  the  next  four
             characters,  '=', ',', ' ', and ' ' are used  as  word
             separator  characters. In this example, the third word
             is copied from WTOTEXT into cmd-buffer. The syntax  of
             the  'W'  directive if very strict. If you do not need
             four separator characters, you must code blanks (as in
             the  example). The numeric specification must have two
             digits (including a leading zero if required) and  the
             terminating  '\'  is required. Processing continues at
             step 1, with the character  following  the  last  '\'.
             Note  that a word is at most, 16 characters in length,
             and  is  copied  to  cmd-buffer  without  leading   or
             trailing blanks.

       Note that the  formatting  options  are  only  available  if
       ACTION=OSCMD or ACTION=OSCMDT is specified.






















       Sample Parameters          Page 1               Attachment 4



       TSSO_Sample_Parameter_Deck

       This attachment is an actual TSSO parameter deck. This  deck
       is in file SAMPPARM in the TSSO.VERS41.ASM dataset.

       ***********************************************************************
       * THIS IS A TYPICAL TSSO PARAMETER DECK FOR A TYPICAL SYSTEM. THE     *
       * DOCUMENTATION IS   IN "TSSO SYSTEM PROGRAMMERS GUIDE- RELEASE 4.1   *
       * THESE VALUES SHOULD WORK AS DEFAULTS.                               *
       ***********************************************************************
       ************************************************************
       SSSM=TSSOSSSM
       ************************************************************
       * SUB SYSTEM SUPPORT MODULE IS "TSSOSSSM"                  *
       ************************************************************
       NONSWAP=Y
       ************************************************************
       * TSSO WILL BE RUNNING NON-SWAPABBLE                       *
       ************************************************************
       TABLE=AOFR4
       ************************************************************
       * THE TABLE NAME FOR TSSO AOF WILL BE AOFR4                *
       ************************************************************
       RACFID=TSSO
       ************************************************************
       * TSSO WILL ASSUME A RACF USERID OF "TSSO" ON STARTUP      *
       ************************************************************
       SRC=#
       ************************************************************
       * THE COMMAND RECOGNITION CHARACTER IS A POUND SIGN ('#')  *
       ************************************************************
       MAXCMDS=15
       ************************************************************
       * TSSO WILL HANDLE AT MOST 15 SIMULTANEOUS COMMANDS        *
       ************************************************************
       MAXWTO=250
       ************************************************************
       * TSSO WILL ISSUE AT MOST 250 WTOS FOR ANY ONE COMMAND     *
       ************************************************************
       PROMPT=NO
       ************************************************************
       * DO NOT PROMPT THE MVS OPERATOR FOR ADDITIONAL TSSO       *
       * PARAMETERS                                               *
       ************************************************************
       END














