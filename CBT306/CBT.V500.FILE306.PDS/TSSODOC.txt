     ****************************************************************
     *                                                              *
     *         'TSSO' - TSO SUBSYSTEM FOR CONSOLES                  *
     *                                                              *
     ****************************************************************

     WRITTEN BY BILL GODFREY, PLANNING RESEARCH CORPORATION, MCLEAN VA.

     DATE OF LAST CHANGE: JUNE 11 1982.

     THE TSSO SUBSYSTEM ALLOWS MOST TSO COMMANDS TO BE EXECUTED FROM AN
     OPERATOR CONSOLE UNDER MVS, WHETHER JES IS UP OR NOT.

     THIS DOCUMENT BRIEFLY DESCRIBES SOME OF THE FEATURES OF TSSO AND
     HOW TO INSTALL IT.

     TO ENTER A TSO COMMAND ON A CONSOLE, TYPE IN AN AMPERSAND FOLLOWED
     BY THE COMMAND. FOR EXAMPLE:
        &LISTDS 'SYS1.BRODCAST'

     OUTPUT FROM COMMANDS THAT USE 'PUTLINE' WILL BE SENT TO THE
     CONSOLE FROM WHICH THE COMMAND WAS ENTERED.  OUTPUT FROM COMMAMNDS
     THAT USE 'TPUT' OR ACCESS METHODS WILL NOT APPEAR ON THE CONSOLE.

     A MAXIMUM OF 30 LINES OF OUTPUT WILL BE SENT TO THE CONSOLE, TO
     PREVENT WTO BUFFERS FROM FILLING UP.  SEE THE '.L' COMMAND,
     DESCRIBED LATER, FOR A WAY TO HANDLE MORE THAN 30 LINES.

     TO STOP THE SUBSYSTEM, TYPE IN
        &LOGOFF
     OR
        &P

     IF YOUR SYSTEM ALREADY HAS A SUBSYSTEM THAT USES THE AMPERSAND,
     THERE IS A PARM KEYWORD THAT WILL MAKE TSSO USE ANOTHER CHARACTER.

     SINCE THIS IS A SUBSYSTEM, THE NAME OF THE PROC YOU USE TO START
     IT MUST BE IN THE SUBSYSTEM NAME TABLE (CSECT IEFJESNM IN IEEVIPL).

     UNFORTUNATELY, EACH LINE ENTERED HAS NO RELATION TO THE LAST
     COMMAND ENTERED, SO IF YOU TYPE IN THE 'EDIT' COMMAND, THE NEXT
     COMMAND YOU TYPE WILL NOT BE IN 'EDIT' MODE.

     BUT IF YOU TYPE IN AN 'ALLOC' COMMAND, THE ALLOCATION
     WILL STILL BE THERE FOR SUBSEQUENT COMMANDS.

     WE USE A COMMAND CALLED 'EF' TO EDIT DATA SETS
     FROM A CONSOLE.  ITS SYNTAX IS
        EF SUBCOMMAND;SUBCOMMAND;SUBCOMMAND...
     IT USES WHATEVER DATA SET IS CURRENTLY PRE-ALLOCATED
     TO THE FILENAME 'EDITFILE' AND BUILDS AN EDIT COMMAND
     AND STACKS THE EDIT COMMAND PLUS THE SPECIFIED
     SUBCOMMANDS.  FOR EXAMPLE,
        &ALLOC FI(EDITFILE) DA('SYS1.PARMLIB(LNKLST00)') SHR
        &EF V; C /SYS3/SYS4/ ALL;C /SYS2/SYS3/ ALL;SAVE
        &EF V; C /TESTLIB/USERLIB/ ALL;SAVE
     FOR UNNUMBERED DATA SETS, USE 'EFN' INSTEAD OF 'EF'

     WE USE A COMMAND CALLED 'STACK' TO ENTER MULTIPLE
     COMMANDS ON ONE LINE. THE SYNTAX IS:
        STACK COMMAND;COMMAND;COMMAND....

     IN BOTH 'EF' AND 'STACK', IF YOU WANT THE SEMICOLON TO
     BE LEFT IN THE COMMAND AS TEXT, SPECIFY A PAIR OF SEMI-
     COLONS.  THEY WILL BE CONVERTED TO A SINGLE SEMICOLON
     AND NOT TREATED AS A SEPARATOR.

     ON SYSTEMS THAT HAVE THE 'PCF' PRODUCT, 'STACK' AND
     'EF' MAY NOT WORK THE SAME UNDER A REAL TSO SESSION
     AS THEY DO UNDER TSSO, BECAUSE PCF HANDLES SEMICOLONS
     BEFORE 'STACK' AND 'EF' EVER GET CONTROL.

     SINCE THIS IS A SUBSYSTEM AND NOT JUST A STARTED TASK,
     IT WILL RUN FINE EVEN IF JES2 IS NOT UP, ALTHOUGH
     COMMANDS THAT USE SYSOUT WILL NOT WORK.  TSSO IS A
     HANDY TOOL FOR FIXING JES2 PROBLEMS WHEN JES2 IS DOWN,
     OR FIXING TCAM/TSO PROBLEMS WHEN TCAM/TSO IS DOWN.
     SOMETIMES JUST A 'RENAME' OR 'COPY' WILL FIX A PROBLEM,
     AND THATS EASILY DONE FROM TSSO.

     MODULE 'IKJEFT01' (TERMINAL MONITOR PROGRAM)
     IS ATTACHED FOR EACH TSO COMMAND ENTERED.
     DDNAMES REQUIRED: SYSTSIN (DUMMY) AND
     SYSTSPRT (TEMPORARY SYSDA SPACE).

     MODULE 'TSSOWTO' (COPY SYSTSPRT TO CONSOLE)
     IS CALLED AFTER EACH TSO COMMAND IS PROCESSED.

     MODULE 'TSSOSSSM' IS LOADED AND COPIED INTO CSA.
     IT WAS ORIGINALLY REQUIRED TO BE IN LPA, BUT
     THAT MADE MODIFICATIONS AND TEST RUNS FEW AND FAR
     BETWEEN, SO THE CSA ROUTE WAS CHOSEN. TO RE-INSTATE
     THE LPA REQUIREMENT (AND BYPASS THE CSA GETMAIN, ETC)
     JUST CHANGE THE VALUE OF 'LPAOPT' FROM 'C' TO 'L'.

     THE PARM FIELD (OR IF NO PARM, THE REPLY TO WTOR)
     MAY CONTAIN THE FOLLOWING KEYWORDS:
        U           -  NO ACTION, END OF PARMS
        TMP(NAME)   -  THE NAME OF THE TSO TMP TO BE INVOKED.
                       THE DEFAULT IS IKJEFT01.
        CC(XX)      -  THE COMMAND CHARACTER NAME.
                       THE DEFAULT IS CC(AM), AMPERSAND.
                       SEE CCTAB FOR VALID NAMES.
        JES         -  TSSO IS TO REQUEST A STARTED TASK
                       ID FROM JES2 SO IT CAN USE SYSOUT.
        NOJES       -  TSSO IS NOT TO REQUEST AN ID FROM JES2.
                       USE THIS IF JES2 IS NOT UP.
     IF MORE THAN 1 KEYWORD IS SPECIFIED, THEY MUST
     BE SEPARATED BY A COMMA.
     NULL STRINGS SUCH AS TMP() AND CC() ARE VALID AND
     CAUSE THE KEYWORD TO BE IGNORED. THUS YOUR PROC
     CAN HAVE PARM='TMP(&TMP.),CC(&CC.),&JES.JES'

     IN ADDITION TO TSO COMMANDS, TSSO REGOGNIZES COMMANDS
     OF ITS OWN, SUCH AS THE 'L' COMMAND.
     FOR EXAMPLE,
        &L
     WILL REPEAT THE OUTPUT FROM THE LAST COMMAND,
     WHICH HAS BEEN SAVED IN THE SYSTSPRT FILE.
        &L+30
     WILL REPEAT THE OUTPUT FROM THE LAST COMMAND, BUT
     SKIP THE FIRST 30 LINES TO DISPLAY THE NEXT 30.
        &L=4
     WILL REPEAT THE OUTPUT, THIS TIME ON CONSOLE 4.
        &L+30,L=4
     WILL REPEAT THE OUTPUT, ON CONSOLE 4, BUT WILL
     SKIP THE FIRST 30 LINES AND SHOW THE NEXT 30.
        &L SYS1.PROCLIB(JES2)
     WILL INVOKE THE 'L' TSO COMMAND BECAUSE TSSO CAN TELL
     BY THE BLANK AND THE OPERAND THAT YOU WANT THE TSO COMMAND
     AND NOT THE INTERNAL L COMMAND.

     NOTES ABOUT SYSOUT

     THE SSCTUPSS BIT IS A BIT IN EACH SUBSYSTEM'S SSCT THAT
     TELLS STARTED TASK CONTROL WHETHER THE SUBSYSTEM IS
     DEPENDENT ON THE PRIMARY SUBSYSTEM (JES2 OR JES3) FOR
     THINGS LIKE SYSOUT.  THE BIT IS NORMALLY OFF, AND TO USE
     IT YOU MUST HAVE A PROGRAM THAT WILL SET IT ON BEFORE
     THE START COMMAND IS ISSUED FOR THE SUBSYSTEM.

     IF THE SSCTUPSS BIT WAS OFF WHEN TSSO STARTED
     AND YOU DID NOT SPECIFY JES=NO IN THE START COMMAND,
     SYSOUT DATA SETS WILL BE PRINTED UNDER THE BANNER
     'SYSLOG'.  THAT IS CONTROLLED BY JES2 AND CANNOT BE
     CHANGED BY TSSO.

     IF THE SSCTUPSS BIT WAS OFF WHEN TSSO STARTED AND
     YOU SPECIFIED JES=NO IN THE START COMMAND, SYSOUT
     CANNOT BE USED (YOU WILL ABEND IF YOU TRY).

     IF THE SSCTUPSS BIT WAS ON WHEN TSSO STARTED, SYSOUT
     WILL BE PRINTED UNDER THE BANNER 'TSSO' (THE PROC NAME).

     THERE IS A PROGRAM DISTRIBUTED WITH TSSO NAMED TSSOUPSS
     WHICH WILL SET THE SSCTUPSS BIT ON OR OFF AND WILL ISSUE
     A START COMMAND FOR TSSO.

     TO PREVENT 522 ABENDS (WAIT TIME EXCEEDED)
     A SUBTASK IS ATTACHED WHICH JUST WAITS FOR
     A TIMER INTERRUPT OVER AND OVER AGAIN.

     SUGGESTED JCL PROC FOR TSSO

        //TSSO PROC TMP=,CC=,JES=
        //TSSO EXEC PGM=TSSO,REGION=384K,TIME=10,DYNAMNBR=20,
        //          PARM='TMP(&TMP),CC(&CC),&JES.JES'
        //SYSTSIN  DD  DUMMY,DCB=(RECFM=FB,LRECL=80,BLKSIZE=80)
        //SYSTSPRT DD  UNIT=SYSDA,SPACE=(TRK,10),
        //             DCB=(RECFM=VBA,LRECL=137,BLKSIZE=4000)
        //SYSPROC  DD  DSN=SYS1.TSSOPROC,DISP=SHR  (OPTIONAL)

     SUGGESTED JCL PROC FOR SSSO (TO SET UPSS BIT ON AND START TSSO)

        //SSSO PROC BIT=1,S=1,NAME=TSSO
        //SSSO EXEC PGM=TSSOUPSS,PARM='&BIT.&S.&NAME'
        //*         S=0 MEANS DONT ISSUE 'S TSSO'
        //*         NAME IS THE NAME IF THE SUBSYSTEM WHOSE SSCTUPSS
        //*         BIT IS TO BE SET, AND TO BE STARTED.

     RECOMMEND YOU PUT SSSO IN SUBSYSTEM NAME TABLE TOO, BUT THAT
     WOULD ONLY BE NECESSARY IF THE PRIMARY JES WAS DOWN AND THE
     SSCTUPSS BIT WAS ON AND YOU NEEDED TO SET IT OFF (S SSSO,BIT=0)

 *********************************************************************

     TO INSTALL TSSO,

     1) ADD 'TSSO' (AND OPTIONALLY 'SSSO') TO THE SUBSYSTEM NAME
        TABLE.  ONE WAY TO DO THIS IS TO ZAP CSECT IEFJESNM IN
        MEMBER IEEVIPL IN SYS1.LINKLIB.  THERE ARE USUALLY SOME
        BLANK ENTRIES AT THE END OF THE TABLE.  YOU MUST LEAVE
        AT LEAST ONE BLANK ENTRY (4 BYTES) AT THE END OF THE TABLE.

        NOTE: THERE IS NO CODE IN TSSO PROGRAMS THAT DEPENDS ON
        THE SUBSYSTEM BEING NAMED TSSO, SO IF YOU WANT TO USE
        A DIFFERENT NAME JUST PUT YOUR DIFFERENT NAME IN THE
        SUBSYSTEM NAME TABLE AND NAME YOUR PROC WITH THAT NAME.

        IF YOU ALREADY HAVE A NAME IN YOUR SUBSYSTEM NAME TABLE
        THAT YOU ARE NOT CURRENTLY USING, YOU CAN USE IT FOR TSSO
        AND SAVE AN IPL.

        YOU MUST IPL THE SYSTEM FOR THE NEW SUBSYSTEM NAME TABLE
        TO TAKE EFFECT.  CLPA IS NOT NECESSARY.

     2) ASSEMBLE AND LINK THE FOLLOWING MODULES INTO A LINKLIST
        LIBRARY (OR AN AUTHORIZED LIBRARY THAT YOU SPECIFY AS
        A STEPLIB IN THE TSSO AND SSSO PROCS).

        SOURCE MEMBER    LOAD MODULE MEMBER    LINKEDIT ATTRIBUTES
         TSSO             TSSO                  AC=1
         TSSOSSSM         TSSOSSSM              RENT
         TSSOWTO          TSSOWTO               RENT
         TSSOUPSS         TSSOUPSS              AC=1,RENT

        THE TSSO PROGRAM LOADS 'TSSOSSSM' AND 'TSSOWTO', SO IF
        YOU WANT YOUR LOAD MODULES TO HAVE DIFFERENT NAMES YOU
        MUST CHANGE THE CODE IN 'TSSO'.

     3) ADD THE 'TSSO' AND 'SSSO' PROCS TO 'SYS1.PROCLIB'. NO OTHER
        PROCLIB WILL DO IF YOU NEED TO START TSSO WITHOUT JES.
        THE PROCLIB FOR SUBSYSTEMS IS THE PROCLIB IN 'MSTRJCL'.
        SAMPLE PROCS (TSSOPROC AND SSSOPROC) ARE PROVIDED BUT YOU
        MAY WANT TO CHANGE THEM IF YOU DONT HAVE A UNIT NAME VIO
        OR IF YOU WANT A DIFFERENT COMMAND CHARACTER. DONT NAME
        THEM TSSOPROC AND SSSOPROC, JUST TSSO AND SSSO.

     4) START TSSO
        THERE ARE VARIOUS WAYS OF STARTING TSSO.
        THE ONE YOU WILL PROBABLY USE MOST IS
         S SSSO
        THIS WILL SET THE SSCTUPSS BIT ON AND ISSUE A 'S TSSO' COMMAND.

 *********************************************************************

     THIS IS THE TABLE OF VALID NAMES OF COMMAND CHARACTERS
     AND THE CHARACTER EACH NAME STANDS FOR.

     ONE OF THESE CAN BE SPECIFIED IN THE CC PARAMETER OF THE PARM
     FIELD TO DEFINE THE COMMAND CHARACTER TO TSSO.

CCTAB    DC    CL3'AM&&'           AM = AMPERSAND
         DC    CL3'HY-'            HY = HYPHEN
         DC    CL3'AT@'            AT = AT SIGN
         DC    CL3'PO#'            PO = POUND SIGN
         DC    CL3'CA,'            CA = COMMA
         DC    CL3'PE.'            PE = PERIOD
         DC    CL3'SL/'            SL = SLASH
*              ON OUR KEYBOARDS THE FOLLOWING CHARACTERS ARE
*              LESS CONVENIENT BECAUSE THEY NEED THE SHIFT KEY.
         DC    CL3'EQ='            EQ = EQUAL
         DC    CL3'LT<'            LT = LESS THAN
         DC    CL3'SC;'            SC = SEMICOLON
         DC    CL3'CN:'            CN = COLON
         DC    CL3'PC%'            PC = PERCENT
         DC    CL3'AP'''           AP = APOSTROPHE (QUOTE)
         DC    CL3'GT>'            GT = GREATER THAN
         DC    CL3'AS*'            AS = ASTERISK (JES3 USES THIS)
         DC    CL3'LP('            LP = LEFT PAREN
         DC    CL3'RP)'            RP = RIGHT PAREN
         DC    CL3'UB_'            UB = UNDERLINE BAR
         DC    CL3'PL+'            PL = PLUS
         DC    CL3'NTÂ¬'            NT = NOT SIGN
         DC    CL3'QM?'            QM = QUESTION MARK
         DC    CL3'VB|'            VB = VERTICAL BAR
         DC    CL3'EP!'            EP = EXCLAMATION POINT
         DC    CL3'DQ"'            DQ = DOUBLE QUOTES
         DC    AL3(0)              RESERVED FOR ZAP
         DC    XL3'FFFFFF'         END OF TABLE
