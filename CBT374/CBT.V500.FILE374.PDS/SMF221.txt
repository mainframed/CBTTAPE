//ED115DMA JOB EDPCSBS1,MSGCLASS=X,CLASS=3,NOTIFY=ED115DM
//*
//*    SEE SMF 220
//*
//*    DO NOT KNOW WHERE 221 RECORDS COME FROM
//*    BUT THE FOLLOWING GETS SOME USEFUL DATA FROM THEM.
//*
//*    IT WOULD APPEAR THEY ARE TO DO WITH HSM ACTIVITY.
//*    REQ. MANUALS SH35-0083-2 OR SH19-6737-1
//*
//  EXEC SAS606
//*ATLIB DD DSN=EDH1.PROD.SMFDUMPW.HOLD,DISP=SHR
//DATLIB DD DSN=ED115DM.PROD.SMFDUMPW,DISP=SHR
//*ATLIB DD DSN=SYS1.MAN1,DISP=SHR
//SYSIN DD *
DATA SMF221 (KEEP =
     TIMEOUT JOB OWNER DATASET V1 V2 V3
                  );
  RETAIN V;
  INFILE DATLIB JFCB=JF MISSOVER LENGTH=LEN;
  IF _N_ = 1 THEN DO;
                  INPUT @;
                  IF INDEX(JF,'SYS1.MAN') Â¬=0 THEN V=4; ELSE V=0;
                  END;
  IF V=4 THEN
      INPUT    SMFXXLEN PIB2. SMFXXSEG PIB2. @ ;
  INPUT    SMFXXFLG PIB1. SMFXXRTY PIB1.
                       @;
  IF SMFXXRTY = 212 THEN DO;
                        *PUT '212 DETECTED - SKIPPING';
                         DELETE;
                         END;
  INPUT    TIMEOUT SMFSTAMP8.
      SMFXXSID $CHAR4. @;
  IF SMFXXRTY = 221;
 INPUT @15 JOB $CHAR8.  @31 OWNER $CHAR7.
       @41 DATASET $CHAR44. @;
 INPUT @85 V1 $CHAR6.  @95 V2 $CHAR6.   @297 V3 $CHAR6. ;
       ;
RETURN;
PROC PRINT;
FORMAT TIMEOUT DATETIME.;
