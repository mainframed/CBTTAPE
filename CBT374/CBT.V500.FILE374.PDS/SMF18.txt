//E0115DMS JOB EDPCSBS1,'REND',MSGCLASS=X,CLASS=L,NOTIFY=ED115DM
//*
//SAS     EXEC EDSAS607,OPTIONS=NODATE
//DATLIB  DD DSN=EDH1.PROD.SMFDUMPW.HOLD,DISP=SHR
//*       DD DSN=C4H1.PROD.SMFDUMPW,DISP=SHR
//*ATLIB  DD DSN=EDH1.PROD.SMFHIST.JUN93.COPY1,DISP=SHR
//*ATLIB  DD DSN=SYS1.MAN2,DISP=SHR
//*       DD DSN=SYS1.MAN1,DISP=SHR
//SYSIN   DD *
TITLE SMF 18;
  DATA _NULL_;
  IF _N_=1 THEN DO;
                PUT _PAGE_;
                PUT '****** SMF 18 ******';
                PUT 'RENAME DATASET STATUS';
                PUT;
                END;
  RETAIN V;
  INFILE DATLIB JFCB=JF MISSOVER LENGTH=LEN;
  IF _N_ = 1 THEN DO;
                  INPUT @;
                  IF INDEX(JF,'SYS1.MAN') Â¬=0 THEN V=4; ELSE V=0;
                  END;
  IF V=4 THEN
      INPUT    SMFXXLEN PIB2. SMFXXSEG PIB2. @ ;
  INPUT    SMFXXFLG PIB1. SMFXXRTY PIB1.
                       @;
  IF SMFXXRTY = 212 THEN DO;
                        *PUT '212 DETECTED - SKIPPING';
                         DELETE;
                         END;
  INPUT    TIMEOUT SMFSTAMP8.
      SMFXXSID $CHAR4. @;
  IF SMFXXRTY = 18;
PUT @1 TIMEOUT DATETIME. @;
INPUT SMF18JBN $CHAR8.   SMF18RS SMFSTAMP8.   SMF18UID $CHAR8.
      SMF18RIN PIB2.     SMF18ODS $CHAR44.    SMF18NDS $CHAR44.
      SMF18RV1 PIB3.     SMF18NVL PIB1. @;
  PUT +1 SMF18JBN $8.  +1   SMF18RS DATETIME. +1 SMF18UID $8. ;
  PUT               SMF18ODS $44. +2 SMF18NDS $44. +9
                         SMF18NVL 6.     +9 @;
DO I=0 TO (SMF18NVL-1);
      INPUT SMF18RV2   PIB2.   SMF18FVL $CHAR6. @;
        PUT                 +1 SMF18FVL $6.  ;
END;
DELETE;
