//C4SYSDMT JOB C4SYS000,'SMF6',MSGCLASS=X,CLASS=Q,NOTIFY=C4SYSDM
//*
//*MAIN PROC=C4
//SAS     EXEC EDSAS609,OPTIONS=NODATE
//*ATLIB  DD DSN=SYS1.MAN2,DISP=SHR
//DATLIB  DD DSN=SYS1.MAN1,DISP=SHR
//*ATLIB  DD DSN=C4H1.PROD.SMFDUMPW.HOLD,DISP=OLD
//SYSIN   DD *
TITLE SMF 6;
  DATA;
  RETAIN V;
  INFILE DATLIB JFCB=JF;
  IF _N_ = 1 THEN DO;
                  INPUT @;
                  IF INDEX(JF,'SYS1.MAN') Â¬=0 THEN V='Y'; ELSE V='N';
                  END;
  IF V='Y' THEN
      INPUT    SMFXXLEN PIB2. SMFXXSEG PIB2. @ ;
  INPUT    SMFXXFLG PIB1. SMFXXRTY PIB1.
                       @;
  IF SMFXXRTY = 212 THEN DO;
                        *PUT '212 DETECTED - SKIPPING';
                         DELETE;
                         END;
  INPUT TIMEOUT SMFSTAMP8.
      SMFXXSID $CHAR4. @;
  DTE = DATEPART(TIMEOUT);
  TME = TIMEPART(TIMEOUT);
  INFILE DATLIB;
  IF SMFXXRTY = 6;
  INPUT     SMF6JBN $CHAR8. SMF6RST PIB4. SMF6RSD PD4. SMF6UIF $CHAR8.
            SMF6OWC $CHAR1. SMF6WST PIB4. SMF6WSD PD4. SMF6NLR PIB4.
            SMF6IOE PIB1.   SMF6NDS PIB1. SMF6FMN $CHAR4.
            SMF6PAD1 PIB1.  SMF6SBS PIB2. SMF6LN1 PIB2.
            SMF6DCI PIB2.   SMF6JNM $CHAR4. SMF6OUT $CHAR8.
            SMF6FCB $CHAR4. SMF6UCS $CHAR4. SMF6PGE PIB4.
            SMF6RTE PIB2.
            ;
RETURN;
PROC PRINT;
FORMAT DTE     DATE.;
FORMAT TME     TIME.;
FORMAT TIMEOUT DATETIME.;
