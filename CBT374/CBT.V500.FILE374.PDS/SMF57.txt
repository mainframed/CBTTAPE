//E0115DMS JOB EDPCSBS1,'SASD',MSGCLASS=X,CLASS=1,NOTIFY=ED115DM
//*
//SAS     EXEC SAS,OPTIONS=NODATE
//DATLIB  DD DSN=SYS1.MAN1,DISP=SHR
//SYSIN   DD *
TITLE SMF 57;
  DATA;
  RETAIN V;
  INFILE DATLIB JFCB=JF MISSOVER;
  IF _N_ = 1 THEN DO;
                  INPUT @;
                  IF INDEX(JF,'SYS1.MAN') ¬=0 THEN V=4; ELSE V=0;
                  END;
  IF V=4 THEN
      INPUT    SMFXXLEN PIB2. SMFXXSEG PIB2. @ ;
  INPUT    SMFXXFLG PIB1. SMFXXRTY PIB1.
                       @;
  IF SMFXXRTY = 212 THEN DO;
                        *PUT '212 DETECTED - SKIPPING';
                         DELETE;
                         END;
  INPUT    TIMEOUT SMFSTAMP8.
      SMFXXSID $CHAR4. @;
  IF SMFXXRTY = 57;
  INPUT SMFSSRSV   PIB2. SMFSSLEN PIB2.    @ ;
    PUT SMFXXRTY +5 TIMEOUT DATETIME. +5 SMFXXSID +5
  SMFSSRSV   +5    SMFSSLEN ;
  IF SMFSSLEN ¬= 0 THEN DO;
  INPUT SMF57JID $CHAR8.
        SMF57CJD $CHAR8. SMF57ONN $CHAR8.  SMF57ENN $CHAR8.
        SMF57NNN $CHAR8. SMF57DVN $CHAR8.  SMF57TSS PIB4.
        SMF57DSS PD4.    SMF57TPS PIB4.    SMF57OPS PD4.
        SMF57ACN $CHAR8. SMF57SID $CHAR4.  SMF57CNT PIB4.
   @ ;
    PUT SMFSSRSV   +2    SMFSSLEN   +2     SMF57JID    +2
        SMF57CJD   +2    SMF57ONN   +2     SMF57ENN    +2
        SMF57NNN   +2    SMF57DVN   +2     SMF57TSS    +2
        SMF57DSS   +2    SMF57TPS   +2     SMF57OPS    +2
        SMF57ACN   +2    SMF57SID   +2     SMF57CNT
     ;
  END;
