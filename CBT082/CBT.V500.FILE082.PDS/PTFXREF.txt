1                                                             PAGE    1












                         PFXREF VERSION IV-B





                    A LOAD MODULE MAPPING PROGRAM





                        THIS WRITE-UP REVISED





                             APRIL 3,1975


1PFXREF: A LOAD MODULE MAPPING PROGRAM                        PAGE    2


                             INTRODUCTION


    PFXREF IS ANOTHER METAMORPHOSIS OF THE NUCREF PROGRAM (WHICH BECAME
 THE LMODMAP PROGRAM, AND IS NOW THE TYPE I SERVICE AID AMBLIST). IT IS
 AND  ALIAS  FOR,  AND AN INTEGRAL PART OF, THE PFAULT PROGRAM (QV). IT
 PRODUCES  OUTPUT  SUITABLE AS INPUT TO BOTH THE PULL PROGRAM (QV), AND
 THE TPATH PROGRAM (QV).

    SINCE  IT  IS  BASED  UPON  NUCREF  AND NOT AMBLIST, IT HAS CERTAIN
 RESTRICTIONS  THAT AMBLIST DOES NOT. EG, IT DOES NOT MAP A LOAD MODULE
 THAT  IS  IN OVERLAY FORMAT IN THE SAME MANNER AS DOES AMBLIST; IE, IT
 RECOGNIZES THAT THE LOAD MODULE IS IN OVERLAY, BUT IT DOES NOT SEGMENT
 THE  OUTPUT  AS DOES AMBLIST. HOWEVER, IT WILL GIVE SEGMENT NUMBERS IN
 ITS OUTPUT. THIS IS NOT A SERIOUS RESTRICTION AS PFXREF IS DESIGNED TO
 MAP  THE  NUCLEUS  AND MODULES IN THE FIXED, MODIFIED, AND/OR PAGEABLE
 LINK PACK AREA.

    ANOTHER  RESTRICTION  IS  PFXREF'S USEAGE OF CORE. TO KEEP THE CESD
 ITEMS IN CORE, IT DOES A VARIABLE CONDITIONAL GETMAIN FOR 64K (THIS IS
 SPLIT INTO TWO 32K BUFFERS); IF IT CANNOT GET ALL CESD ITEMS INTO THIS
 AMOUNT  OF CORE, IT DOUBLES THIS AND TRIES AGAIN. IF 128K IS STILL NOT
 ENOUGH, IT TERMINATES PROCESSING OF THE CURRENT CONTROL CARD.

    TO  DO ITS SORTS (BOTH THE CESD ITEMS AND THE CRLD ITEMS ARE SORTED
 BY ADDRESS AND ALPHABETICALLY), IT DOES VARIABLE CONDITIONAL GETMAIN'S
 FOR  40K;  IF  IT  CANNOT  OBTAIN  ANOTHER 40K BLOCK WHEN REQUIRED, IT
 TERMINATES.  SINCE  IT IS AN INTEGRAL PART OF PFAULT, THESE 40K BLOCKS
 ARE  RETAINED  FROM  ONE CONTROL CARD TO THE NEXT - THEY ARE PASSED TO
 PFAULT WHEN PFXREF HAS FINISHED PROCESSING.

    CURRENTLY, THESE TWO RESTRICTIONS ON CORE SIZE DO NOT SEEM TO CAUSE
 SERIOUS  PROBLEMS - TWO 400K NUCLEI, WITH APPROXIMATELY 1200 ESD ITEMS
 APIECE, WERE MAPPED SUCCESSFULLY IN LESS THAN 500K.

    CURRENTLY,  PFXREF  DOES NOT GIVE ANY DATA ON THE AMOUNT OF CORE IT
 HAS USED FOR BUFFERS AND SORTING.

    PFXREF  RUNS  AS A PROBLEM PROGRAM UNDER VS AND REQUIRES NO CHANGES
 TO BE MADE TO VS.

    PFXREF  MAY  BE  INVOKED  IN  THE  STANDARD WAY, PASSING PARAMETERS
 AND/OR ALTERNATE DDNAME'S...SEE THE UTILITIES SRL.


1PFXREF: A LOAD MODULE MAPPING PROGRAM                        PAGE    3


    JCL REQUIRED TO EXECUTE PFXREF IS STANDARD DATASET UTILITY JCL:

      //STEPNAME EXEC PGM=PFXREF
      // <,PARM='LINES=|L=NNN,NOEND,KVT|NOEP|EPS'>
      // <,REGION=XXXXK>
      //SYSUT2 DD SYSOUT=C<,DCB=BLKSIZE=BBBBB>
      <//SYSPUNCH DD SYSOUT=B<,DCB=BLKSIZE=PPPPP>>
      <//SYSOUT DD SYSOUT=B<,DCB=BLKSIZE=PPPPP>>
      <//STEPLIB DD DSN=D89MSC1.SIMMON.LOAD,DISP=SHR>
      //SYSLIB DD DSN=DSNAME,DISP=SHR<,DCB=BLKSIZE=ZZZZZ>
      //SYSIN DD *<,DCB=BLKSIZE=SSSSS>
      <//SYSIN2 DD *<,DCB=BLKSIZE=SSSSS>>

      WHERE:

           NNN  (LINE  COUNT) IS ANY NUMBER FROM 10 THRU 999. THIS WILL
                BE  USED  TO  SET  THE LINE COUNT PER PAGE. THE DEFAULT
                LINE COUNT IS 56.

                NOTE:

                      IF  AN  INVALID  LINE  COUNT  IS PASSED TO PFXREF
                           (LESS  THAN  10  OR  GREATER  THAN 999), THE
                           DEFAULT  LINE  COUNT  (56)  WILL BE USED. AN
                           ERROR MESSAGE WILL BE ISSUED; IT WILL APPEAR
                           IN THE USER'S JCL.

           NOEND THIS SPECIFIES THAT PFXREF SHOULD NOT PRODUCE THE 'END
                OF MODULE' CARD IN THE PUNCHED OUTPUT (SEE APPENDIX I).

           KVT THIS SPECIFIES THAT PFXREF SHOULD PRODUCE PUNCHED OUTPUT
                SIMILAR TO THE NUCPUNCH PROGRAM (QV), ALSO SEE APPENDIX
                I.

           NOEP  THIS  SPECIFIES  THAT  ENTRY POINT CARDS SHOULD NOT BE
                PUNCHED.

           EPS  THIS  SPECIFIES  THAT  ONLY ENTRY POINT CARDS SHOULD BE
                PUNCHED.

           C  (SYSOUT  CLASS)  IS ANY ALPHA CHARACTER FROM A THRU Z, OR
                ANY NUMERIC CHARACTER FROM 0 THRU 9.

                NOTE:

                      FOR  PROPER  OUTPUT,  PFXREF  REQUIRES  A PRINTER
                           HAVING  AT  LEAST  132 POSITIONS AND A PN OR
                           EQUIVALENT TRAIN/CHAIN.


1PFXREF: A LOAD MODULE MAPPING PROGRAM                        PAGE    4


           BBBBB  (BLKSIZE FOR SYSUT2) IS ANY MULTIPLE OF 137 UP TO AND
                INCLUDING  FULL-TRACK  BLOCKING.  THE LRECL IS 137; THE
                DEFAULT BLOCKSIZE IS 3509. THE RECFM IS VBA.

           SSSSS  (BLKSIZE  FOR SYSIN AND SYSIN2) IS ANY MULTIPLE OF 80
                UP  TO  AND INCLUDING FULL-TRACK BLOCKING. THE LRECL IS
                80. THE DEFAULT BLOCKING FACTOR IS 1.

           PPPPP  (BLKSIZE  FOR SYSPUNCH AND SYSOUT) IS ANY MULTIPLE OF
                80 UP TO AND INCLUDING FULL-TRACK BLOCKING. THE DEFAULT
                BLOCKSIZE IS 80.

           ZZZZZ  (BLKSIZE FOR SYSLIB) NEED NOT BE GIVEN ON THE DDCARD;
                IT IS ONLY USED FOR REGION CALCULATION.

           XXXX  (REGION SIZE) CAN BE DETERMINED, APPROXIMATELY, BY THE
                FOLLOWING FORMULA:

                XXXX  = 128K + (2*SSSSS +2*BBBBB +ZZZZZ +2*PPPPP +4096)
                     / 1024)K


     SYSUT2  THIS  IS  THE  PRIMARY  OUTPUT OF PFXREF. IT IS A REQUIRED
          DDCARD.

     SYSPUNCH  THIS  IS  THE  SECONDARY  OUTPUT  OF PFXREF. IT IS NOT A
          REQUIRED DDCARD. SEE APPENDIX I FOR OUTPUT CARD FORMAT.

     SYSOUT  THIS IS A SECONDARY OUTPUT OF PFXREF. IT IS NOT A REQUIRED
          DDCARD. SEE APPENDIX I FOR OUTPUT CARD FORMAT.

     SYSLIB  THIS  IS  THE  PRIMARY INPUT TO PFXREF. THIS IS A REQUIRED
          DDCARD.

     SYSIN THIS IS THE PRIMARY CONTROL CARD DATASET FOR PFXREF. THIS OR
          SYSIN2 IS A REQUIRED DDCARD.

     SYSIN2  THIS IS AN ALTERNATE CONTROL CARD DATASET FOR PFXREF. THIS
          OR SYSIN IS A REQUIRED DDCARD.

     STEPLIB  THIS  IS  A LIBRARY ON THE TSO A-QUEUE WHICH CONTAINS THE
          CURRENT  VERSION  OF PFXREF. THIS WOULD BE USED TO RUN ON THE
          TSO A-QUEUE.

                NOTE:

                      FOR  A FULLER EXPLANATION OF THE DDCARD'S USED BY
                           PFXREF, SEE APPENDIX III.


1PFXREF: A LOAD MODULE MAPPING PROGRAM                        PAGE    5


    CONTROL  CARDS  FOR  PFXREF,  IN  THE SYSIN DATASET, HAVE A SIMPLE,
 FIXED FORMAT:

              NAME <RELOCATION> <IEANUC>

    CONTROL  CARDS  FOR  PFXREF,  IN THE SYSIN2 DATASET, HAVE A SIMPLE,
 FIXED FORMAT:

              RELOCATION NAME <COMMENTS>

      NAME THIS IS THE NAME OF THE MEMBER TO BE MAPPED; THIS OPERAND IS
           REQUIRED.  IT  MUST  START  IN COLUMN ONE (1) OF THE CONTROL
           CARD  IF  THE DATASET IS SYSIN, OR IN COLUMN SIXTEEN (16) OF
           THE CONTROL CARD IF THE DATASET IS SYSIN2.

      RELOCATION  THIS IS AN OPTIONAL RELOCATION FACTOR TO BE USED WHEN
           PRODUCING  THE  LOAD  MODULE  MAP  AND THE PUNCHED OUTPUT IN
           SYSPUNCH.  IF  THE  CONTROL  CARD  DATASET  IS  SYSIN,  THIS
           RELOCATION  FACTOR  MUST  START  IN  COLUMN  TEN (10) OF THE
           CONTROL  CARD,  MUST BE SIX (6) HEXIDECIMAL DIGITS LONG, AND
           MUST HAVE LEADING ZEROES SUPPLIED.

      IF  THE DATASET IS SYSIN2, THE RELOCATION FACTOR IS NOT OPTIONAL.
           IT  MUST  START IN COLUMN ONE (1) OF THE CONTROL CARD AND BE
           SIX  (6)  HEXIDECIMAL  DIGITS  LONG  WITH  LEADING ZEROES IF
           NECESSARY. CONTROL CARDS IN THE SYSIN2 DATASET HAVE THE FORM
           OF PFXREF OR MAPLPA OUTPUT. THUS ENABLING THE USER OF PFXREF
           TO SUPPLY MAPLPA OUTPUT CARDS AS INPUT.

      IEANUC  THIS IS A KEYWORD INDICATING TO PFXREF THAT THE MODULE TO
           BE MAPPED IS A NUCLEUS THAT DOES NOT HAVE A NAME IN THE FORM
           IEANUC0X.  THIS IS A POSITIONAL PARAMETER AND MUST APPEAR IN
           COLUMN EIGHTEEN (18) OF THE CARD. THIS CANNOT BE SUPPLIED IF
           THE DATASET IS SYSIN2.

      IF THE CONTROL CARD DATASET IS SYSIN2, COMMENTS MAY APPEAR ON THE
           CONTROL CARDS STARTING IN COLUMN TWENTY-FIVE (25).

      COMMENT  CARDS  (*  IN COLUMN 1) CAN APPEAR ANYWHERE IN THE INPUT
           STREAM.  THERE  IS NO LIMIT UPON THE NUMBER OF COMMENT CARDS
           THAT  CAN BE IN THE INPUT STREAM NOR ON THEIR PLACEMENT; IE,
           COMMENT  CARDS  MAY BE PLACED BEFORE OR AFTER CONTROL CARDS.
           HOWEVER,  IF PLACED AFTER CONTROL CARDS, THEY WILL BE LISTED
           WITH THE NEXT CONTROL CARD.

      IF  AN  ERROR  IS  DETECTED IN A CONTROL CARD, AN ATTEMPT WILL BE
           MADE  TO  INDICATE  THE LOCATION OF THE ERROR BY PLACING A $
           UNDER  THE  POSITION  IN  THE PRINT LINE WHERE THE ERROR WAS
           FOUND.


1PFXREF: A LOAD MODULE MAPPING PROGRAM                        PAGE    6


           -DDNAME

      THIS  IS  A SPECIAL CONTROL CARD WHICH TELLS PFXREF TO CHANGE THE
           DDNAME  OF  THE INPUT PDS FROM SYSLIB TO THE DDNAME GIVEN ON
           THE  CONTROL CARD AFTER THE HYPHEN. THE DDNAME MUST START IN
           COLUMN  TWO  (2) OF THE CONTROL CARD AND MUST BE PADDED WITH
           BLANKS  TO  EIGHT (8) CHARACTERS. THE HYPHEN (-) MUST APPEAR
           IN COLUMN ONE (1) OF THE CONTROL CARD.

           =DATA

      THIS  IS  A  SPECIAL  CONTROL CARD WHICH TELLS PFXREF TO COPY THE
           CONTROL CARD TO THE SYSPUNCH DATASET WITH ONE CHANGE --- THE
           EQUAL SIGN (=) IS REPLACED WITH A DOLLAR SIGN ($). THIS IS A
           MEANS  OF SUPPLYING CONTROL CARDS TO THE TPATH PROGRAM (QV),
           SUCH AS $SETASID=.


1PFXREF: A LOAD MODULE MAPPING PROGRAM                        PAGE    7


      PFXREF'S PRIMARY OUTPUT IS FOUR LISTINGS OF THE LOAD MODULE TO BE
           MAPPED:

           1.  A  LINKAGE  EDITOR  LIKE  MAP OF THE ESD ITEMS SORTED BY
                ADDRESS. IF THE MODULE HAS PSEUDO REGISTERS, THESE WILL
                APPEAR  AFTER  THE  SORTED  ESD  LISTING;  THEY WILL BE
                SORTED  BY  ADDRESS  ALSO.  IF  THE  LOAD  MODULE IS IN
                OVERLAY, THE SEGMENT NUMBER WILL APPEAR TO THE RIGHT OF
                THE CSECT NAME.

           2.  A  LINKAGE  EDITOR  LIKE  MAP OF THE RLD ITEMS SORTED BY
                ADDRESS  GIVING  THE  TYPE  OF REFERENCE; IE, V-4+ IS A
                FOUR  BYTE VCON WHICH HAS A POSITIVE RELOCATION FACTOR.
                AN  IDENTIFIER  OF  C-X INDICATES THAT THIS IS THE AREA
                WHICH  HAS  REQUESTED  THE  ACCUMULATED  LENGTH  OF THE
                PSEUDO  REGISTERS;  IT WILL BE IDENTIFIED BY THE 'NAME'
                $ACCUM.

           3.  A  LINKAGE  EDITOR  LIKE  MAP  OF  THE  ESD ITEMS SORTED
                ALPHABETICALLY  BY  NAME. IF THE MODULE CONTAINS PSEUDO
                REGISTERS,  THEY  WILL  APPEAR  AFTER  THE  SORTED  ESD
                LISTING;  THEY  WILL  BE SORTED ALPHABETICALLY ALSO. IF
                THE  LOAD MODULE IS IN OVERLAY, THE SEGMENT NUMBER WILL
                APPEAR TO THE RIGHT OF THE CSECT NAME.

           4.  A  LINKAGE  EDITOR  LIKE  MAP  OF  THE  RLD ITEMS SORTED
                ALPHABETICALLY  BY  THE  REFERENCED  CSECT/ENTRY  POINT
                GIVING  THE TYPE OF REFERENCE; IE, A-3+ IS A THREE BYTE
                ADCON WITH A POSITIVE RELOCATION FACTOR.

      AT  THE  END  OF  EACH  LISTING,  THE LOAD MODULE'S LENGTH, ENTRY
           POINT, OPTIONAL RELOCATION FACTOR, THE NUMBER OF CSECTS, THE
           NUMBER  OF  ENTRY  POINTS,  AND  THE  NUMBER  OF  UNRESOLVED
           REFERENCES (IF ANY) WILL BE GIVEN.

      IF THE LOAD MODULE TO BE MAPPED IS A NUCLEUS, THE FIRST CESD ITEM
           (HOPEFULLY  IEAVNIP0  OR  IEAANIP0) WILL BE RELOCATED TO THE
           END  OF  THE  MODULE,  AND  ALL  REFERENCES  TO  IT, AND ALL
           REFERENCES  FROM  IT,  WILL BE APPROPRIATELY CHANGED. AT THE
           END OF EACH LISTING, NIP'S ADDRESS WILL BE GIVEN.

      IF  A RELOCATION FACTOR IS GIVEN, ALL ADDRESSES WILL BE RELOCATED
           BY  THIS  FACTOR;  EG, IF A RELOCATION FACTOR OF E8B000 WERE
           GIVEN,  THE  FIRST  ESD  ITEM  IN  THE  ADDRESS MAP WOULD BE
           LOCATED AT E8B000 RATHER THAN AT 00.

      IF  THE  LOAD  MODULE IS IN OVERLAY, THE UNOVERLAY LENGTH WILL BE
           GIVEN AT THE END OF EACH LISTING.


1PFXREF: A LOAD MODULE MAPPING PROGRAM                        PAGE    8


      IF  THE  SYSPUNCH  DDCARD  IS  PRESENT,  CARDS,  AS  DESCRIBED IN
           APPENDIX  I,  WILL  BE  PRODUCED. THE SYSPUNCH DDCARD IS NOT
           REQUIRED.

      IF  THE SYSOUT DDCARD IS PRESENT, WHENEVER THERE IS AN ERROR IN A
           MEMBER  OF  THE INPUT PDS, SUCH AS NO ESD ITEMS, A CARD WILL
           BE  PUNCHED  IN  THE  SYSOUT  DATASET THAT CONTAINS THE LOAD
           MODULE'S  RELOCATION  FACTOR  IN  COLUMN  1,  AND  THE  LOAD
           MODULE'S NAME IN COLUMN 16.

      THE  'IN  CORE  OUTPUT'  FOR  THE  PFAULT  PROGRAM WILL ALWAYS BE
           PRODUCED. FOR A DESCRIPTION OF THIS DATA, SEE APPENDIX IV.


1PFXREF: A LOAD MODULE MAPPING PROGRAM                        PAGE    9


                              APPENDIX I


                         THE SYSPUNCH DATASET


      PFXREF PRODUCES CARDS WITH THE FOLLOWING FORMAT:

           COLUMNS 1 THRU 6 - CSECT OR ENTRY START ADDRESS
           COLUMN 7 - THE MAJOR NAME FLAG
           COLUMNS 10 THRU 15 - CSECT LENGTH
           COLUMNS 16 THRU 23 - CSECT/ENTRY NAME
           COLUMN 24 - THE LENGTH FLAG
           COLUMN 25 - THE RELOCATION FLAG
           COLUMN 32 - THE MEMBER NAME
           COLUMN 50 - SEGMENT NUMBER, IF OVERLAY
           COLUMN 73 - SEQUENCE NUMBER

      COLUMNS  1  THRU  6  CONTAIN THE CSECT START ADDRESS OR THE ENTRY
           POINT  ADDRESS  IN  HEXIDECIMAL, SIX CHARACTERS WITH LEADING
           ZEROES.

      COLUMN 7 CONTAINS AN ASTERISK (*) IF THE CARD HAS A MAJOR NAME IN
           COLUMNS  16  THRU  23.  A  MAJOR NAME IS A CSECT NAME. ENTRY
           POINTS  IN  A  CSECT  WILL  NOT HAVE THE MAJOR FLAG ON, THUS
           INDICATING  AN  ENTRY  POINT. IF THE NOEP PARAMETER HAS BEEN
           SPECIFIED, ENTRY POINT CARDS WILL NOT BE PRODUCED.

      COLUMNS  10  THRU 15 CONTAIN THE CSECT LENGTH. THIS IS TAKEN FROM
           THE CESD ITEMS READ INTO CORE. ENTRY POINT CARDS PRODUCED BY
           PFXREF WILL HAVE BLANKS IN THIS FIELD.

      COLUMNS  16  THRU  23  CONTAIN  THE  CSECT OR ENTRY POINT NAME IN
           EBCDIC, EIGHT CHARACTERS WITH TRAILING BLANKS.

      COLUMN  24  CONTAINS  AN  ASTERISK (*) INDICATING THAT COLUMNS 10
           THRU  15  CONTAIN A LENGTH IF THE CARD IS A MAJOR NAME. THIS
           FIELD WILL CONTAIN A BLANK FOR ENTRY POINTS.

      COLUMN 25 CONTAINS AN ASTERISK (*) INDICATING THAT COLUMNS 1 THRU
           6  HAVE  BEEN RELOCATED IF A RELOCATION FACTOR WAS SPECIFIED
           BY THE USER.

      THE  FIRST  CARD  PRODUCED BY PFXREF IN THE SYSPUNCH DATASET IS A
           COMMENT  CARD  CONTAINING THE DAY, DATE, AND TIME PFXREF WAS
           EXECUTED.

      IF  THE  NOEND  PARAMETER  HAS  NOT  BEEN  SPECIFIED, PFXREF WILL
           PRODUCE  AN  'END OF MODULE' CARD WHICH HAS AN ADDRESS EQUAL
           TO  THE  LAST  BYTE  OF  THE MODULE WITH A NAME OF $$$$XXXX;
           WHERE XXXX IS THE LAST FOUR CHARACTERS OF THE MODULE'S NAME.


1PFXREF: A LOAD MODULE MAPPING PROGRAM                        PAGE   10


      IF  THE KVT PARAMETER HAS BEEN SPECIFIED IN THE PARM FIELD OF THE
           EXEC  CARD,  PFXREF  WILL  PRODUCE  CARDS WITH THE FOLLOWING
           FORMAT:

           COLUMNS 1 THRU 6 - CSECT START ADDRESS
           COLUMN 7 - THE MAJOR NAME FLAG
           COLUMNS 10 THRU 15 - CSECT ENDING ADDRESS
           COLUMNS 16 THRU 23 - CSECT NAME
           COLUMN 25 - THE RELOCATION FLAG
           COLUMN 32 - THE MEMBER NAME
           COLUMN 50 - SEGMENT NUMBER, IF OVERLAY
           COLUMN 73 - SEQUENCE NUMBER

      COLUMNS 1 THRU 6 CONTAIN THE CSECT START ADDRESS, IN HEXIDECIMAL,
           SIX CHARACTERS WITH LEADING ZEROES.

      COLUMN  7 CONTAINS AN ASTERISK (*) INDICATING THAT THE CARD HAS A
           MAJOR  NAME  IN  COLUMNS 16 THRU 23. A MAJOR NAME IS A CSECT
           NAME.

      COLUMNS  10 THRU 15 CONTAIN THE CSECT ENDING ADDRESS. THIS IS THE
           CSECT  START  ADDRESS  PLUS  THE CSECT LENGTH TAKEN FROM THE
           CESD ITEMS READ INTO CORE.

      COLUMNS  16  THRU  23  CONTAIN  THE  CSECT  NAME IN EBCDIC, EIGHT
           CHARACTERS WITH TRAILING BLANKS.

      COLUMN  24  CONTAINS  A  BLANK INDICATING THAT COLUMNS 10 THRU 15
           CONTAIN AN ENDING ADDRESS.

      COLUMN 25 CONTAINS AN ASTERISK (*) INDICATING THAT COLUMNS 1 THRU
           6  HAVE  BEEN RELOCATED IF A RELOCATION FACTOR WAS SPECIFIED
           BY THE USER.

      WHEN  THE  KVT  PARAMETER IS SPECIFIED, ENTRY POINT CARDS ARE NOT
           PRODUCED BY PFXREF; ALSO, NO COMMENT CARDS WILL BE PRODUCED.


1PFXREF: A LOAD MODULE MAPPING PROGRAM                        PAGE   11


                             APPENDIX II


                               MESSAGES

   ALL PFXREF MESSAGES ARE IN THE FOLLOWING FORMAT:

           MSGID-MSGNUMBER-SEVERITY MESSAGE

                     MSGID IS ALWAYS PFXREF
                     MSGNUMBER IS THE NUMBER IN PFXREF'S TABLE
                     SEVERITY IS A ONE CHARACTER CODE

                          I INFORMATIONAL....RC=0
                          W WARNING..........RC=4
                          E ERROR............RC=8
                          T TERMINAL.........RC=12
                          C CATASTROPHIC.....RC=16

                NOTES:

                     I  INFORMATIONAL - THIS IS A MESSAGE TO INFORM THE
                     USER OF SOME EVENT, DATA, TOTAL, ETC.

                     W  WARNING  - THIS IS A MESSAGE TO INFORM THE USER
                     OF  SOME  UNUSUAL  OCCURANCE  WHICH MAY OR MAY NOT
                     HAVE  SOME  EFFECT  ON  PFXREF'S PROCESSING OF THE
                     CURRENT CONTROL CARD.

                     E  ERROR - THIS IS A MESSAGE TO INFORM THE USER OF
                     SOME   CONDITION   THAT   PRECLUDES   PFXREF  FROM
                     PROCESSING THE CURRENT CONTROL CARD.

                     T  TERMINAL - THIS IS A MESSAGE TO INFORM THE USER
                     OF  A  CONDITION  THAT  PRECLUDES PFXREF'S FURTHER
                     PROCESSING  OF ANY CONTROL CARDS, SUCH AS NO SYSIN
                     DDCARD, ETC.

                     C  CATASTROPHIC  - THIS IS A MESSAGE TO INFORM THE
                     USER  OF  A  CONDITION  THAT PFXREF RECOGINIZES AS
                     BEING  DISASTEROUS  TO  ITS  PROCESSING,  SUCH  AS
                     POSSIBLE LOOPS, ETC. THIS WILL BE ACCOMPANIED BY A
                     USER ABEND.

           NORMALLY,  ON  ERRORS,  A  DOLLAR  SIGN  ($)  WILL  SHOW THE
           APPROXIMATE LOCATION OF THE ERROR.


1PFXREF: A LOAD MODULE MAPPING PROGRAM                        PAGE   12


   PFXREF00I INPUT CARD FROM SYSIN

      THIS IS A AN ECHO OF THE CONTROL CARD IN THE SYSUT2 DATASET.

   PFXREF01T OPEN FAILED FOR SYSLIB DDCARD

      SYSLIB OR ITS ALTERNATE DID NOT OPEN.

   PFXREF02E MODULE MMMMMMMM HAS NO ESD ITEMS

      MEMBER NAMED MMMMMMMM HAS NO ESD ITEMS, AND, THEREFORE, CANNOT BE
      PROCESSED BY PFXREF.

   PFXREF03E INVALID LENGTH

      THE LENGTH OF THE NAME OR RELOCATION FACTOR WAS GREATER THAN 8 OR
      6, RESPECTIVELY.

   PFXREF04E **** NO MORE CORE ****

      ALL  AVAILABLE  STORAGE  WAS  USED  BY THE SORT ROUTINES BUILDING
      QUEUES,  AND ANOTHER 20K BLOCK OF CORE COULD NOT BE OBTAINED. THE
      REGION SIZE WILL HAVE TO BE INCREASED.

   PFXREF05E TYPE FAILED FOR MEMBER NAMED MMMMMMMM

      EITHER  A  BLDL  OR  A FIND (WILL BE REPLACE TYPE IN THE MESSAGE)
      FAILED FOR THE MEMBER NAMED MMMMMMMM.

   PFXREF06C SAVEAREA COUNT EXCEEDED

      DUE  TO  SOME ERROR IN THE PROGRAM OR ERRORS ON THE CONTROL CARD,
      THE  MAXIMUM  DEPTH  OF  SAVEAREAS  WAS  EXCEEDED.  THIS  WILL BE
      ACCOMPANIED BY A USER 001 ABEND.

           IF  A  SYSUDUMP  DDCARD  WAS  NOT PRESENT IN THE JCL, PLEASE
           RERUN WITH ONE IN THE JCL.

           PLEASE SEND THE DUMP TO:






1PFXREF: A LOAD MODULE MAPPING PROGRAM                        PAGE   13


   PFXREF07E NOT ENOUGH CORE FOR CESD ITEMS

      THE  SIZE  OF  THE  CESD TABLE EXCEEDED 64K (ONE HALF OF THE 128K
      OBTAINED FOR THE CESD ITEMS).

   PFXREF08T NO SYSIN DDCARD

      SYSIN, SYSIN2 OR ITS ALTERNATE DID NOT OPEN.

   PFXREF09I EODAD REACHED READING CESD RECORDS

      END  OF  FILE  (EODAD)  WAS  REACHED WHEN ANOTHER CESD RECORD WAS
      EXPECTED BY THE READ ROUTINES.

   PFXREF10E INVALID HEX DIGIT

      THE CHARACTER INDICATED BY THE $ SIGN IS NOT HEXIDECIMAL.

   PFXREF11C RELATIVE OFFSET ZERO NOT FOUND

      WHEN PFXREF SORTED THE ADDRESSES OF ALL CSECTS, IT DID NOT FIND A
      CSECT  WITH  AN  ADDRESS  EQUIVALENT TO THE RELOCATION FACTOR (IF
      GIVEN)  OR  LOCATION ZERO. THIS WILL BE ACCOMPANIED BY A USER 002
      ABEND. SEE PFXREF06C.

   PFXREF12C RECORD TYPE NOT SCTR/TRANSLATE

      PFXREF  FOUND  A  RECORD  THAT  DID  NOT  HAVE THE SCTR/TRANSLATE
      IDENTIFICATION  WHEN  A  SCTR/TRANSLATE RECORD WAS EXPECTED. THIS
      WILL BE ACCOMPANIED BY A USER 003 ABEND. SEE PFXREF06C.

   PFXREF13C RECORD TYPE NOT RLD

      PFXREF  FOUND  A  RECORD  THAT  DID  NOT  HAVE  ONE  OF  THE  RLD
      IDENTIFICATION  BITS  SET  WHEN  AN RLD RECORD WAS EXPECTED. THIS
      WILL BE ACCOMPANIED BY A USER 004 ABEND. SEE PFXREF06C.



1PFXREF: A LOAD MODULE MAPPING PROGRAM                        PAGE   14


      THE FOLLOWING MESSAGES WILL APPEAR IN THE USER'S JCL

   PFXREF90T SYSUT2 DID NOT OPEN

      SYSUT2 OR ITS ALTERNATE DID NOT OPEN.

   PFXREF91W UNRECOGNIZABLE PARM

      A  CHARACTER  STRING  IN THE PARM FIELD WAS NOT RECOGNIZED BY THE
      PARM FIELD PROCESSING ROUTINE.

   PFXREF92W INVALID PAGESIZE, DEFAULT USED

      THE  LINECOUNT  GIVEN IN THE LINES= OR L= PARAMETER WAS LESS THAN
      10 OR GREATER THAN 999.

   PFXREF93W NON DECIMAL IN PARM FIELD

      THE LINECOUNT GIVEN IN THE LINES= OR L= PARAMETER CONTAINED A NON
      DECIMAL CHARACTER.

   PFXREF94W PARM FIELD TOO LONG

      THE  LINECOUNT  GIVEN IN THE LINES= OR L= PARAMETER WAS MORE THAN
      THREE (3) DIGITS LONG.



1PFXREF: A LOAD MODULE MAPPING PROGRAM                        PAGE   15


                             APPENDIX III


                         DDCARD'S FOR PFXREF


   SYSUT2  THIS IS THE PRIMARY OUTPUT OF PFXREF. IT HAS A RECORD FORMAT
        OF  VARIABLE  BLOCKED  WITH  ASA  CONTROL CHARACTERS, A LOGICAL
        RECORD  LENGTH  OF  137,  AND  A DEFAULT BLOCKSIZE OF 3509. THE
        BLOCKSIZE  CAN BE OVERRIDDEN VIA THE DDCARD. SYSUT2 CONTAINS AN
        ECHO  OF  THE  CONTROL CARD FROM SYSIN, ANY ERROR MESSAGES, AND
        THE FORMATTED OUTPUT OF THE SORT ROUTINES.

   SYSLIB  THIS  IS  THE  PRIMARY  INPUT TO PFXREF. IT IS A LOAD MODULE
        DATASET  (SUCH  AS  SYS1.LPALIB)  WHICH  CONTAINS THE MEMBER OR
        MEMBERS  TO  BE  MAPPED. IT MUST HAVE A DATASET ORGANIZATION OF
        PARTITIONED  (PO),  A RECORD FORMAT OF UNDEFINED, THE BLOCKSIZE
        CAN  BE  UP  TO  FULL-TRACK  BLOCKING.  IT CAN BE ON ANY DIRECT
        ACCESS  DEVICE SUPPORTED BY THE BASIC PARTITIONED ACCESS METHOD
        (BPAM). THE DDNAME SYSLIB MAY BE CHANGED VIA THE - CONTROL CARD
        (-DDNAME).

   SYSPUNCH  THIS  IS  THE  SECONDARY OUTPUT OF PFXREF. IT HAS A RECORD
        FORMAT  OF  FIXED BLOCKED, A LOGICAL RECORD LENGTH OF 80, AND A
        DEFAULT  BLOCKSIZE  OF  80. THE BLOCKSIZE MAY BE OVERRIDDEN VIA
        THE DDCARD. IT WILL CONTAIN THE CARDS AS DEFINED IN APPENDIX I.
        THIS  IS  NOT  A  REQUIRED  DDCARD;  IE, IF YOU DO NOT WANT THE
        PUNCHED OUTPUT OF PFXREF, A DD DUMMY CARD IS NOT REQUIRED.

   SYSOUT  THIS IS A SECONDARY OUTPUT OF PFXREF. IT HAS A RECORD FORMAT
        OF  FIXED BLOCKED, A LOGICAL RECORD LENGTH OF 80, AND A DEFAULT
        BLOCKSIZE  OF  80.  THE  BLOCKSIZE  MAY  BE  OVERRIDDEN VIA THE
        DDCARD.  IT  WILL  CONTAIN  CARDS  AS DEFINED IN APPENDIX I FOR
        THOSE  MEMBERS OF THE INPUT PDS WHICH HAD ERRORS. THIS IS NOT A
        REQUIRED DDCARD.

   SYSIN  THIS IS THE PRIMARY CONTROL CARD DATASET FOR PFXREF. IT HAS A
        RECORD  FORMAT OF FIXED BLOCKED, A LOGICAL RECORD LENGTH OF 80,
        AND  A DEFAULT BLOCKSIZE OF 80. THE BLOCKSIZE MAY BE OVERRIDDEN
        VIA  THE  DDCARD.  SYSIN  CONTAINS  THE  CONTROL CARDS THAT ARE
        DESCRIBED IN THE WRITE-UP.

   SYSIN2 THIS IS AN ALTERNATE INPUT DATASET TO PFXREF. IT HAS A RECORD
        FORMAT  OF  FIXED BLOCKED, A LOGICAL RECORD LENGTH OF 80, AND A
        DEFAULT  BLOCKSIZE  OF  80. THE BLOCKSIZE MAY BE OVERRIDDEN VIA
        THE DDCARD. SYSIN2 CONTAINS CONTROL CARDS THAT WERE PRODUCED BY
        THE MAPLPA PROGRAM (QV) OR BY PFXREF ITSELF.


1PFXREF: A LOAD MODULE MAPPING PROGRAM                        PAGE   16


                             APPENDIX IV


                             IN CORE DATA


      THE  FOLLOWING  IS  A DESCRIPTON OF THE BLOCKS BUILT BY PFXREF IN
   CORE TO BE PASSED TO THE PFAULT PROGRAM.

                   NEXT DC F'0' -> TO NEXT
                   SEGNO DC X'00' SEGMENT NUMBER
                   ADDR DC AL3(0) ADDRESS
                   NAME DC CL8' ' CSECT NAME
                   FLAG DC X'00' FLAG BYTE
                   * SEE LINKAGE EDITOR PLM
                   LNTH DC XL3'00' CSECT LENGTH
                   APTR DC F'0' CHAIN OF SORTED BY ALPHA



