          MACRO
          RESCUE &JOBNAME=RESCUE,                                      X
               &JOBCLASS=A,                                            X
               &JOBACCT='ACCTING,INFO',                                X
               &JOBPROGM=PROGRAMMER,                                   X
               &JOBMSGCL=X,                                            X
               &NOTIFY=SYS1,                                           X
               &TYPRUN=,                                               X
               &CATALOG=CATALOG.RESCUE,                                X
               &COMMAND=N,                                             X
               &CMDPROC='SYS1.CMDPROC',                                X
               &MASTRCAT=CATALOG.MVSICFM.VMVSCAT,                      X
               &MASTRPW=MASTER,                                        X
               &MCATVOL=MVSCAT,                                        X
               &NCP=Y,                                                 X
               &IPLTXT1=SYS1.SAMPLIB(IPLRECS),                         X
               &IPLTXT2=SYS1.SAMPLIB(IEAIPL00),                        X
               &VOLUME=RESCUE,                                         X
               &DEVT=3380,                                             X
               &OWNER=RESCUE,                                          X
               &ICF=Y,                                                 X
               &RACF=Y,                                                X
               &RENAME=N,                                              X
               &ISPFUSR1=SYS1,                                         X
               &ISPFUSR2=TECH,                                         X
               &SYSID=IPO1,                                            X
               &SYS1=SYS1,                                             X
               &SYSX=SYSX,                                             X
               &SYSRES=MVSRES,                                         X
               &TAPEUNIT=TAPE,                                         X
               &TPDSN=SADPGM,                                          X
               &TPVOL=RESCUT,                                          X
               &TMS=Y,                                                 X
               &UNITADR=1C3,                                           X
               &VTAMLIB=VTAMLIB,                                       X
               &VTAMLST=VTAMLST,                                       X
               &ICKSADSF=SYS1.SAMPLIB,                                 X
               &ADRDMPRS=SYS1.SAMPLIB,                                 X
               &LIST=Y
.**********************************************************************
.*                                                                    *
.*     MACRO: RESCUE                                                  *
.*                                                                    *
.*  FUNCTION: CREATE 5 JOB STREAMS THAT WILL CREATE A ONE PACK        *
.*            IPL'ABLE SYSTEM, INCLUDING A MASTER CATALOG,            *
.*            PAGE, SYS1.MANXX, STAGEINDX, AND ALL IPL RELATED        *
.*            DATASETS FROM YOUR CURRENT SYSTEM.                      *
.*            THE USER CAN OPTIONALLY CREATE ISPF-USER'S BY COPYING   *
.*            THEIR CURRENT PROFILES TO NEW ONES.                     *
.*                                                                    *
.*  OPERANDS: DEFAULTS ARE LISTED ...                                 *
.*                                                                    *
.*   JOBNAME='RESCUE'                   ** JOB NAME                   *
.*   JOBCLASS='A'                       ** JOB EXEC CLASS             *
.*   JOBACCT='ACCTING,INFO'             ** ACCOUNTING INFORMATION     *
.*   JOBPROGM='PROGRAMMER NAME'         ** PROGRAMMER NAME FIELD      *
.*   JOBMSGCL='X'                       ** MSGCLASS                   *
.*   NOTIFY='SYS1'                      ** NOTIFY=                    *
.*   CATALOG='CATALOG.RESCUE'           ** RESCUE                     *
.*   COMMAND=N                          ** IF PGM=COMMAND INSTALLED   *
.*                                         ISSUES SVC 34'S            *
.*   CMDPROC='SYS1.CMDPROC'             ** CLIST LIBRARY              *
.*   MASTRCAT='CATALOG.MVSICFM.VMVSCAT' ** CURRENT MASTER CATALOG     *
.*   MASTRPSW='MASTER',                 ** MASTER CATALOG PASSWORD    *
.*   MCATVOL='MVSCAT',                  ** MASTER CATALOG VOLUME      *
.*   NCP=Y                              ** IF NCP AND SSCPLIBS EXIST  *
.*   IPLTXT1='SYS1.SAMPLIB(IPLRECS)'    ** IPL TEXT DATASET           *
.*   IPLTXT2='SYS1.SAMPLIB(IEAIPL00)'   **     "                      *
.*   VOLUME='RESCUE'                    ** VOLSER OF RESCUE PACK      *
.*   DEVT='3380'                        ** DEVICE TYPE OF RESCUE PACK *
.*   OWNER='RESCUE PACK'                ** OWNER NAME                 *
.*   ICF='Y'                            ** IS NEW MASTER CATALOG ICF? *
.*   RACF='Y'                           ** IS RACF ACTIVE             *
.*   RENAME=N                           ** WHETHER SYSX TO SYS1 ??    *
.*   ISPFUSR1='SYS1'                    ** ISPFUSER 1                 *
.*   ISPFUSR2='TECH'                    ** ISPFUSER 2                 *
.*   SYSID=IPO1                         ** SYSTEM ID                  *
.*   SYS1='SYS1'                        ** NEW HIGH-LEVEL QUALIFIER   *
.*   SYSX='SYSX'                        ** TEMP HIGH-LEVEL QUALIFIER  *
.*   SYSRES='MVSRES'                    ** CURRENT SYSTEM RESIDENCE   *
.*   TAPEUNIT='TAPE'                    ** SA/DUMP UNITTYPE           *
.*   TPDSN='SADPGM'                     ** SA/DUMP DSN                *
.*   TPVOL='RESCUT'                     ** SA/DUMP VOLSER             *
.*   TMS='Y'                            ** IF TMS IS ACTIVE           *
.*   UNITADR=1C3                        ** UNIT ADDRESS OF RESCUE VOL *
.*   VTAMLIB='VTAMLIB'                  ** SUFFIX FOR VTAM-LIB        *
.*   VTAMLST='VTAMLST'                  ** SUFFIX FOR VTAM-LST        *
.*   ICKSADSF='SYS1.SAMPLIB'            ** WHERE SA/ICKDSF IS         *
.*   ADRDMPRS='SYS1.SAMPLIB'            ** WHERE SA/DUMP TEXT IS      *
.*   LIST=YES                           ** USUAL LIST OPTION          *
.*                                                                    *
.*  CHANGE SECTION:   08/86  - CREATED                                *
.*                    05/87  - UPDATED FOR LINE ADJUSTMENTS           *
.*                                                                    *
.*  EXECUTION RECCOMENDATIONS:  TRY EXEC W/O ANY OPERANDS             *
.*                                                                    *
.*                                                                    *
.**********************************************************************
.*                                                                    *
.*--------------------------------------------------------------------*
.*                                                                    *
.*                 VARIABLE DEFINITION SECTION                        *
.*                                                                    *
.*--------------------------------------------------------------------*
.*                                                                    *
         LCLC   &I,&P,&MN,&TYPRN
         LCLA   &A,&LCAT
         LCLB   &B,&RACFLG,&ICFLG,&TMSFLG       FLAGS
         GBLB   &ISSUE
         AIF    (&ISSUE).ERR1
&ISSUE   SETB   1
&I       SETC   '&SYSNDX'
&MN      SETC   ' MNOTE'
         AIF    (K'&TYPRUN  EQ 0).SKIPTYP
&TYPRN   SETC   ',TYPRUN=&TYPRUN'
.SKIPTYP ANOP
.*                                                                    *
.*--------------------------------------------------------------------*
.*                                                                    *
.*                     VERIFICATION SECTION                           *
.*                                                                    *
.*--------------------------------------------------------------------*
.*                                                                    *
         AIF    (K'&JOBNAME  GT 7).ERR2         JOBNAME > 7 CHARS
         AIF    (K'&JOBCLASS NE 1).ERR3         JOBCLASS¬=1 CHARS
         AIF    (K'&JOBACCT  GT 30).ERR4        ACCOUNT > 16 CHARS
         AIF    (K'&JOBPROGM GT 20).ERR5        PROG NAME>20 CHARS
         AIF    (K'&JOBMSGCL NE 1).ERR6         MSGCLASS¬=1 CHARS
.*                                              NOTIFY>7 CHARS
         AIF    (K'&NOTIFY GT 7 AND K'&NOTIFY NE 0).ERR7
         AIF    (K'&CATALOG  GT 44).ERR8         LENGTH(CATALOG) > 44
         AIF    (K'&MASTRCAT GT 44).ERR9         LENGTH(MCAT)    > 44
.*                                               PASWWORD(MCAT) >8
         AIF    (K'&MASTRPW  GT 8 AND K'&MASTRPW NE 0).ERR10
         AIF    (K'&IPLTXT1 EQ  0).ERR11         NO IPL TEXT !!
         AIF    (K'&VOLUME  NE  6).ERR12         LENGTH VOLSER ¬= 8
         AIF    (K'&DEVT    EQ  0).ERR13         DEVT NOT THERE
         AIF    ('&ICF'     NE 'Y').ICFNSET      SET ICF FLAG
&ICFLG   SETB   1
.ICFNSET AIF    ('&RACF'    NE 'Y').RACFNSET     SET RACF FLAG
&RACFLG  SETB   1
.RACFNSET ANOP
         AIF    (K'&SYS1   EQ  0).ERR14         NO HIGH-LEVEL QUALIFIER
         AIF    (K'&SYSX  EQ  0).ERR15         NO HIGH-LEVEL QUALIFIER
         AIF    (K'&SYSRES NE  6).ERR16         SYSRES NOT RIGHT
         AIF    (K'&ICKSADSF EQ  0).ERR17         NO SA/ICKDSF
         AIF    (K'&ADRDMPRS EQ  0).ERR18         NO SA/DUMP TEXT
         AIF    (K'&TPDSN    EQ  0).ERR19         NO TAPE DSN
         AIF    (K'&SYSID    NE  4).ERR21         SYSTEM ID NOT 4
         AIF    (K'&TPVOL    EQ  0).ERR20         NO TAPE VOLSER
         AIF    (K'&UNITADR  EQ  0).ERR22         NO UNITADDRESS
         AIF    ('&TMS'      NE  'Y').NOTSM       SET 'TMS' FLAG
&TMSFLG  SETB   1
.NOTSM   ANOP
         PUSH   PRINT
         AIF    ('&LIST'     EQ  'Y').LISTM
         PRINT  OFF
.LISTM   ANOP
         AGO    .PROCESS
.*--------------------------------------------------------------------*
.*                                                                    *
.*                       ERROR   SECTION                              *
.*                                                                    *
.*--------------------------------------------------------------------*
.*                                                                    *
.ERR1    MNOTE  8,'MACRO HAS BEEN ISSUED BEFORE, WHY ISSUE IT AGAIN?'
         AGO    .MEND
.ERR2    MNOTE  8,'JOB NAME > 7 CHARS: JOBNAME=&JOBNAME'
         AGO    .MEND
.ERR3    MNOTE  8,'JOB CLASS >1: JOBCALSS=&JOBCALSS'
         AGO    .MEND
.ERR4    MNOTE  8,'JOB ACCOUNTING INFO > 30'
         AGO    .MEND
.ERR5    MNOTE  8,'PROGRAMMER NAME FIELD>20'
         AGO    .MEND
.ERR6    MNOTE  8,'JOB MSGCLASS INVALID: JOBMSGCL=&JOBMSGCL'
         AGO    .MEND
.ERR7    MNOTE  8,'JOB NOTIFY INVALID: NOTIFY=&NOTIFY'
         AGO    .MEND
.ERR8    MNOTE  8,'TARGET CATALOG INVALID: CATALOG=&CATALOG'
         AGO    .MEND
.ERR9  MNOTE  8,'LENGTH OF MASTER CATALOG IN VALID: MASTRCAT=&MASTRCAT'
         AGO    .MEND
.ERR10   MNOTE  8,'MASTER CATALOG PASSWORD INVALID: MASTRPW=&MASTERPW'
         AGO    .MEND
.ERR11   MNOTE  8,'MISSING IPL TEXT: IPLTXT1'
         AGO    .MEND
.ERR12   MNOTE  8,'MISSING TARGET VOLUME: VOLUME'
         AGO    .MEND
.ERR13   MNOTE  8,'MISSING DEVICE TYPE SPECIFICATION: DEVT'
         AGO    .MEND
.ERR14   MNOTE  8,'INVALID OR MISSING HIGH-LEVEL QUALIFIER FOR'
         MNOTE  8,'NEW ALLOCATION OF DATASETS: SYS1=&SYS1'
         AGO    .MEND
.ERR15   MNOTE  8,'INVALID OR MISSING HIGH-LEVEL QUALIFIER FOR'
         MNOTE  8,'INITIAL ALLOCATION OF DATASETS: SYSX=&SYSX'
         AGO    .MEND
.ERR16   MNOTE  8,'NO OR INVALID SYSRES PROVIDED: SYSRES=&SYSRES'
         AGO    .MEND
.ERR17   MNOTE  8,'NO STANDALONE ICKDSF TEXT PROVIDED BY: ICKSADSF='
         AGO    .MEND
.ERR18   MNOTE  8,'NO STANDALONE DUMP TEXT PROVIDED BY: ADRDMPRS='
         AGO    .MEND
.ERR19   MNOTE  8,'NO TAPE DATASET NAME SPECIFIED BY: TPDSN='
         AGO    .MEND
.ERR20   MNOTE  8,'NO TAPE VOLSER WAS ENTERED BY: TPVOL='
         AGO    .MEND
.ERR21   MNOTE  8,'SYSTEM ID INCORRECT: SYSID = &SYSID'
         AGO    .MEND
.ERR22   MNOTE  8,'UNIT ADDRESS NOT SPECIFIED: UNITADR = &UNITADR '
         AGO    .MEND
.*
.* PROCESS SECTION
.*
.PROCESS ANOP
.*--------------------------------------------------------------------*
.*    START OF JCL                                                    *
.*--------------------------------------------------------------------*
 PUNCH '//*   AUTHOR = MARK V. HEDGES -                               '
 PUNCH '//*            ADRIA LABORATORIES                             '
 PUNCH '//*            7001 POST ROAD                                 '
 PUNCH '//*            DUBLIN, OHIO 43065                             '
 PUNCH '//*            (614) 764-8175           P.T.L.                '
 PUNCH '//&JOBNAME.0 JOB ('&JOBACCT'),''&JOBPROGM'',          '
         AIF    (K'&NOTIFY EQ 0).SKIPNO0
 PUNCH '//           CLASS=&JOBCLASS,MSGCLASS=&JOBMSGCL.&TYPRN.,'
 PUNCH '//           NOTIFY=&NOTIFY'
         AGO  .OVER0
.SKIPNO0  ANOP
 PUNCH '//           CLASS=&JOBCLASS,MSGCLASS=&JOBMSGCL.&TYPRN'
.OVER0   ANOP
 PUNCH '//*---------------------------------------------------------* '
 PUNCH '//* JOB: &JOBNAME.0                                           '
 PUNCH '//* USE: TO INITALIZE THE VOLUME=&VOLUME ON UNIT=&UNITADR     '
 PUNCH '//*                                                           '
 PUNCH '//*     _STEPS_   __________ FUNCTION _____________________   '
 PUNCH '//*     EXPDISC   EXPORT-DISCONNECT OLD USERCATALOG           '
         AIF   ('&COMMAND' EQ 'N').NCMD0
 PUNCH '//*     VARYOFF   VARY DEVICE OFFLINE                         '
.NCMD0   ANOP
 PUNCH '//*     INITVOL   INITIALIZE DISK VOLUME USING ICKDSF         '
 PUNCH '//*---------------------------------------------------------* '
 PUNCH '//EXPDISC  EXEC  PGM=IDCAMS,REGION=1024K                      '
 PUNCH '//SYSPRINT  DD   SYSOUT=*                                     '
 PUNCH '//SYSIN     DD   *                                            '
 PUNCH '   EXPORT                                              -      '
 PUNCH '         &CATALOG  -'
 PUNCH '          DCON                                                '
 PUNCH '                                                              '
 PUNCH '   SET MAXCC=0                                                '
 PUNCH '//*---------------------------------------------------------- '
 PUNCH '//*    DEMOUNT THE VOLUME &VOLUME ON UNIT ADDRESS &UNITADR    '
 PUNCH '//*    BEFORE RELEASING THIS TASK                             '
 PUNCH '//*---------------------------------------------------------- '
         AIF   ('&COMMAND' EQ 'N').NCMD1
 PUNCH '//VARYOFF EXEC PGM=COMMAND,                                   '
 PUNCH '//   PARM=''V &UNITADR,OFFLINE''                              '
 PUNCH '//DEALLOC EXEC PGM=COMMAND,                                   '
 PUNCH '//   PARM=''S DEALLOC''                                       '
         AGO  .IVOL1
.NCMD1   ANOP
 PUNCH '//*  V &UNITADR,OFFLINE                                       '
.IVOL1   ANOP
 PUNCH '//INITVOL  EXEC PGM=ICKDSF                                    '
 PUNCH '//*                                                           '
 PUNCH '//* NOTE THE FOLLOWING CONCATINATION                          '
 PUNCH '//*                                                           '
 PUNCH '//IPLTEXT  DD  DISP=SHR,VOL=SER=&SYSRES,UNIT=SYSDA,           '
 PUNCH '//             DSN=&IPLTXT1 '
         AIF (K'&IPLTXT2  EQ 0).SKIPL2
 PUNCH '//         DD  DISP=SHR,VOL=SER=&SYSRES,UNIT=SYSDA,           '
 PUNCH '//             DSN=&IPLTXT2 '
.SKIPL2  ANOP
 PUNCH '//SYSPRINT DD   SYSOUT=*                                      '
 PUNCH '//SYSIN    DD   *                                             '
 PUNCH ' INIT   UNIT(&UNITADR)                                   -    '
 PUNCH '        VOLID(&VOLUME)                                   -    '
 PUNCH '        OWNERID(&OWNER)                                  -    '
 PUNCH '        VTOC(0,1,14)                                     -    '
 PUNCH '        PURGE                                            -    '
 PUNCH '        MAP                                              -    '
 PUNCH '        OWNER(ADR)                                       -    '
 PUNCH '      VERIFY(&VOLUME) /* VOLUME MUST BE LABLED */        -    '
 PUNCH '        NOVALIDATE                                       -    '
 PUNCH '        NOCHECK                                               '
 PUNCH '      IPLDD(IPLTEXT)                                        - '
 PUNCH '      NOBOOTSTRAP /* ICKDSF WILL SUPPLY IT */                 '
 PUNCH '/*                                                            '
 PUNCH '//*---------------------------------------------------------- '
 PUNCH '//*    A MOUNT FOR UNIT=&UNITADR FOR VOLUME=&VOLUME MUST      '
 PUNCH '//*    BE ISSUED BEFORE OTHER JOBS SUBMITTED                  '
 PUNCH '//*---------------------------------------------------------- '
         AIF   ('&COMMAND' EQ 'N').NCMD2
 PUNCH '//MOUNT  EXEC PGM=COMMAND,COND=(0,LT),                        '
 PUNCH '//       PARM=''M &UNITADR,VOL=(SL,&VOLUME),USE=PRIVATE''    '
         AGO  .NEXT0
.NCMD2   ANOP
 PUNCH '//*  M &UNITADR,VOL=(SL,&VOLUME),USE=PRIVATE                  '
.NEXT0   ANOP
 PUNCH '//                                                            '
 PUNCH '//&JOBNAME.1 JOB ('&JOBACCT'),''&JOBPROGM'',          '
         AIF    (K'&NOTIFY EQ 0).SKIPNOT
 PUNCH '//           CLASS=&JOBCLASS,MSGCLASS=&JOBMSGCL.&TYPRN.,'
 PUNCH '//           NOTIFY=&NOTIFY'
         AGO  .OVER1
.SKIPNOT ANOP
 PUNCH '//           CLASS=&JOBCLASS,MSGCLASS=&JOBMSGCL.&TYPRN'
.OVER1   ANOP
 PUNCH '//*---------------------------------------------------------* '
 PUNCH '//* JOB: &JOBNAME.1                                           '
 PUNCH '//* USE: CREATE A VOLUME VOLSER(&VOLUME) THAT WILL CONTAIN    '
 PUNCH '//*      ALL THE NECESSARY DATASETS FOR AN IPL                '
 PUNCH '//*                                                           '
 PUNCH '//*     _STEPS_   __________ FUNCTION _____________________   '
 PUNCH '//*     DEFMCAT   DEFINE A MASTER CATALOG                     '
 PUNCH '//*     DEFVSAM   DEFINE ALL NECESSARY VSAM FILES             '
 PUNCH '//*     DEFNVSAM  DEFINE ALL NECESSARY NON-VSAM FILES         '
 PUNCH '//*               AND IMPORT THE CATALOG AS A UCAT TO THE MCAT'
 PUNCH '//*----------------------------------------------------------*'
 PUNCH '//*                                                           '
 PUNCH '//*                                                           '
 PUNCH '//DEFMCAT  EXEC PGM=IDCAMS,REGION=2048K,COND=(0,LT)           '
 PUNCH '//SYSPRINT  DD   SYSOUT=*                                     '
 PUNCH '//TARGET    DD   DISP=SHR,UNIT=&DEVT,VOL=SER=&VOLUME          '
 PUNCH '//SYSIN     DD   *                                            '
          AIF   (&ICFLG EQ 0).SKIPICF
 PUNCH ' DELETE                                                     - '
 PUNCH '         &SYS1..VVDS.V&VOLUME                               - '
 PUNCH '           FILE(TARGET)                                     - '
 PUNCH '           CLUSTER                                          - '
 PUNCH '           PURGE                                            - '
 PUNCH '       CATALOG(&MASTRCAT./&MASTRPW); '
 PUNCH '                                                              '
 PUNCH ' SET MAXCC=0                                                  '
 PUNCH '                                                              '
 PUNCH ' DEFINE                                                     - '
 PUNCH '  CLUSTER (                                                 - '
 PUNCH '           NAME( &SYS1..VVDS.V&VOLUME )                     - '
 PUNCH '           CYL(1,1)                                         - '
 PUNCH '           VOL(&VOLUME)                                     - '
 PUNCH '           FILE(TARGET)                                     - '
 PUNCH '           NONINDEXED                                       - '
 PUNCH '           OWNER(&OWNER)                                    - '
 PUNCH '         )                                                  - '
 PUNCH '       CATALOG(&MASTRCAT./&MASTRPW); '
.SKIPICF  ANOP
 PUNCH ' DEFINE                                                     - '
 PUNCH '       MASTERCATALOG (                                      - '
 PUNCH '                       NAME( &CATALOG )      - '
 PUNCH '                       CYL(10 2)                           -'
 PUNCH '                       VOL(&VOLUME)                        -'
 PUNCH '                       ATTEMPTS(2)                         -'
 PUNCH '                       BUFFERSPACE(8192)                   -'
 PUNCH '                       BUFND(10)                           -'
 PUNCH '                       BUFNI(10)                           -'
 PUNCH '                       FILE(TARGET)                        -'
          AIF   (&ICFLG EQ 0).SKIPICF2
 PUNCH '                       ICFCATALOG                          -'
.SKIPICF2 ANOP
 PUNCH '                       OWNER(&OWNER)                       -'
 PUNCH '                       STRNO(9)                            -'
 PUNCH '                      )                                    -'
 PUNCH '       CATALOG(&MASTRCAT./&MASTRPW);  '
 PUNCH '//*                                                           '
 PUNCH '//DEFVSAM  EXEC PGM=IDCAMS,REGION=2048K,COND=(0,LT)           '
 PUNCH '//STEPCAT DD  DSN=&CATALOG,DISP=SHR'
 PUNCH '//SYSPRINT DD SYSOUT=*                                        '
 PUNCH '//TARGET DD   DISP=SHR,UNIT=&DEVT,VOL=SER=&VOLUME             '
 PUNCH '//SYSIN  DD   *                                               '
 PUNCH ' DEFINE                                                    -'
 PUNCH '       CLUSTER (                                           -'
 PUNCH '                 NAME( &SYS1..STGINDEX )                   -'
 PUNCH '                 CYL(5)                                    -'
 PUNCH '                 VOL(&VOLUME)                              -'
 PUNCH '                 BUFFERSPACE(20480)                        -'
 PUNCH '                 FILE(TARGET)                              -'
 PUNCH '                 KEYS(12 8)                                -'
 PUNCH '                 OWNER(&OWNER)                             -'
 PUNCH '                 RECORDSIZE(2041,2041)                     -'
 PUNCH '                 REUSE                                     -'
 PUNCH '               )                                           -'
 PUNCH '       DATA (                                              -'
 PUNCH '                 NAME( &SYS1..STGINDEX.DATA )              -'
 PUNCH '                      CISZ(2048)                           -'
 PUNCH '            )                                              -'
 PUNCH '       INDEX (                                             -'
 PUNCH '                 NAME( &SYS1..STGINDEX.INDEX )             -'
 PUNCH '                      CISZ(1024)                           -'
 PUNCH '             )                                             -'
 PUNCH '  CATALOG(&CATALOG);  '
 PUNCH '                                                              '
 PUNCH ' DEFINE                                                    -'
 PUNCH '        PAGESPACE (                                        -'
 PUNCH '                     NAME( &SYS1..&VOLUME..PLPA)           -'
 PUNCH '                           CYL(16)                         -'
 PUNCH '                           VOL(&VOLUME)                    -'
 PUNCH '                           FILE(TARGET)                    -'
 PUNCH '                           OWNER(&OWNER)                   -'
 PUNCH '                           NOSWAP                          -'
 PUNCH '                           UNIQUE                          -'
 PUNCH '                   )                                       -'
 PUNCH '  CATALOG(&CATALOG); '
 PUNCH '                                                              '
 PUNCH ' DEFINE                                                    -'
 PUNCH '        PAGESPACE (                                        -'
 PUNCH '                     NAME( &SYS1..&VOLUME..COMMON )        -'
 PUNCH '                           CYL(6)                          -'
 PUNCH '                           VOL(&VOLUME)                    -'
 PUNCH '                           FILE(TARGET)                    -'
 PUNCH '                           OWNER( RESCUE )                 -'
 PUNCH '                           NOSWAP                          -'
 PUNCH '                           UNIQUE                          -'
 PUNCH '                   )                                       -'
 PUNCH '  CATALOG(&CATALOG);  '
 PUNCH '                                                              '
 PUNCH ' DEFINE                                                    -'
 PUNCH '        PAGESPACE (                                        -'
 PUNCH '                   NAME( &SYS1..&VOLUME..LOCAL1 )          -'
 PUNCH '                          CYL(30)                          -'
 PUNCH '                           VOL(&VOLUME)                    -'
 PUNCH '                           FILE(TARGET)                    -'
 PUNCH '                           OWNER(&OWNER)                   -'
 PUNCH '                           NOSWAP                          -'
 PUNCH '                           UNIQUE                          -'
 PUNCH '                  )                                        -'
 PUNCH '  CATALOG(&CATALOG); '
 PUNCH '                                                              '
 PUNCH ' DEFINE                                                    -'
 PUNCH '        CLUSTER (                                          -'
 PUNCH '                  NAME( &SYS1..MAN1 )                      -'
 PUNCH '                       CYL(5)                              -'
 PUNCH '                       VOL(&VOLUME)                        -'
 PUNCH '                       CISZ(4096)                          -'
 PUNCH '                       FILE(TARGET)                        -'
 PUNCH '                       NONINDEXED                          -'
 PUNCH '                       OWNER( RESCUE )                     -'
 PUNCH '                       RECORDSIZE(4086 32767)              -'
 PUNCH '                       REUSE   SHR(2 3)  SPANNED  SPEED    -'
 PUNCH '                 )                                         -'
 PUNCH '         DATA (                                            -'
 PUNCH '                 NAME( &SYS1..MAN1)                        -'
 PUNCH '              )                                            -'
 PUNCH '  CATALOG(&CATALOG); '
 PUNCH '                                                              '
 PUNCH ' DEFINE                                                    -'
 PUNCH '        CLUSTER (                                          -'
 PUNCH '                  NAME( &SYS1..MAN2 )                      -'
 PUNCH '                       CYL(5)                              -'
 PUNCH '                       VOL(&VOLUME)                        -'
 PUNCH '                       CISZ(4096)                          -'
 PUNCH '                       FILE(TARGET)                        -'
 PUNCH '                       NONINDEXED                          -'
 PUNCH '                       OWNER( RESCUE )                     -'
 PUNCH '                       RECORDSIZE(4086 32767)              -'
 PUNCH '                       REUSE   SHR(2 3)  SPANNED  SPEED    -'
 PUNCH '                 )                                         -'
 PUNCH '         DATA (                                            -'
 PUNCH '                 NAME( &SYS1..MAN2)                        -'
 PUNCH '              )                                            -'
 PUNCH '  CATALOG(&CATALOG); '
 PUNCH '                                                              '
 PUNCH '  LISTCAT  CAT(&CATALOG) ALL  '
 PUNCH '                                                              '
 PUNCH '                                                              '
 PUNCH '//DEFNVSAM EXEC PGM=IDCAMS,REGION=3096K,COND=(0,LT)           '
 PUNCH '//STEPCAT   DD  DSN=&CATALOG,DISP=SHR '
 PUNCH '//SYSPRINT  DD  SYSOUT=*                                      '
 PUNCH '//SYSIN     DD  *                                             '
 PUNCH ' DEF NVSAM (NAME(PASSWORD                    ) OWNER(&OWNER) -'
 PUNCH ' DEVT(0000) VOL(******))   CAT(&CATALOG); '
 PUNCH ' DEF NVSAM (NAME(&SYS1..BRODCAST            ) OWNER(&OWNER) -'
 PUNCH ' DEVT(0000) VOL(******))   CAT(&CATALOG); '
 PUNCH ' DEF NVSAM (NAME(&CMDPROC)        OWNER(&OWNER) -'
 PUNCH ' DEVT(0000) VOL(******))   CAT(&CATALOG); '
 PUNCH ' DEF NVSAM (NAME(&SYS1..CMDLIB              ) OWNER(&OWNER) -'
 PUNCH ' DEVT(0000) VOL(******))   CAT(&CATALOG); '
 PUNCH ' DEF NVSAM (NAME(&SYS1..DAE                 ) OWNER(&OWNER) -'
 PUNCH ' DEVT(0000) VOL(******))   CAT(&CATALOG); '
 PUNCH ' DEF NVSAM (NAME(&SYS1..DUMP00              ) OWNER(&OWNER) -'
 PUNCH ' DEVT(0000) VOL(******))   CAT(&CATALOG); '
 PUNCH ' DEF NVSAM (NAME(&SYS1..DUMP01              ) OWNER(&OWNER) -'
 PUNCH ' DEVT(0000) VOL(******))   CAT(&CATALOG); '
 PUNCH ' DEF NVSAM (NAME(&SYS1..DCMLIB              ) OWNER(&OWNER) -'
 PUNCH ' DEVT(0000) VOL(******))   CAT(&CATALOG); '
 PUNCH ' DEF NVSAM (NAME(&SYS1..HASPACE             ) OWNER(&OWNER) -'
 PUNCH ' DEVT(0000) VOL(******))   CAT(&CATALOG); '
 PUNCH ' DEF NVSAM (NAME(&SYS1..HASPCKPT            ) OWNER(&OWNER) -'
 PUNCH ' DEVT(0000) VOL(******))   CAT(&CATALOG);  '
 PUNCH ' DEF NVSAM (NAME(&SYS1..HASPINDX            ) OWNER(&OWNER) -'
 PUNCH ' DEVT(0000) VOL(******))   CAT(&CATALOG); '
 PUNCH ' DEF NVSAM (NAME(&SYS1..HELP                ) OWNER(&OWNER) -'
 PUNCH ' DEVT(0000) VOL(******))   CAT(&CATALOG); '
 PUNCH ' DEF NVSAM (NAME(&SYS1..IMAGELIB            ) OWNER(&OWNER) -'
 PUNCH ' DEVT(0000) VOL(******))   CAT(&CATALOG); '
 PUNCH ' DEF NVSAM (NAME(&SYS1..LINKLIB             ) OWNER(&OWNER) -'
 PUNCH ' DEVT(0000) VOL(******))   CAT(&CATALOG); '
           AIF    (&RACFLG EQ 0).SKIPRACF
 PUNCH ' DEF NVSAM (NAME(&SYS1..RACF                ) OWNER(&OWNER) -'
 PUNCH ' DEVT(0000) VOL(******))   CAT(&CATALOG); '
.SKIPRACF  ANOP
 PUNCH ' DEF NVSAM (NAME(&SYS1..LOGREC              ) OWNER(&OWNER) -'
 PUNCH ' DEVT(0000) VOL(******))   CAT(&CATALOG); '
 PUNCH ' DEF NVSAM (NAME(&SYS1..LPALIB              ) OWNER(&OWNER) -'
 PUNCH ' DEVT(0000) VOL(******))   CAT(&CATALOG);  '
 PUNCH ' DEF NVSAM (NAME(&SYS1..MACLIB              ) OWNER(&OWNER) -'
 PUNCH ' DEVT(0000) VOL(******))   CAT(&CATALOG); '
 PUNCH ' DEF NVSAM (NAME(&SYS1..NUCLEUS             ) OWNER(&OWNER) -'
 PUNCH ' DEVT(0000) VOL(******))   CAT(&CATALOG);  '
 PUNCH ' DEF NVSAM (NAME(&SYS1..PAGEDUMP            ) OWNER(&OWNER) -'
 PUNCH ' DEVT(0000) VOL(******))   CAT(&CATALOG); '
 PUNCH ' DEF NVSAM (NAME(&SYS1..PARMLIB             ) OWNER(&OWNER) -'
 PUNCH ' DEVT(0000) VOL(******))   CAT(&CATALOG); '
 PUNCH ' DEF NVSAM (NAME(&SYS1..PROCLIB             ) OWNER(&OWNER) -'
 PUNCH ' DEVT(0000) VOL(******))   CAT(&CATALOG); '
 PUNCH ' DEF NVSAM (NAME(&SYS1..SVCLIB              ) OWNER(&OWNER) -'
 PUNCH ' DEVT(0000) VOL(******))   CAT(&CATALOG); '
 PUNCH ' DEF NVSAM (NAME(&SYS1..TELCMLIB            ) OWNER(&OWNER) -'
 PUNCH ' DEVT(0000) VOL(******))   CAT(&CATALOG); '
 PUNCH ' DEF NVSAM (NAME(&SYS1..UADS                ) OWNER(&OWNER) -'
 PUNCH ' DEVT(0000) VOL(******))   CAT(&CATALOG); '
 PUNCH ' DEF NVSAM (NAME(&SYS1..VTAMLIB             ) OWNER(&OWNER) -'
 PUNCH ' DEVT(0000) VOL(******))   CAT(&CATALOG); '
 PUNCH ' DEF NVSAM (NAME(&ISPFUSR1..ISPF.ISPPROF   ) OWNER(&OWNER) - '
 PUNCH ' DEVT(0000) VOL(******))   CAT(&CATALOG); '
 PUNCH ' DEF NVSAM (NAME(&ISPFUSR2..ISPF.ISPPROF   ) OWNER(&OWNER) - '
 PUNCH ' DEVT(0000) VOL(******))   CAT(&CATALOG); '
 PUNCH '                                                            '
 PUNCH ' IMPORT  CONNECT                                           -'
 PUNCH '         OBJECTS(                                          -'
 PUNCH '         (&MASTRCAT.   -'
 PUNCH '         VOLUME (&MCATVOL)                                 -'
 PUNCH '         DEVICETYPE(&DEVT)))                               -'
 PUNCH '         CATALOG(&CATALOG) '
 PUNCH '                                                              '
 PUNCH '  LISTC CATALOG(&CATALOG) NONVSAM  ALL     '
 PUNCH '                                                              '
 PUNCH '/*                                                            '
 PUNCH '//&JOBNAME.2 JOB ('&JOBACCT'),''&JOBPROGM'',          '
         AIF    (K'&NOTIFY EQ 0).SKIPNO1
 PUNCH '//           CLASS=&JOBCLASS,MSGCLASS=&JOBMSGCL.&TYPRN.,'
 PUNCH '//           NOTIFY=&NOTIFY                         '
         AGO  .OVER2
.SKIPNO1 ANOP
 PUNCH '//           CLASS=&JOBCLASS,MSGCLASS=&JOBMSGCL.&TYPRN.'
.OVER2   ANOP
 PUNCH '//*---------------------------------------------------------*'
 PUNCH '//* JOB: &JOBNAME.2                                         *'
 PUNCH '//* USE: CREATE A VOLUME VOLSER(&VOLUME) THAT WILL CONTAIN  *'
 PUNCH '//*      ALL THE NECESSARY DATASETS FOR AN IPL              *'
 PUNCH '//*                                                         *'
 PUNCH '//*  _STEPS_   __________ FUNCTION _____________________    *'
 PUNCH '//*   ALLOC     ALLOCATES ALL NEEDED DATASETS ON VOLUME     *'
 PUNCH '//*  LOAD#01    COPIES CURRENT LIBRARIES TO NEW             *'
 PUNCH '//*  LOAD#02    COPIES USER LIBRARIES TO NEW                *'
 PUNCH '//*  LOAD#03    COPIES VTAM LIBRARIES TO NEW                *'
 PUNCH '//*  IEBUPDTE   CREATES A JES2 PROC ON PROCLIB              *'
 PUNCH '//*  IEBUPDT2   CREATES AN "IEASYS99" MEMBER IN PARMLIB     *'
 PUNCH '//*  GENER      MODS "LIST" AND "LOG" COMMANDS ONTO JES2PARM*'
 PUNCH '//*  BRODCAST   ISSUE "SYNC" COMMAND VSAM FILES             *'
 PUNCH '//*---------------------------------------------------------*'
 PUNCH '//ALLOC   EXEC PGM=IEFBR14,REGION=1024K                      '
 PUNCH '//IPLTEXT  DD   DISP=(,KEEP),DSN=&SYSX..IPLTEXT,             '
 PUNCH '//         UNIT=&DEVT,VOL=SER=&VOLUME,SPACE=(TRK,29)         '
 PUNCH '//LINKLIB  DD   DISP=(,KEEP),DSN=&SYSX..LINKLIB,             '
 PUNCH '//         UNIT=&DEVT,VOL=SER=&VOLUME,SPACE=(CYL,(55,00,551)),'
 PUNCH '//         DCB=(&SYS1..LINKLIB)                              '
 PUNCH '//LOGREC   DD   DISP=(,KEEP),DSN=&SYSX..LOGREC,              '
 PUNCH '//         UNIT=&DEVT,VOL=SER=&VOLUME,SPACE=(CYL,(4)),       '
 PUNCH '//         DCB=(&SYS1..LOGREC)                               '
 PUNCH '//CMDLIB   DD   DISP=(,KEEP),DSN=&SYSX..CMDLIB,              '
 PUNCH '//         UNIT=&DEVT,VOL=SER=&VOLUME,SPACE=(CYL,(03,00,091)),'
 PUNCH '//         DCB=(&SYS1..CMDLIB)                               '
 PUNCH '//CMDPROC  DD  DISP=(,KEEP),DSN=&SYSX..CMDPROC,              '
 PUNCH '//         UNIT=&DEVT,VOL=SER=&VOLUME,SPACE=(CYL,(03,00,091)),'
 PUNCH '//         DCB=(LRECL=80,BLKSIZE=3120,RECFM=FB,DSORG=PO)     '
 PUNCH '//DUMP00   DD  DISP=(,KEEP),DSN=&SYSX..DUMP00,               '
 PUNCH '//         UNIT=&DEVT,VOL=SER=&VOLUME,SPACE=(CYL,10),        '
 PUNCH '//         DCB=(&SYS1..DUMP00)                               '
 PUNCH '//DUMP01   DD   DISP=(,KEEP),DSN=&SYSX..DUMP01,              '
 PUNCH '//         UNIT=&DEVT,VOL=SER=&VOLUME,SPACE=(CYL,10),        '
 PUNCH '//         DCB=(&SYS1..DUMP01)                               '
         AIF ('&NCP' EQ 'N').NCP0
 PUNCH '//NCPDUMP  DD  DISP=(,KEEP),DSN=&SYSX..NCPDUMP,              '
 PUNCH '//         UNIT=&DEVT,VOL=SER=&VOLUME,SPACE=(CYL,(20,1)),    '
 PUNCH '//         DCB=(RECFM=F,LRECL=512,BLKSIZE=512)               '
 PUNCH '//NCPLIB   DD   DISP=(,KEEP),DSN=&SYSX..NCPLIB,              '
 PUNCH '//         UNIT=&DEVT,VOL=SER=&VOLUME,SPACE=(CYL,(04,00,091)),'
 PUNCH '//         DCB=(RECFM=U,LRECL=0,BLKSIZE=23200)               '
 PUNCH '//SSPLIB   DD   DISP=(,KEEP),DSN=&SYSX..SSPLIB,              '
 PUNCH '//         UNIT=&DEVT,VOL=SER=&VOLUME,SPACE=(CYL,(04,00,091)),'
 PUNCH '//         DCB=(RECFM=U,LRECL=0,BLKSIZE=23200)               '
.NCP0   ANOP
 PUNCH '//VTAMLIB  DD  DISP=(,KEEP),DSN=&SYSX..VTAMLIB,             '
 PUNCH '//         UNIT=&DEVT,VOL=SER=&VOLUME,SPACE=(CYL,(04,00,091)),'
 PUNCH '//         DCB=(RECFM=U,LRECL=0,BLKSIZE=23200)               '
 PUNCH '//DAE      DD  DISP=(,KEEP),DSN=&SYSX..DAE,                  '
 PUNCH '//         UNIT=&DEVT,VOL=SER=&VOLUME,SPACE=(CYL,(01,01)),   '
 PUNCH '//         DCB=(RECFM=FB,LRECL=255,BLKSIZE=6120)             '
 PUNCH '//DCMLIB   DD  DISP=(,KEEP),DSN=&SYSX..DCMLIB,               '
 PUNCH '//         UNIT=&DEVT,VOL=SER=&VOLUME,SPACE=(CYL,(01,01,091)),'
 PUNCH '//         DCB=(RECFM=U,LRECL=0,BLKSIZE=23200)               '
 PUNCH '//HELP     DD  DISP=(,KEEP),DSN=&SYSX..HELP,                 '
 PUNCH '//         UNIT=&DEVT,VOL=SER=&VOLUME,SPACE=(CYL,(04,02,091)),'
 PUNCH '//         DCB=(RECFM=FB,LRECL=80,BLKSIZE=6160)              '
 PUNCH '//MACLIB   DD  DISP=(,KEEP),DSN=&SYSX..MACLIB,               '
 PUNCH '//         UNIT=&DEVT,VOL=SER=&VOLUME,SPACE=(CYL,(40,06,091)),'
 PUNCH '//         DCB=(RECFM=FB,LRECL=80,BLKSIZE=6160)              '
 PUNCH '//PASSWORD DD  DISP=(,KEEP),DSN=PASSWORD,                    '
 PUNCH '//         UNIT=&DEVT,VOL=SER=&VOLUME,SPACE=(CYL,(01)),      '
 PUNCH '//         DCB=(RECFM=F,LRECL=80,BLKSIZE=80)                 '
           AIF    (&RACFLG EQ 0).SKPRACF1
 PUNCH '//RACF     DD  DISP=(,KEEP),DSN=&SYSX..RACF,                 '
 PUNCH '//         UNIT=&DEVT,VOL=SER=&VOLUME,                       '
 PUNCH '//         SPACE=(CYL,(02),,CONTIG),                         '
 PUNCH '//         DCB=&SYS1..RACF                                   '
.SKPRACF1  ANOP
 PUNCH '//SVCLIB   DD  DISP=(,KEEP),DSN=&SYSX..SVCLIB,               '
 PUNCH '//         UNIT=&DEVT,VOL=SER=&VOLUME,SPACE=(CYL,(02,00,091)),'
 PUNCH '//         DCB=(RECFM=U,LRECL=0,BLKSIZE=23200)               '
 PUNCH '//TELCMLIB DD  DISP=(,KEEP),DSN=&SYSX..TELCMLIB,             '
 PUNCH '//         UNIT=&DEVT,VOL=SER=&VOLUME,SPACE=(CYL,(03,00,091)),'
 PUNCH '//         DCB=(RECFM=U,LRECL=0,BLKSIZE=23200)               '
 PUNCH '//LPALIB   DD  DISP=(,KEEP),DSN=&SYSX..LPALIB,               '
 PUNCH '//         UNIT=&DEVT,VOL=SER=&VOLUME,SPACE=(CYL,(20,00,413)),'
 PUNCH '//         DCB=(RECFM=U,LRECL=0,BLKSIZE=23200)               '
 PUNCH '//NUCLEUS  DD  DISP=(,KEEP),DSN=&SYSX..NUCLEUS,              '
 PUNCH '//         UNIT=&DEVT,VOL=SER=&VOLUME,SPACE=(CYL,(13,0,091)),'
 PUNCH '//         DCB=(RECFM=U,LRECL=0,BLKSIZE=23200)               '
 PUNCH '//SAMPLIB  DD  DISP=(,KEEP),DSN=&SYSX..SAMPLIB,              '
 PUNCH '//         UNIT=&DEVT,VOL=SER=&VOLUME,SPACE=(CYL,(08,02,091)),'
 PUNCH '//         DCB=(RECFM=FB,LRECL=80,BLKSIZE=6160)              '
 PUNCH '//BRODCAST DD  DISP=(,KEEP),DSN=&SYSX..BRODCAST,             '
 PUNCH '//         UNIT=&DEVT,VOL=SER=&VOLUME,SPACE=(CYL,(01)),      '
 PUNCH '//         DCB=(RECFM=F,LRECL=129,BLKSIZE=129)               '
 PUNCH '//IMAGELIB DD  DISP=(,KEEP),DSN=&SYSX..IMAGELIB,             '
 PUNCH '//         UNIT=&DEVT,VOL=SER=&VOLUME,SPACE=(CYL,(01,01,091)),'
 PUNCH '//         DCB=(RECFM=U,LRECL=0,BLKSIZE=23200)               '
 PUNCH '//PARMLIB  DD  DISP=(,KEEP),DSN=&SYSX..PARMLIB,              '
 PUNCH '//         UNIT=&DEVT,VOL=SER=&VOLUME,SPACE=(CYL,(03,01,091)),'
 PUNCH '//         DCB=(RECFM=FB,LRECL=80,BLKSIZE=6160)              '
 PUNCH '//PROCLIB  DD  DISP=(,KEEP),DSN=&SYSX..PROCLIB,              '
 PUNCH '//         UNIT=&DEVT,VOL=SER=&VOLUME,SPACE=(CYL,(01,01,091)),'
 PUNCH '//         DCB=(RECFM=FB,LRECL=80,BLKSIZE=6160)              '
 PUNCH '//UADS     DD  DISP=(,KEEP),DSN=&SYSX..UADS,                 '
 PUNCH '//         UNIT=&DEVT,VOL=SER=&VOLUME,SPACE=(CYL,(10,02,091)),'
 PUNCH '//         DCB=(RECFM=FB,LRECL=172,BLKSIZE=3096)             '
 PUNCH '//ISRCLIB  DD  DISP=(,KEEP),DSN=&SYSX..ISFCLIB,              '
 PUNCH '//         UNIT=&DEVT,VOL=SER=&VOLUME,SPACE=(CYL,(4,1,45)),  '
 PUNCH '//         DCB=(RECFM=FB,LRECL=80,BLKSIZE=6160)              '
 PUNCH '//ISPPLIB  DD  DISP=(,KEEP),DSN=&SYSX..ISFPLIB,              '
 PUNCH '//         UNIT=&DEVT,VOL=SER=&VOLUME,SPACE=(CYL,(15,05,321)),'
 PUNCH '//         DCB=(RECFM=FB,LRECL=80,BLKSIZE=6160)              '
 PUNCH '//ISPMLIB  DD  DISP=(,KEEP),DSN=&SYSX..ISFMLIB,              '
 PUNCH '//         UNIT=&DEVT,VOL=SER=&VOLUME,SPACE=(CYL,(15,05,137)),'
 PUNCH '//         DCB=(RECFM=FB,LRECL=80,BLKSIZE=6160)              '
 PUNCH '//ISPSLIB  DD  DISP=(,KEEP),DSN=&SYSX..ISFSLIB,              '
 PUNCH '//         UNIT=&DEVT,VOL=SER=&VOLUME,SPACE=(CYL,(05,02,091)),'
 PUNCH '//         DCB=(RECFM=FB,LRECL=80,BLKSIZE=6160)              '
 PUNCH '//ISPTLIB  DD  DISP=(,KEEP),DSN=&SYSX..ISFTLIB,              '
 PUNCH '//         UNIT=&DEVT,VOL=SER=&VOLUME,SPACE=(CYL,(15,05,091)),'
 PUNCH '//         DCB=(RECFM=FB,LRECL=80,BLKSIZE=6160)              '
 PUNCH '//ISPHELP  DD  DISP=(,KEEP),DSN=&SYSX..ISFHELP,              '
 PUNCH '//         UNIT=&DEVT,VOL=SER=&VOLUME,SPACE=(CYL,(2,1,045)), '
 PUNCH '//         DCB=(RECFM=FB,LRECL=80,BLKSIZE=6160)              '
 PUNCH '//HASPCKPT DD  DISP=(,KEEP),DSN=&SYSX..HASPCKPT,             '
 PUNCH '//         UNIT=&DEVT,VOL=SER=&VOLUME,SPACE=(CYL,4)          '
 PUNCH '//HASPACE  DD  DISP=(,KEEP),DSN=&SYSX..HASPACE,              '
 PUNCH '//         UNIT=&DEVT,VOL=SER=&VOLUME,SPACE=(CYL,60)         '
 PUNCH '//HASPINDX DD  DISP=(,KEEP),DSN=&SYSX..HASPINDX,             '
 PUNCH '//         UNIT=&DEVT,VOL=SER=&VOLUME,SPACE=(CYL,1),         '
 PUNCH '//         DCB=(RECFM=FB,LRECL=4096,BLKSIZE=4096)            '
 PUNCH '//VTAMLST  DD  DISP=(,KEEP),DSN=&SYSX..VTAMLST,         '
 PUNCH '//         UNIT=&DEVT,VOL=SER=&VOLUME,SPACE=(CYL,(10,5,91)), '
 PUNCH '//         DCB=(RECFM=FB,LRECL=80,BLKSIZE=6160)              '
 PUNCH '//PROF01   DD  DISP=(,KEEP),DSN=&SYSX..ISPF1.ISPPROF,        '
 PUNCH '//         UNIT=&DEVT,VOL=SER=&VOLUME,SPACE=(CYL,(1,1,45)),  '
 PUNCH '//         DCB=(LRECL=80,BLKSIZE=3120,RECFM=FB,DSORG=PS)     '
 PUNCH '//PROF02   DD  DISP=(,KEEP),DSN=&SYSX..ISPF2.ISPPROF,        '
 PUNCH '//         UNIT=&DEVT,VOL=SER=&VOLUME,SPACE=(CYL,(1,1,45)),  '
 PUNCH '//         DCB=(LRECL=80,BLKSIZE=3120,RECFM=FB,DSORG=PS)     '
 PUNCH '//LOAD#01  EXEC PGM=IEBCOPY,REGION=6096K                '
 PUNCH '//SYSPRINT DD   SYSOUT=*                                '
 PUNCH '//SYSUT3  DD   UNIT=SYSDA,SPACE=(CYL,(100,1))           '
 PUNCH '//SYSUT4  DD   UNIT=SYSDA,SPACE=(CYL,(50,1))            '
 PUNCH '//FCMDLIB DD   DISP=SHR,DSN=&SYS1..CMDLIB               '
 PUNCH '//FCMDPROC DD  DISP=SHR,DSN=&CMDPROC'
 PUNCH '//FDCMLIB DD   DISP=SHR,DSN=&SYS1..DCMLIB               '
 PUNCH '//FELCMLIB DD  DISP=SHR,DSN=&SYS1..TELCMLIB             '
 PUNCH '//FHELP   DD   DISP=SHR,DSN=&SYS1..HELP                 '
 PUNCH '//FIMAGLIB DD  DISP=SHR,DSN=&SYS1..IMAGELIB             '
 PUNCH '//FLINKLIB DD  DISP=SHR,DSN=&SYS1..LINKLIB              '
 PUNCH '//FLPALIB DD   DISP=SHR,DSN=&SYS1..LPALIB               '
 PUNCH '//FMACLIB DD   DISP=SHR,DSN=&SYS1..MACLIB               '
 PUNCH '//FNUCLEUS DD  DISP=SHR,DSN=&SYS1..NUCLEUS              '
         AIF ('&NCP' EQ 'N').NCP2
 PUNCH '//FNCPLIB DD   DISP=SHR,DSN=&SYS1..NCPLIB               '
 PUNCH '//FSSPLIB DD   DISP=SHR,DSN=&SYS1..SSPLIB               '
.NCP2   ANOP
 PUNCH '//FPARMLIB DD  DISP=SHR,DSN=&SYS1..PARMLIB              '
 PUNCH '//FPROCLIB DD  DISP=SHR,DSN=&SYS1..PROCLIB              '
 PUNCH '//FSAMPLIB DD  DISP=SHR,DSN=&SYS1..SAMPLIB              '
 PUNCH '//FSVCLIB DD   DISP=SHR,DSN=&SYS1..SVCLIB               '
 PUNCH '//*                                                     '
 PUNCH '//TCMDLIB DD   DISP=SHR,DSN=&SYSX..CMDLIB,              '
 PUNCH '//        UNIT=&DEVT,VOL=SER=&VOLUME                    '
 PUNCH '//TCMDPROC DD  DISP=SHR,DSN=&SYSX..CMDPROC,             '
 PUNCH '//        UNIT=&DEVT,VOL=SER=&VOLUME                    '
 PUNCH '//TDCMLIB DD   DISP=SHR,DSN=&SYSX..DCMLIB,              '
 PUNCH '//        UNIT=&DEVT,VOL=SER=&VOLUME                    '
 PUNCH '//TELCMLIB DD  DISP=SHR,DSN=&SYSX..TELCMLIB,            '
 PUNCH '//        UNIT=&DEVT,VOL=SER=&VOLUME                    '
 PUNCH '//THELP   DD   DISP=SHR,DSN=&SYSX..HELP,                '
 PUNCH '//        UNIT=&DEVT,VOL=SER=&VOLUME                    '
 PUNCH '//TIMAGLIB DD  DISP=SHR,DSN=&SYSX..IMAGELIB,            '
 PUNCH '//        UNIT=&DEVT,VOL=SER=&VOLUME                    '
 PUNCH '//TLINKLIB DD  DISP=SHR,DSN=&SYSX..LINKLIB,             '
 PUNCH '//        UNIT=&DEVT,VOL=SER=&VOLUME                    '
 PUNCH '//TLPALIB DD   DISP=SHR,DSN=&SYSX..LPALIB,              '
 PUNCH '//        UNIT=&DEVT,VOL=SER=&VOLUME                    '
 PUNCH '//TMACLIB DD   DISP=SHR,DSN=&SYSX..MACLIB,              '
 PUNCH '//        UNIT=&DEVT,VOL=SER=&VOLUME                    '
         AIF ('&NCP' EQ 'N').NCP3
 PUNCH '//TNCPLIB DD   DISP=SHR,DSN=&SYSX..NCPLIB,              '
 PUNCH '//        UNIT=&DEVT,VOL=SER=&VOLUME                    '
 PUNCH '//TSSPLIB DD   DISP=SHR,DSN=&SYSX..SSPLIB,              '
 PUNCH '//        UNIT=&DEVT,VOL=SER=&VOLUME                    '
.NCP3   ANOP
 PUNCH '//TNUCLEUS DD  DISP=SHR,DSN=&SYSX..NUCLEUS,             '
 PUNCH '//        UNIT=&DEVT,VOL=SER=&VOLUME                    '
 PUNCH '//TPARMLIB DD  DISP=SHR,DSN=&SYSX..PARMLIB,             '
 PUNCH '//        UNIT=&DEVT,VOL=SER=&VOLUME                    '
 PUNCH '//TPROCLIB DD  DISP=SHR,DSN=&SYSX..PROCLIB,             '
 PUNCH '//        UNIT=&DEVT,VOL=SER=&VOLUME                    '
 PUNCH '//TSAMPLIB DD  DISP=SHR,DSN=&SYSX..SAMPLIB,             '
 PUNCH '//        UNIT=&DEVT,VOL=SER=&VOLUME                    '
 PUNCH '//TSVCLIB DD   DISP=SHR,DSN=&SYSX..SVCLIB,              '
 PUNCH '//        UNIT=&DEVT,VOL=SER=&VOLUME                    '
 PUNCH '//SYSIN   DD   *                                        '
 PUNCH 'LOAD#01 COPY INDD=FCMDLIB,OUTDD=TCMDLIB,LIST=NO         '
 PUNCH 'LOAD#01 COPY INDD=FCMDPROC,OUTDD=TCMDPROC,LIST=NO       '
 PUNCH 'LOAD#01 COPY INDD=FDCMLIB,OUTDD=TDCMLIB,LIST=NO         '
 PUNCH 'LOAD#01 COPY INDD=FELCMLIB,OUTDD=TELCMLIB,LIST=NO       '
 PUNCH 'LOAD#01 COPY INDD=FHELP,OUTDD=THELP,LIST=NO             '
 PUNCH 'LOAD#01 COPY INDD=FIMAGLIB,OUTDD=TIMAGLIB,LIST=NO       '
 PUNCH 'LOAD#01 COPY INDD=FLINKLIB,OUTDD=TLINKLIB,LIST=NO       '
 PUNCH 'LOAD#01 COPY INDD=FLPALIB,OUTDD=TLPALIB,LIST=NO         '
 PUNCH 'LOAD#01 COPY INDD=FMACLIB,OUTDD=TMACLIB,LIST=NO         '
         AIF ('&NCP' EQ 'N').NCP4
 PUNCH 'LOAD#01 COPY INDD=FNCPLIB,OUTDD=TNCPLIB,LIST=NO         '
 PUNCH 'LOAD#01 COPY INDD=FSSPLIB,OUTDD=TSSPLIB,LIST=NO         '
.NCP4   ANOP
 PUNCH 'LOAD#01 COPY INDD=FNUCLEUS,OUTDD=TNUCLEUS,LIST=NO       '
 PUNCH 'LOAD#01 COPY INDD=FPARMLIB,OUTDD=TPARMLIB,LIST=NO       '
 PUNCH 'LOAD#01 COPY INDD=FPROCLIB,OUTDD=TPROCLIB,LIST=NO       '
 PUNCH 'LOAD#01 COPY INDD=FSAMPLIB,OUTDD=TSAMPLIB,LIST=NO       '
 PUNCH 'LOAD#01 COPY INDD=FSVCLIB,OUTDD=TSVCLIB,LIST=NO         '
 PUNCH '//*                                                     '
 PUNCH '//LOAD#02 EXEC PGM=IEBCOPY,REGION=6096K                 '
 PUNCH '//SYSPRINT DD  SYSOUT=*                                 '
 PUNCH '//SYSUT3  DD   UNIT=SYSDA,SPACE=(CYL,(48,8))            '
 PUNCH '//SYSUT4  DD   UNIT=SYSDA,SPACE=(CYL,(48,8))            '
 PUNCH '//FTSPPLIB DD  DSN=&SYS1..ISFPLIB,DISP=SHR              '
 PUNCH '//FISPPLIB DD  DSN=&SYS1..ISFPLIB,DISP=SHR              '
 PUNCH '//FBASPLIB DD  DSN=&SYS1..ISFPLIB,DISP=SHR              '
 PUNCH '//FISFCLIB DD  DSN=&SYS1..ISFCLIB,DISP=SHR              '
 PUNCH '//FISPMLIB DD  DSN=&SYS1..ISFMLIB,DISP=SHR              '
 PUNCH '//FBASMLIB DD  DSN=&SYS1..ISFMLIB,DISP=SHR              '
 PUNCH '//FISPSLIB DD  DSN=&SYS1..ISFSLIB,DISP=SHR              '
 PUNCH '//FBASSLIB DD  DSN=&SYS1..ISFSLIB,DISP=SHR              '
 PUNCH '//FISPTLIB DD  DSN=&SYS1..ISFTLIB,DISP=SHR              '
 PUNCH '//FBASTLIB DD  DSN=&SYS1..ISFTLIB,DISP=SHR              '
 PUNCH '//FISPHELP DD  DSN=&SYS1..ISFHELP,DISP=SHR              '
 PUNCH '//FBASHELP DD  DSN=&SYS1..ISFHELP,DISP=SHR              '
 PUNCH '//FPROFPR1 DD  DSN=&ISPFUSR1..ISPF.ISPPROF,DISP=SHR     '
 PUNCH '//FPROFPR2 DD  DSN=&ISPFUSR2..ISPF.ISPPROF,DISP=SHR     '
 PUNCH '//*                                                     '
 PUNCH '//TISPPLIB DD  DSN=&SYSX..ISFPLIB,DISP=SHR,             '
 PUNCH '//            UNIT=3380,VOL=SER=&VOLUME                 '
 PUNCH '//TISFCLIB DD  DSN=&SYSX..ISFCLIB,DISP=SHR,             '
 PUNCH '//            UNIT=3380,VOL=SER=&VOLUME                 '
 PUNCH '//TISPMLIB DD  DSN=&SYSX..ISFMLIB,DISP=SHR,             '
 PUNCH '//            UNIT=3380,VOL=SER=&VOLUME                 '
 PUNCH '//TISPSLIB DD  DSN=&SYSX..ISFSLIB,DISP=SHR,             '
 PUNCH '//            UNIT=3380,VOL=SER=&VOLUME                 '
 PUNCH '//TISPTLIB DD  DSN=&SYSX..ISFTLIB,DISP=SHR,             '
 PUNCH '//            UNIT=3380,VOL=SER=&VOLUME                 '
 PUNCH '//TISPHELP DD  DSN=&SYSX..ISFHELP,DISP=SHR,             '
 PUNCH '//            UNIT=3380,VOL=SER=&VOLUME                 '
 PUNCH '//TLINKLIB DD  DSN=&SYSX..LINKLIB,DISP=SHR,             '
 PUNCH '//            UNIT=3380,VOL=SER=&VOLUME                 '
 PUNCH '//TPROFPR1 DD  DSN=&ISPFUSR1..ISPF.ISPPROF,DISP=SHR,    '
 PUNCH '//            UNIT=3380,VOL=SER=&VOLUME,FREE=CLOSE      '
 PUNCH '//TPROFPR2 DD  DSN=&ISPFUSR2..ISPF.ISPPROF,DISP=SHR,    '
 PUNCH '//            UNIT=3380,VOL=SER=&VOLUME,FREE=CLOSE      '
 PUNCH '//SYSIN   DD   *                                        '
 PUNCH 'LOAD#02 COPY INDD=FISFCLIB,OUTDD=TISFCLIB,LIST=NO       '
 PUNCH 'LOAD#02 COPY INDD=FTSPPLIB,OUTDD=TISPPLIB,LIST=NO       '
 PUNCH 'LOAD#02 COPY INDD=FISPPLIB,OUTDD=TISPPLIB,LIST=NO       '
 PUNCH 'LOAD#02 COPY INDD=FBASPLIB,OUTDD=TISPPLIB,LIST=NO       '
 PUNCH 'LOAD#02 COPY INDD=FISPMLIB,OUTDD=TISPMLIB,LIST=NO       '
 PUNCH 'LOAD#02 COPY INDD=FBASMLIB,OUTDD=TISPMLIB,LIST=NO       '
 PUNCH 'LOAD#02 COPY INDD=FISPSLIB,OUTDD=TISPSLIB,LIST=NO       '
 PUNCH 'LOAD#02 COPY INDD=FBASSLIB,OUTDD=TISPSLIB,LIST=NO       '
 PUNCH 'LOAD#02 COPY INDD=FISPTLIB,OUTDD=TISPTLIB,LIST=NO       '
 PUNCH 'LOAD#02 COPY INDD=FBASTLIB,OUTDD=TISPTLIB,LIST=NO       '
 PUNCH 'LOAD#02 COPY INDD=FISPHELP,OUTDD=TISPHELP,LIST=NO       '
 PUNCH 'LOAD#02 COPY INDD=FBASHELP,OUTDD=TISPHELP,LIST=NO       '
 PUNCH 'LOAD#02 COPY INDD=FPROFPR1,OUTDD=TPROFPR1,LIST=NO       '
 PUNCH 'LOAD#02 COPY INDD=FPROFPR2,OUTDD=TPROFPR2,LIST=NO       '
 PUNCH '//*                                                     '
 PUNCH '//LOAD#03 EXEC PGM=IEBCOPY,REGION=4024K                 '
 PUNCH '//SYSPRINT DD  SYSOUT=*                                 '
 PUNCH '//SYSUT3  DD   UNIT=SYSDA,SPACE=(CYL,(48,8))            '
 PUNCH '//SYSUT4  DD   UNIT=SYSDA,SPACE=(CYL,(48,8))            '
 PUNCH '//FVTAMLIB DD  DSN=&SYS1..&VTAMLIB,DISP=SHR             '
 PUNCH '//FVTAMLST DD  DSN=&SYS1..&VTAMLST,DISP=SHR             '
 PUNCH '//TVTAMLIB DD  DSN=&SYSX..VTAMLIB,DISP=SHR,             '
 PUNCH '//            UNIT=SYSDA,VOL=SER=&VOLUME                '
 PUNCH '//TVTAMLST DD  DSN=&SYSX..VTAMLST,DISP=SHR,             '
 PUNCH '//            UNIT=SYSDA,VOL=SER=&VOLUME                '
 PUNCH '//SYSIN   DD   *                                        '
 PUNCH 'LOAD#03 COPY INDD=FVTAMLIB,OUTDD=TVTAMLIB,LIST=NO       '
 PUNCH 'LOAD#03 COPY INDD=FVTAMLST,OUTDD=TVTAMLST,LIST=NO       '
 PUNCH '//*                                                     '
 PUNCH '//*-----------------------------------------------------'
 PUNCH '//*      REPLACE ''JES2'' PROC IN SYSX.PROCLIB          '
 PUNCH '//*-----------------------------------------------------'
 PUNCH '//IEBUPDTE EXEC PGM=IEBUPDTE                            '
 PUNCH '//SYSPRINT DD  SYSOUT=*                                 '
 PUNCH '//SYSUT1  DD   DSN=&SYSX..PROCLIB,DISP=SHR,             '
 PUNCH '//        UNIT=3380,VOL=SER=&VOLUME                     '
 PUNCH '//SYSUT2  DD   DSN=&SYSX..PROCLIB,DISP=SHR,             '
 PUNCH '//        UNIT=3380,VOL=SER=&VOLUME                     '
 PUNCH '//SYSIN   DD   DATA,DLM=$$                              '
 PUNCH './ REPL NAME=JES2,LIST=ALL                              '
 PUNCH '//JES2 PROC                                             '
 PUNCH '//IEFPROC EXEC PGM=HASJES20,TIME=1440                   '
 PUNCH '//PROC00   DD  DSN=&SYS1..PROCLIB,DISP=SHR              '
 PUNCH '//HASPPARM DD  DSN=&SYS1..PARMLIB(JES2PARM),DISP=SHR     '
 PUNCH '//ALTPARMM DD  DSN=&SYS1..PARMLIB(JES2PARM),DISP=SHR     '
 PUNCH '//HASPLIST DD  DDNAME=IEFRDER                           '
 PUNCH './ ENDUP                                                '
 PUNCH '$$                                                      '
 PUNCH '//*                                                     '
 PUNCH '//*-----------------------------------------------------'
 PUNCH '//*        REPLACE PARMLIB MEMBERS                      '
 PUNCH '//*-----------------------------------------------------'
 PUNCH '//IEBUPDT2 EXEC PGM=IEBUPDTE                            '
 PUNCH '//SYSPRINT DD  SYSOUT=*                                 '
 PUNCH '//SYSUT1  DD   DSN=&SYSX..PARMLIB,DISP=SHR,             '
 PUNCH '//        UNIT=3380,VOL=SER=&VOLUME                     '
 PUNCH '//SYSUT2  DD   DSN=&SYSX..PARMLIB,DISP=SHR,             '
 PUNCH '//        UNIT=3380,VOL=SER=&VOLUME                     '
 PUNCH '//SYSIN   DD   *                                        '
 PUNCH './ REPL NAME=IEASYS99,LIST=ALL                          '
 PUNCH 'CMD=99,                           ** COMMAND MEMBER     '
 PUNCH 'LNK=99,                           ** LINKLIST MEMBER    '
 PUNCH 'PAGE=(&SYS1..&VOLUME..PLPA,       ** PLPA               '
 PUNCH '      &SYS1..&VOLUME..COMMON,     ** COMMON             '
 PUNCH '      &SYS1..&VOLUME..LOCAL1,L),  ** LOCAL              '
 PUNCH 'DUMP=(DASD,00-01),                ** SYSX.DUMP DATASETS '
 PUNCH 'PAGENUM=(3,6),                    ** EXTRA PAGE DS      '
 PUNCH 'LOGCLS=A,                         ** FOR SYSLOG DUMP    '
 PUNCH 'IPO=YES,                          ** LET OPER OVERRIDE IEASYS'
 PUNCH 'SMF=99,                           ** SMF PARMS          '
 PUNCH 'CLPA                              ** DO IT EVERY TIME   '
 PUNCH './ REPL NAME=SMFPRM99,LIST=ALL                          '
 PUNCH 'ACTIVE                                                  '
 PUNCH 'DSNAME(SYS1.MAN1,SYS1.MAN2)                             '
 PUNCH 'PROMPT                    /*  PROMPT OPERATOR FOR OPTIONS*/'
 PUNCH 'REC(PERM)                                               '
 PUNCH 'MAXDORM(3000)             /*  WRITE AN IDLE BUFFER AFTER30*/'
 PUNCH 'STATUS(010000)            /*  WRITE SMF STATS AFTER 1 HR*/'
 PUNCH 'JWT(1000)                 /*  522 AFTER ??? MINUTES*/   '
 PUNCH 'SID(&SYSID)               /*  SYSTEM ID */              '
 PUNCH 'LISTDSN                   /*  LIST DATA SET STATUS AT IPL*/'
 PUNCH 'SYS(TYPE(0:255),EXITS(IEFU83,IEFU84,IEFACTRT,IEFUJV,    '
 PUNCH ' IEFUSI,IEFUJI,IEFUTL,IEFU29),NOINTERVAL,NODETAIL)      '
 PUNCH 'SUBSYS(STC,EXITS(IEFU29,IEFU83,IEFU84,IEFUJP,IEFUSO))   '
 PUNCH './ REPL NAME=COMMND99,LIST=ALL                          '
 PUNCH 'TOD=PROMPT                                              '
 PUNCH 'MT=24K                                                  '
 PUNCH 'COM=''D T''                                             '
 PUNCH './  REPL NAME=LNKLST99,LIST=ALL                         '
 PUNCH '&SYS1..LINKLIB                                          '
 PUNCH './ ENDUP                                                '
 PUNCH '/*                                                      '
 PUNCH '//*                                                     '
 PUNCH '//*-----------------------------------------------------'
 PUNCH '//*        ADD A ''LIST'' AND ''LOG'' TO JES2PARM       '
 PUNCH '//*-----------------------------------------------------'
 PUNCH '//GENER  EXEC PGM=IEBGENER                              '
 PUNCH '//SYSPRINT DD SYSOUT=*                                  '
 PUNCH '//SYSUT2   DD DSN=&SYSX..TEMP,DCB=SYS1.PARMLIB,         '
 PUNCH '//         SPACE=(CYL,(1,1)),VOL=SER=&VOLUME,           '
 PUNCH '//         DISP=(,KEEP),UNIT=&DEVT                      '
 PUNCH '//SYSUT1   DD *,DCB=BLKSIZE=16000                       '
 PUNCH './ REPL NAME=JES2PARM,LIST=ALL                          '
 PUNCH 'LOG        * WRITE ALL INITIALIZATION STATEMENTS TO HARDCOPY'
 PUNCH 'LIST       * LIST ALL STATEMENTS TO CONSOLE             '
 PUNCH '//         DD DSN=&SYSX..PARMLIB(JES2PARM),             '
 PUNCH '//         DISP=SHR,                                    '
 PUNCH '//         UNIT=&DEVT,VOL=SER=&VOLUME                   '
 PUNCH '//SYSIN    DD DUMMY                                     '
 PUNCH '//JES2PARM EXEC PGM=IEBUPDTE                            '
 PUNCH '//SYSPRINT DD SYSOUT=*                                  '
 PUNCH '//SYSUT1   DD DSN=&SYSX..PARMLIB,DISP=SHR,              '
 PUNCH '//         UNIT=&DEVT,VOL=SER=&VOLUME                   '
 PUNCH '//SYSUT2   DD DSN=&SYSX..PARMLIB,DISP=SHR,              '
 PUNCH '//         UNIT=&DEVT,VOL=SER=&VOLUME                   '
 PUNCH '//SYSIN    DD DSN=&SYSX..TEMP,DISP=(OLD,DELETE),        '
 PUNCH '//         UNIT=&DEVT,VOL=SER=&VOLUME                   '
 PUNCH '//         DD *                                         '
 PUNCH './ ENDUP                                                '
 PUNCH '//*-----------------------------------------------------'
 PUNCH '//*        FORMAT BROADCAST DATASET                     '
 PUNCH '//*-----------------------------------------------------'
 PUNCH '//BROADCST EXEC PGM=IKJEFT01,                           '
 PUNCH '//        DYNAMNBR=15,                                  '
 PUNCH '//        REGION=2048K                                  '
 PUNCH '//SYSUADS DD DSN=&SYSX..UADS,DISP=SHR,                  '
 PUNCH '//        VOL=SER=&VOLUME,UNIT=SYSDA                    '
 PUNCH '//SYSLBC  DD DSN=&SYSX..BRODCAST,DISP=SHR,              '
 PUNCH '//        VOL=SER=&VOLUME,UNIT=SYSDA                    '
 PUNCH '//SYSPRINT DD SYSOUT=*                                  '
 PUNCH '//SYSTSPRT DD SYSOUT=*                                  '
 PUNCH '//SYSTERM  DD SYSOUT=*                                  '
 PUNCH '//SYSTSPRT DD SYSOUT=*                                  '
 PUNCH '//SYSIN    DD DUMMY                                     '
 PUNCH '//SYSTSIN  DD *                                         '
 PUNCH ' ACCOUNT                                                '
 PUNCH ' SYNC                                                   '
 PUNCH '//*                                                     '
 PUNCH '//&JOBNAME.3 JOB ('&JOBACCT'),''&JOBPROGM'',          '
         AIF    (K'&NOTIFY EQ 0).SKIPNO2
 PUNCH '//           CLASS=&JOBCLASS,MSGCLASS=&JOBMSGCL.&TYPRN.,'
 PUNCH '//           NOTIFY=&NOTIFY                         '
         AGO  .OVER3
.SKIPNO2 ANOP
 PUNCH '//           CLASS=&JOBCLASS,MSGCLASS=&JOBMSGCL.&TYPRN.'
.OVER3   ANOP
 PUNCH '//*------------------------------------------------------*'
 PUNCH '//*                                                      *'
 PUNCH '//*  _STEPS_   __________ FUNCTION _____________________ *'
 PUNCH '//*  IFCDIP00   INITS THE LOGREC DATASET                 *'
 PUNCH '//*  COPYPFK    COPIES CURRENT DCMLIB TO NEW ONE         *'
 PUNCH '//*  COPYPASS   COPIES CURRENT PASSWORD DATASET          *'
 PUNCH '//*  COPYUADS   COPIES CURRENT UADS                      *'
 PUNCH '//*  IDUMP00    INITS DUMP DATASETS                      *'
            AIF    (&RACFLG EQ 0).SKPRACFX
 PUNCH '//*  INITALZE   INITS THE RACF DATASET                   *'
.SKPRACFX   ANOP
 PUNCH '//*  FORMAT     FORMATS SMF DATASETS                     *'
 PUNCH '//*  PROTECT    PROTECTS MASTER CATALOG                  *'
 PUNCH '//*  SYSCATLG   BUILD, RELPACE, SYSCATLG MEMBER IN NUC   *'
 PUNCH '//*  DUMPT      PRINT NEW SYSCATLG MEMBER                *'
        AIF  ('&RENAME' EQ 'N').NREN0
 PUNCH '//*  RENAME     RENAME ALL SYSX TO SYS1                  *'
.NREN0  ANOP
 PUNCH '//*------------------------------------------------------*'
 PUNCH '//*                                                       '
 PUNCH '//IFCDIP00 EXEC PGM=IFCDIP00                              '
 PUNCH '//SERERDS DD DISP=SHR,DSN=&SYSX..LOGREC,                  '
 PUNCH '// UNIT=&DEVT,VOL=SER=&VOLUME                             '
 PUNCH '//*                                                       '
 PUNCH '//COPYPFK EXEC PGM=IEBCOPY                                '
 PUNCH '//SYSPRINT DD SYSOUT=*                                    '
 PUNCH '//IN DD DSN=SYS1.DCMLIB,DISP=SHR                          '
 PUNCH '//OUT DD DSN=&SYSX..DCMLIB,DISP=SHR,                      '
 PUNCH '// UNIT=&DEVT,VOL=SER=&VOLUME                             '
 PUNCH '//SYSIN DD *                                              '
 PUNCH ' C I=((IN,R)),O=OUT                                       '
 PUNCH '//*                                                       '
 PUNCH '//*COPYPASS EXEC PGM=IEBGENER                             '
 PUNCH '//*SYSPRINT DD SYSOUT=*                                   '
 PUNCH '//*SYSUT1 DD DSN=PASSWORD,                                '
 PUNCH '//*       UNIT=&DEVT,VOL=SER=SYSRES,DISP=SHR              '
 PUNCH '//*SYSUT2 DD DSN=PASSWORD,                                '
 PUNCH '//*       UNIT=&DEVT,VOL=SER=&VOLUME,DISP=SHR             '
 PUNCH '//*SYSIN DD DUMMY                                         '
 PUNCH '//*                                                       '
 PUNCH '//COPYUADS EXEC PGM=IEBCOPY                               '
 PUNCH '//SYSPRINT DD SYSOUT=*                                    '
 PUNCH '//SYSUT2 DD UNIT=SYSDA,SPACE=(20,10)                      '
 PUNCH '//SYSUT3 DD UNIT=SYSDA,SPACE=(20,10)                      '
 PUNCH '//FUADS DD DSN=SYS1.UADS,DISP=SHR                         '
 PUNCH '//TUADS DD DSN=&SYSX..UADS,DISP=SHR,                      '
 PUNCH '// UNIT=&DEVT,VOL=SER=&VOLUME                             '
 PUNCH '//SYSIN DD *                                              '
 PUNCH ' COPY I=((FUADS,R)),O=TUADS                               '
 PUNCH '//*                                                       '
 PUNCH '//IDUMP00 EXEC PGM=IEBGENER                               '
 PUNCH '//SYSPRINT DD SYSOUT=*                                    '
 PUNCH '//SYSIN DD DUMMY                                          '
 PUNCH '//SYSUT1 DD DUMMY,DCB=&SYSX..DUMP00                       '
 PUNCH '//SYSUT2 DD DSN=&SYSX..DUMP00,DISP=SHR,                   '
 PUNCH '// UNIT=&DEVT,VOL=SER=&VOLUME                             '
 PUNCH '//IDUMP01 EXEC PGM=IEBGENER                               '
 PUNCH '//SYSPRINT DD SYSOUT=*                                    '
 PUNCH '//SYSIN DD DUMMY                                          '
 PUNCH '//SYSUT1 DD DUMMY,DCB=&SYSX..DUMP00                       '
 PUNCH '//SYSUT2 DD DSN=&SYSX..DUMP01,DISP=SHR,                   '
 PUNCH '// UNIT=&DEVT,VOL=SER=&VOLUME                             '
            AIF    (&RACFLG EQ 0).SKPRACF3
 PUNCH '//*                                                       '
 PUNCH '//INITALZE EXEC PGM=ICHMIN00,PARM=NEW                     '
 PUNCH '//SYSPRINT DD SYSOUT=*                                    '
 PUNCH '//SYSTEMP DD DSN=&SYSX..MACLIB(ICHTEMP0),DISP=SHR         '
 PUNCH '//SYSRACF DD DSN=&SYSX..RACF,DISP=OLD,                    '
 PUNCH '// UNIT=&DEVT,VOL=SER=&VOLUME                             '
.SKPRACF3  ANOP
 PUNCH '//*                                                       '
 PUNCH '//FORMAT EXEC PGM=IFASMFDP                                '
 PUNCH '//STEPCAT DD DSN=CATALOG.I&VOLUME,DISP=SHR                '
 PUNCH '//SYSPRINT DD SYSOUT=*                                    '
 PUNCH '//NEWMAN1 DD DSN=&SYS1..MAN1,DISP=SHR,                    '
 PUNCH '// UNIT=SYSDA,VOL=SER=&VOLUME                             '
 PUNCH '//NEWMAN2 DD DSN=&SYS1..MAN2,DISP=SHR,                    '
 PUNCH '// UNIT=SYSDA,VOL=SER=&VOLUME                             '
 PUNCH '//SYSIN DD *                                              '
 PUNCH ' INDD(NEWMAN1,OPTIONS(CLEAR))                             '
 PUNCH ' INDD(NEWMAN2,OPTIONS(CLEAR))                             '
 PUNCH '//*                                                       '
 PUNCH '//PROTECT  EXEC PGM=IDCAMS                                '
 PUNCH '//STEPCAT DD DSN=CATALOG.I&VOLUME,DISP=SHR                '
 PUNCH '//SYSPRINT DD SYSOUT=*                                    '
 PUNCH ' ALTER CATALOG.I&VOLUME MRPW(&MASTRPW) UPDPW(&MASTRPW) -  '
 PUNCH ' ATT(3) CODE(MASTCAT) -                                   '
 PUNCH ' CAT(&CATALOG/&MASTRPW)                                   '
 PUNCH ' LISTC CAT(&CATALOG/&MASTRPW) ALL                         '
 PUNCH '//*                                                       '
 PUNCH '//*-----------------------------------------------------------'
 PUNCH '//* DOC: THE PURPOSE OF THIS STEP  TO REPLACE MEMBER SYSCATLG'
 PUNCH '//*     IN DATA SET "SYS1.NUCLEUS" TO FACILITATE THE USE OF AN'
 PUNCH '//*    EXISTING ICF OR VSAM MASTER CATALOG WITH A NEWLY CREATE' D
 PUNCH '//*     IPL VOLUME.                                           '
 PUNCH '//*                                                           '
 PUNCH '//* NOTES: ACCEPTABLE CATALOG TYPE VALUES FOR "FILL=" ON THE  '
 PUNCH '//*        "CATTYPE" FD STATEMENT ARE:                        '
 PUNCH '//*          X''00'' AND X''40''  -  VSAM MASTER CATALOG      '
 PUNCH '//*          X''F1''            -  ICF MASTER CATALOG         '
 PUNCH '//*                                                           '
 PUNCH '//*        ACCEPTABLE IPO SUPPORTED DEVICE TYPES FOR "FILL="  '
 PUNCH '//*        ON THE "DEV" FD STATEMENT ARE:                     '
 PUNCH '//*          X''0B'' 3350          X''0E'' 3380               '
 PUNCH '//*          X''0C'' 3375                                     '
 PUNCH '//*        THE IPO SUPPLIED DEFAULT IS X''0E'' FOR A 3380     '
 PUNCH '//*                                                           '
 PUNCH '//*        EXAMPLES OF OTHER DEVICE TYPE VALUES FOR "FILL="   '
 PUNCH '//*        ON THE "DEV" FD STATEMENT ARE:                     '
 PUNCH '//*          X''0D'' 3330-1        X''06'' 2305-1             '
 PUNCH '//*          X''09'' 3330          X''07'' 2305-2             '
 PUNCH '//*          X''0A'' 3340          X''08'' 2314               '
 PUNCH '//*    THESE DEVICES ARE NOT SUPPORTED BY IPO FOR IPO VOLUMES;'
 PUNCH '//*    THESE EXAMPLES ARE INCLUDED FOR COMPLETENESS ONLY.     '
 PUNCH '//*                                                           '
 PUNCH '//*-----------------------------------------------------------'
 PUNCH '//SYSCATLG EXEC PGM=IEBDG,REGION=512K                        '
 PUNCH '//SYSPRINT DD  SYSOUT=*                                       '
 PUNCH '//NUCLEUS  DD  DSN=&SYSX..NUCLEUS(SYSCATLG),                  '
 PUNCH '//             UNIT=&DEVT,VOL=SER=&VOLUME,                    '
 PUNCH '//             DISP=OLD                                       '
 PUNCH '//SYSIN    DD  *                                              '
        LCLC   &SYSVOL
        AIF   ('&DEVT' EQ '3350').D3350
        AIF   ('&DEVT' EQ '3375').D3375
&SYSVOL SETC  '0E'
        AGO   .FDS
.D3350  ANOP
&SYSVOL SETC  '0B'
        AGO   .FDS
.D3375  ANOP
&SYSVOL SETC  '0C'
.FDS    ANOP
 PUNCH 'DSD OUTPUT=(NUCLEUS)                                     '
 PUNCH 'FD NAME=VOL,                                             '
 PUNCH 'LENGTH=06,                                               '
 PUNCH 'STARTLOC=01,                                             '
 PUNCH 'FILL=X''40'',                                            '
 PUNCH 'PICTURE=6,''&VOLUME'' <-----VERIFY VOLSER OF CATALOG     '
 PUNCH 'FD NAME=CATTYPE,                                         '
 PUNCH 'LENGTH=01,                                               '
 PUNCH 'STARTLOC=07,                                             '
       AIF    (&ICFLG EQ 0).VSAM
 PUNCH 'FILL=X''F1'' <-----VERIFY TYPE OF CATALOG                '
       AGO   .NEXTFD
.VSAM  ANOP
 PUNCH 'FILL=X''40'' <-----VERIFY TYPE OF CATALOG                '
.NEXTFD ANOP
 PUNCH 'FD NAME=DEV,                                             '
 PUNCH 'LENGTH=01,                                               '
 PUNCH 'STARTLOC=08,                                             '
 PUNCH 'FILL=X''&SYSVOL'' <-----VERIFY DEVICE TYPE               '
 PUNCH 'FD NAME=CAT,                                             '
 PUNCH 'LENGTH=44,                                               '
 PUNCH 'STARTLOC=11,                                             '
 PUNCH 'FILL=X''40'',                                            '
 PUNCH 'PICTURE=44,''&MASTRCAT''                                 '
 PUNCH 'FD NAME=FIL,                                             '
 PUNCH 'LENGTH=26,                                               '
 PUNCH 'STARTLOC=55,                                             '
 PUNCH 'FILL=X''40''                                             '
 PUNCH ' CREATE QUANTITY=1,FILL=X''00'',NAME=(VOL,CATTYPE,DEV,CAT,FIL)'
 PUNCH '/*                                                   '
 PUNCH '//DUMPT  EXEC PGM=AMASPZAP                           '
 PUNCH '//SYSPRINT DD SYSOUT=*                               '
 PUNCH '//SYSLIB   DD DSN=&SYSX..NUCLEUS,DISP=SHR,           '
 PUNCH '//         UNIT=&DEVT,VOL=SER=&VOLUME                '
 PUNCH '//SYSIN    DD *                                      '
 PUNCH '  DUMPT SYSCATLG ALL                                 '
 PUNCH '/*                                                   '
        AIF  ('&RENAME' EQ 'N').NREN1
 PUNCH '//*                                                          '
 PUNCH '//RENAME  EXEC PGM=IEFBR14,REGION=1024K                      '
 PUNCH '//RESCUE DD    DISP=SHR,UNIT=&DEVT,VOL=SER=&VOLUME           '
 PUNCH '//*                                                          '
 PUNCH '//* YOU HAVE TO ADD YOUR OWN "X" IN COL 72 ...               '
 PUNCH '//*                                                          '
 PUNCH '//SYSIN   DD   *                                             '
 PUNCH ' RENAME DSNAME=&SYSX..IPLTEXT,NEWNAME=&SYS1..IPLTEXT,          X
                          X'
 PUNCH '              VOL=&DEVT=&VOLUME                             '
 PUNCH ' RENAME DSNAME=&SYSX..LINKLIB,NEWNAME=&SYS1..LINKLIB,          X
                          X'
 PUNCH '              VOL=&DEVT=&VOLUME                             '
 PUNCH ' RENAME DSNAME=&SYSX..LOGREC,NEWNAME=&SYS1..LOGREC,            X
                          X'
 PUNCH '              VOL=&DEVT=&VOLUME                             '
 PUNCH ' RENAME DSNAME=&SYSX..CMDLIB,NEWNAME=&SYS1..CMDLIB,            X
                          X'
 PUNCH '              VOL=&DEVT=&VOLUME                             '
 PUNCH ' RENAME DSNAME=&SYSX..CMDPROC,NEWNAME=&SYS1..CMDPROC,          X
                          X'
 PUNCH '              VOL=&DEVT=&VOLUME                             '
 PUNCH ' RENAME DSNAME=&SYSX..VTAMLIB,NEWNAME=&SYS1..VTAMLIB,          X
                          X'
 PUNCH '              VOL=&DEVT=&VOLUME                             '
 PUNCH ' RENAME DSNAME=&SYSX..DAE,NEWNAME=&SYS1..DAE,                  X
                          X'
 PUNCH '              VOL=&DEVT=&VOLUME                             '
 PUNCH ' RENAME DSNAME=&SYSX..DUMP00,NEWNAME=&SYS1..DUMP00,            X
                          X'
 PUNCH '              VOL=&DEVT=&VOLUME                             '
 PUNCH ' RENAME DSNAME=&SYSX..DUMP01,NEWNAME=&SYS1..DUMP01,            X
                          X'
 PUNCH '              VOL=&DEVT=&VOLUME                             '
 PUNCH ' RENAME DSNAME=&SYSX..DCMLIB,NEWNAME=&SYS1..DCMLIB,            X
                          X'
 PUNCH '              VOL=&DEVT=&VOLUME                             '
 PUNCH ' RENAME DSNAME=&SYSX..HELP,NEWNAME=&SYS1..HELP,                X
                          X'
 PUNCH '              VOL=&DEVT=&VOLUME                             '
 PUNCH ' RENAME DSNAME=&SYSX..MACLIB,NEWNAME=&SYS1..MACLIB,            X
                          X'
 PUNCH '              VOL=&DEVT=&VOLUME                             '
 PUNCH ' RENAME DSNAME=&SYSX..SVCLIB,NEWNAME=&SYS1..SVCLIB,            X
                          X'
 PUNCH '              VOL=&DEVT=&VOLUME                             '
           AIF    (&RACFLG EQ 0).SKPRACF2
 PUNCH ' RENAME DSNAME=&SYSX..RACF,NEWNAME=&SYS1..RACF,                X
                          X'
 PUNCH '              VOL=&DEVT=&VOLUME                             '
.SKPRACF2  ANOP
 PUNCH ' RENAME DSNAME=&SYSX..LPALIB,NEWNAME=&SYS1..LPALIB,            X
                          X'
 PUNCH '              VOL=&DEVT=&VOLUME                             '
 PUNCH ' RENAME DSNAME=&SYSX..NUCLEUS,NEWNAME=&SYS1..NUCLEUS,          X
                          X'
 PUNCH '              VOL=&DEVT=&VOLUME                             '
 PUNCH ' RENAME DSNAME=&SYSX..SAMPLIB,NEWNAME=&SYS1..SAMPLIB,          X
                          X'
 PUNCH '              VOL=&DEVT=&VOLUME                             '
 PUNCH ' RENAME DSNAME=&SYSX..ISFCLIB,NEWNAME=&SYS1..ISFCLIB,          X
                          X'
 PUNCH '              VOL=&DEVT=&VOLUME                             '
 PUNCH ' RENAME DSNAME=&SYSX..ISFPLIB,NEWNAME=&SYS1..ISFPLIB,          X
                          X'
 PUNCH '              VOL=&DEVT=&VOLUME                             '
 PUNCH ' RENAME DSNAME=&SYSX..ISFMLIB,NEWNAME=&SYS1..ISFMLIB,          X
                          X'
 PUNCH '              VOL=&DEVT=&VOLUME                             '
 PUNCH ' RENAME DSNAME=&SYSX..ISFSLIB,NEWNAME=&SYS1..ISFSLIB,          X
                          X'
 PUNCH '              VOL=&DEVT=&VOLUME                             '
 PUNCH ' RENAME DSNAME=&SYSX..ISFTLIB,NEWNAME=&SYS1..ISFTLIB,          X
                          X'
 PUNCH '              VOL=&DEVT=&VOLUME                             '
 PUNCH ' RENAME DSNAME=&SYSX..ISFHELP,NEWNAME=&SYS1..ISFHELP,          X
                          X'
 PUNCH '              VOL=&DEVT=&VOLUME                             '
         AIF ('&NCP' EQ 'N').NCP1
 PUNCH ' RENAME DSNAME=&SYSX..NCPDUMP,NEWNAME=&SYS1..NCPDUMP,          X
                          X'
 PUNCH '              VOL=&DEVT=&VOLUME                             '
 PUNCH ' RENAME DSNAME=&SYSX..NCPLIB,NEWNAME=&SYS1..NCPLIB,            X
                          X'
 PUNCH '              VOL=&DEVT=&VOLUME                             '
 PUNCH ' RENAME DSNAME=&SYSX..SSPLIB,NEWNAME=&SYS1..SSPLIB,            X
                          X'
 PUNCH '              VOL=&DEVT=&VOLUME                             '
.NCP1  ANOP
 PUNCH ' RENAME DSNAME=&SYSX..HASPCKPT,NEWNAME=&SYS1..HASPCKPT         X
                          X'
 PUNCH '              VOL=&DEVT=&VOLUME                             '
 PUNCH ' RENAME DSNAME=&SYSX..HASPACE,NEWNAME=&SYS1..HASPACE,          X
                          X'
 PUNCH '              VOL=&DEVT=&VOLUME                             '
 PUNCH ' RENAME DSNAME=&SYSX..HASPINDX,NEWNAME=&SYS1..HASPINDX,        X
                          X'
 PUNCH '              VOL=&DEVT=&VOLUME                             '
 PUNCH ' RENAME DSNAME=&SYSX..TELCMLIB,NEWNAME=&SYS1..TELCMLIB,        X
                          X'
 PUNCH '              VOL=&DEVT=&VOLUME                             '
 PUNCH ' RENAME DSNAME=&SYSX..BRODCAST,NEWNAME=&SYS1..BRODCAST,        X
                          X'
 PUNCH '              VOL=&DEVT=&VOLUME                             '
 PUNCH ' RENAME DSNAME=&SYSX..IMAGELIB,NEWNAME=&SYS1..IMAGELIB,        X
                          X'
 PUNCH '              VOL=&DEVT=&VOLUME                             '
 PUNCH ' RENAME DSNAME=&SYSX..PARMLIB,NEWNAME=&SYS1..PARMLIB,          X
                          X'
 PUNCH '              VOL=&DEVT=&VOLUME                             '
 PUNCH ' RENAME DSNAME=&SYSX..PROCLIB,NEWNAME=&SYS1..PROCLIB,          X
                          X'
 PUNCH '              VOL=&DEVT=&VOLUME                             '
 PUNCH ' RENAME DSNAME=&SYSX..UADS,NEWNAME=&SYS1..UADS,                X
                          X'
 PUNCH '              VOL=&DEVT=&VOLUME                             '
 PUNCH ' RENAME DSNAME=&SYSX..ISPF1.ISPPROF,                           X
                        X'
 PUNCH '              NEWNAME=&ISPFUSR1..ISPF.ISPPROF,                 X
                            X'
 PUNCH '              VOL=&DEVT=&VOLUME                             '
 PUNCH ' RENAME DSNAME=&SYSX..ISPF2.ISPPROF,                           X
                        X'
 PUNCH '              NEWNAME=&ISPFUSR2..ISPF.ISPPROF,                 X
                            X'
 PUNCH '              VOL=&DEVT=&VOLUME                             '
.NREN1   ANOP
         POP  PRINT
.MEND    MEND
