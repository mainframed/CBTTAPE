/* REXX EXEC : ( DB2RMLIB ).
   FUNCTION  : CHECK AND/OR ALLOCATE THE USER.DBRMLIB DATASET FOR
               STORING THE DB2 COMPILE GENERATED DBRM'S.
                                                                      */
TRACE O
/*      */
ADDRESS TSO
SRC = 0
DUNIT = 'APPLTA'
TSOID = SYSVAR(SYSUID)
TSOPRFX = SUBSTR(TSOID,1,4)
IF TSOPRFX = 'TECH' THEN DUNIT = 'SMS'
UCNTL = SYSDSN(USER.DBRMLIB)
IF UCNTL = 'DATASET NOT FOUND' THEN DO
"ATTRIB ATTRB1 DSORG(PO) RECFM(F,B) LRECL(80) BLKSIZE(27920)"
"ALLOC DA(USER.DBRMLIB) NEW SPACE(15,3) DIR(44) USING(ATTRB1) UNIT("DUNIT")"
   SRC = RC
   IF SRC Â¬= 0 THEN DO
   SAY '*** ALLOCATE ERROR: ERROR ALLOCATING DATASET (USER.DBRMLIB). ***'
   SAY '*** DB2RMLIB EXEC TASK CANCELLED - RETURN CODE: ('SRC'). ***'
   EXIT SRC
   END
END
EXIT SRC
