/*  REXX EXEC : ( NWBACKUP ).
    FUNCTION  : LAN BACKUP PANEL INTERFACE FACILITY FOR RESTART OF A
                SPECIFIED SERVER VOLUME(S).
                BUILDS AND SUBMITS THE JOB REQUIRED TO PERFORM THE
                BACKUP OF THE FAILED VOLUME(S).
    INPUT     : PTECH2.NETCA.RESTART.PARMLIB(&SERVER||'RSPRM').
    OUTPUT    : &&USERID.DIALOG.ISPFILE(&&SERVER).
                                                                    */
TRACE O
/*     */
DISPLAY_SERVER_PANEL:
ADDRESS ISPEXEC
TSOID = SYSVAR(SYSUID)
"DISPLAY PANEL(NWSRVPNL)"
SRC = RC
IF SRC = 8 THEN EXIT 0
IF SRC > 8 THEN DO
   SAY '*** ERROR INVOKING ISPF DIALOG PANEL ( NWSRVPNL ). ***'
   SAY '*** NWBACKUP EXEC TASK CANCELLED - RC = 'SRC'. ***'
   EXIT SRC
END
/*     */
INVOKE_RESTART_EXEC:
ADDRESS TSO
IF LAN > 11 THEN DO
   LANUM = LAN - 11
   "%NWBNETEX" LANUM
   EXIT 0
END
"%NWBTCPIP" LAN
EXIT 0
