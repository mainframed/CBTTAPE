CONTROL ASIS END(XIT)
SET JD=&SUBSTR(4:6,&SYSJDATE.)
SET B = &STR(
IF &SYSISPF = ACTIVE THEN DO
  SET L1 = &SUBSTR(1:76,&STR(&SYSDATE..&JD &SYSSTIME &B))
  SET L2 = &SUBSTR(1:76,&STR(IPL &SYSXIPLAT &B))
XIT
ELSE DO
  WRITE &SYSDATE..&JD &SYSSTIME
  IF &STR(&SYSXIPLAT) NE &STR() THEN +
    WRITE IPL &SYSXIPLAT
XIT
SET DV=&SUBSTR(1:1,&SYSXDFP.3030)
SET DR=&SUBSTR(2:3,&SYSXDFP.3030)
SET DM=&SUBSTR(4:4,&SYSXDFP.3030)
SET DR=&DR
SET RV=&SUBSTR(1:1,&SYSLRACF.)
SET RR=&SUBSTR(2:3,&SYSLRACF.)
SET RM=&SUBSTR(4:4,&SYSLRACF.)
SET RR=&RR
SET TV=&SUBSTR(1:1,&SYSTSOE.)
SET TR=&SUBSTR(2:3,&SYSTSOE.)
SET TM=&SUBSTR(4:4,&SYSTSOE.)
SET TR=&TR
IF &LENGTH(&SYSHSM) > 0 THEN DO
SET HV=&SUBSTR(1:1,&SYSHSM.down).
SET HR=&SUBSTR(2:3,&SYSHSM.down)
SET HM=.&SUBSTR(4:4,&SYSHSM.down)
SET HR=&HR
XIT
ELSE SET HV = DOWN
IF &SYSISPF = ACTIVE THEN DO
  SET L3 = &SUBSTR(1:76,&STR(&SYSXMVS DFP &DV..&DR..&DM. &B))
  SET L4 = &SUBSTR(1:76,&STR(RACF &RV..&RR..&RM.  +
                        TSO/E &TV..&TR..&TM.  +
                        HSM &HV.&HR.&HM &B))
  SET L5 = &SUBSTR(1:76,&STR(CPU/Serial &SYSXCPUTYPE.&STR(/)&SYSXSERIAL  SMFID +
                             &SYSXSMFID &B))
  SET L6 = Residence Volume &SYSXRES
  SET ZEDLMSG = &STR(&L1 &L2 &L3 &L4 &L5 &L6)
  SET ZEDSMSG =
  ISPEXEC SETMSG MSG(ISRZ000)
XIT
ELSE DO
WRITE &SYSXMVS DFP &DV..&DR..&DM.
WRITE RACF &RV..&RR..&RM.  +
      TSO/E &TV..&TR..&TM.  +
      HSM &HV.&HR.&HM
WRITE CPU/Serial &SYSXCPUTYPE.&STR(/)&SYSXSERIAL  SMFID &SYSXSMFID
WRITE Residence Volume &SYSXRES
XIT
