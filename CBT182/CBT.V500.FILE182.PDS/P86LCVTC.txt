)ATTR DEFAULT(%+_)
    % TYPE(TEXT) INTENS(HIGH) COLOR(WHITE) SKIP(ON)
    ¢ TYPE(TEXT) INTENS(HIGH) COLOR(YELLOW)
    + TYPE(TEXT) INTENS(LOW)  COLOR(TURQ) SKIP(ON)
    _ TYPE(INPUT) INTENS(HIGH) CAPS(ON) JUST(LEFT) COLOR(RED)
    ¬ TYPE(INPUT) INTENS(HIGH) CAPS(ON) JUST(LEFT) COLOR(RED) PAD(_)
    ¦ TYPE(INPUT) INTENS(HIGH) CAPS(OFF)
)BODY EXPAND(\\)
+-\-\-¢Build LISTFILE using VTOC command+-\-\-
%OPTION  ===>¦ZCMD                                                             +
%
+Enter volume list for%VTOC
%VOLUMEs===>_CPVOL1%===>_CPVOL2%===>_CPVOL3+
+
+Catalog search for each DSNAME%===>_CAT+(Yes/No)
+
+Optional filtering:                                                           +
%LEVELs     ===>_CLSTR1                           %===>_CLSTR2                 +
%More LEVELs===>_CLSTR3            %===>_CLSTR4            %===>_CLSTR5        +
%Containing ===>_CCSTR1            %===>_CCSTR2            %===>_CCSTR3        +
%Ending     ===>_CESTR1            %===>_CESTR2            %===>_CESTR3        +
+
+    Strings for the above filtering must conform to dataset naming
+    conventions.  The userid will not be appended, do not use quotes.
+
)INIT
  &CPVOL1 = &PDSCPVOL
  .CURSOR = CPVOL1
  .HELP   = P86LOHH
  &CAT = TRANS(TRUNC(&CAT,1),Y,YES,*,NO)
)PROC
 VER(&CPVOL1,NB)
 VER(&CLSTR1,DSNAME)
 VER(&CLSTR2,DSNAME)
 VER(&CLSTR3,DSNAME)
 VER(&CLSTR4,DSNAME)
 VER(&CLSTR5,DSNAME)
 VER(&CESTR1,DSNAME)
 VER(&CESTR2,DSNAME)
 VER(&CESTR3,DSNAME)
    &LOPER=&Z
    &CLSTR='&CLSTR1 &CLSTR2 &CLSTR3 &CLSTR4 &CLSTR5'
    IF (&CLSTR ¬= &Z) &LOPER='LEVEL(&CLSTR)'
    &CCSTR='&CCSTR1 &CCSTR2 &CCSTR3'
    IF (&CCSTR ¬= &Z) &LOPER='&LOPER CONT(&CCSTR)'
    &CESTR='&CESTR1 &CESTR2 &CESTR3'
    IF (&CESTR ¬= &Z) &LOPER='&LOPER END(&CESTR)'
 &PDSCPVOL = &CPVOL1
 &CAT = TRANS(TRUNC(&CAT,1),Y,YES,N,NO,' ',NO,*,*)
 VER(&CAT,LIST,'YES','NO')
 IF (&CAT = 'YES')
   &LOCATE = 'PRINT(REP (SECT UPD CAT)) CAT'
 ELSE
   &LOCATE = 'PRINT(REP (SECT UPD))'
 /* xxxx in following command is where the buf control word is placed*/
 &PDSZSEL='xxxxvtoc (&CPVOL1 &CPVOL2 &CPVOL3) &LOPER &LOCATE'
)END
